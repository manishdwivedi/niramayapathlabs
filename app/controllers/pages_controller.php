<?php
class PagesController extends AppController
{
	var $name = "Pages";

	var $breadcrumb = array();
	var $uses=array('RunnerTimeslot','Samplemaster','RunnerSampleData','DropLocations','RunnerRequest','PrescriptionMaster','Page','Pagelocale','Locale','Banner','User','Siteadminlang','Test','Package','Health','Billing','State','Doctor','Specialization','DoctorClinic','ClinicTime','SearchedDoctor','BookAppointment','AppointmentBookStat','StateCity','City','Lab','PincodeMaster','State','Ticket','TaskCategory','TicketTracking');
	var $helpers = array('Form','Html','Javascript', 'Ajax');
	
	public $paginate = array(
	   
	    'maxLimit' => 10
	);
	
	function send()
	{
	 
    $this->Email->to = 'puneet.agrawal88@gmail.com';
    $this->Email->bcc = array('agrawalrohit3010@gmail.com');
	$this->Email->cc = array('anjalisharmadelhi87@gmail.com');
    $this->Email->subject = 'test';
    //$this->Email->replyTo = 'support@example.com';
    $this->Email->from = 'anjalisharma <anjalis@itcombine.com>';
    $this->Email->template = 'test static message';
    
    $this->Email->sendAs = 'both'; 
    $this->Email->send();
	}
	
	function covid_19()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Corona Covid-19');
		$this->set('page_description','Corona Covid-19');
		$this->set('page_keyword','Corona Covid-19');
		$data = $this->Pagelocale->find('all',array('conditions'=>array('Pagelocale.page_id'=>6),'order'=>array('Pagelocale.locale_id ASC')));
		$this->set('data',$data);
	}
		
	function index1(){
		$this->layout='default1';
		$this->pageTitle = "Art Bank";
		$this->set('title_for_layout','Top Pathology Test Lab Delhi, NABL Certified Lab in Gurugram, 24/7 Lab in NCR');
		$this->set('page_description','Niramaya Healthcare, Pathology Lab (path care) is an elite Diagnostic and Wellness service provider with presence in the National Capital Region of Delhi. We provide service 24/7 environments with attractive offers on Test.');
		$this->set('page_keyword','Niramaya Health Care , Diagnostic and Wellness service provider, Test Lab, Pathology Lab');
		$this->Sample=ClassRegistry::init('Test');
		$tests = $this->Test->find('all',array('conditions'=>array('Test.status'=>1,'Test.type'=>'TEST')));
		$this->set('tests',$tests);
		$profiles = $this->Test->find('all',array('conditions'=>array('Test.status'=>1,'Test.type'=>'PROFILE')));
		$this->set('profiles',$profiles);
		$encoded_mess_url = base64_decode($messg);
		if(!empty($encoded_mess_url) && $encoded_mess_url == 'Thank You For Your time we will be calling you soon')
		{
			$this->set('cll_msg',$encoded_mess_url);
		}
		if(!empty($encoded_mess_url) && $encoded_mess_url == 'Thank You for your time, your information has been recorded')
		{
			$this->set('bm_msg',$encoded_mess_url);
		}
		if($messg == 'become_form')
		{
			$this->Become=ClassRegistry::init('Become');
			if(!empty($this->data))
			{
				//echo "<pre>"; print_r($this->data); exit;
				if($this->Become->create($this->data))
				{
					if($this->Become->save($this->data,false))
					{
						$someOneArray1 = array();
			    		$someOneArray1['Become']['name'] = $this->data['Become']['name'];
						$someOneArray1['Become']['email'] = $this->data['Become']['email'];
						$this->set('mailContent1' , $someOneArray1 );
						$this->Email->template = 'become';
						$this->Email->from = $this->data['Become']['email'];
						$this->Email->fromName = $this->data['Become']['name'];
						$this->Email->subject = 'Become A Member';
						//$this->Email->to = $this->data['Sample']['email'];
						$this->Email->to = 'info@lotusfacilities.com,tripathi.ashish2007@gmail.com';
						//Send as 'html', 'text' or 'both' (default is 'text')
						$this->Email->sendAs = 'html'; // because we like to send pretty mail
						$this->Email->delivery = 'mail';
						if($this->Email->send())
						{
							$bcm_msg = base64_encode('Thank You for your time, your information has been recorded');
							$this->redirect(array('controller'=>'pages','action'=>'index',$bcm_msg));
						}
	      			}
				}
			}
		}
		
		if($messg == 'call_form')
		{
			$this->Call=ClassRegistry::init('Call');
			if(!empty($this->data))
			{
				if($this->Call->create($this->data))
				{
					if($this->Call->save($this->data,false))
					{
						$someOneArray = array();
			    		$someOneArray['Call']['name'] = $this->data['Call']['name'];
						$someOneArray['Call']['phone'] = $this->data['Call']['phone'];
						$someOneArray['Call']['message'] = $this->data['Call']['message'];
						$this->set('mailContent' , $someOneArray );
						$this->Email->template = 'call';
						$this->Email->from = 'Call Back';
						$this->Email->fromName = $this->data['Call']['name'];
						$this->Email->subject = 'Call Back';
						//$this->Email->to = $this->data['Sample']['email'];
						$this->Email->to = 'info@lotusfacilities.com,tripathi.ashish2007@gmail.com';
						//Send as 'html', 'text' or 'both' (default is 'text')
						$this->Email->sendAs = 'html'; // because we like to send pretty mail
						$this->Email->delivery = 'mail';
						if($this->Email->send())
						{
							$cl_msg = base64_encode('Thank You For Your time we will be calling you soon');
							$this->redirect(array('controller'=>'pages','action'=>'index',$cl_msg));
						}
	      			}
				}
			}
		}
		$find_banners = $this->Banner->find('all',array('conditions'=>array('Banner.show_status'=>'yes','Banner.status'=>1)));
		$this->set('show_banner',$find_banners);
		
		//Featured Doctor Starts
		$featured_doctor = $this->Doctor->find('all',array('conditions'=>array('Doctor.featured'=>1,'Doctor.admin_featured'=>1,'Doctor.status'=>1),'limit'=>3,'order'=>array('Doctor.id DESC')));
		$g = 0;
		foreach($featured_doctor as $kk => $vv)
		{
			$expl_speciality = explode(',',$vv['Doctor']['specialization']);
			$count = count($expl_speciality);
			if($count == 1)
			{
				$speciality_1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[0])));
				$featured_doctor[$g]['Doctor']['speciality'] = $speciality_1['Specialization']['display_name'];
				$g++;
			}
			if($count == 2)
			{
				$speciality_1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[0])));
				$speciality_2 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[1])));
				$featured_doctor[$g]['Doctor']['speciality'] = $speciality_1['Specialization']['display_name'].','.$speciality_2['Specialization']['display_name'];
				$g++;
			}
			if($count == 3)
			{
				$speciality_1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[0])));
				$speciality_2 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[1])));
				$featured_doctor[$g]['Doctor']['speciality'] = $speciality_1['Specialization']['display_name'].','.$speciality_2['Specialization']['display_name'];
				$g++;
			}
			if($count == 4)
			{
				$speciality_1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[0])));
				$speciality_2 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[1])));
				$featured_doctor[$g]['Doctor']['speciality'] = $speciality_1['Specialization']['display_name'].','.$speciality_2['Specialization']['display_name'];
				$g++;
			}
			if($count == 5)
			{
				$speciality_1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[0])));
				$speciality_2 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[1])));
				$featured_doctor[$g]['Doctor']['speciality'] = $speciality_1['Specialization']['display_name'].','.$speciality_2['Specialization']['display_name'];
				$g++;
			}
		}
		$this->set('featured_doctor',$featured_doctor);
		$speciality = $this->Specialization->find('all',array('conditions'=>array('Specialization.status'=>1)));
		$this->set('speciality',$speciality);
		$states = $this->State->find('all',array('conditions'=>array('State.status'=>1)));
		$this->set('states',$states);
		$delhi_city = $this->StateCity->find('all',array('conditions'=>array('StateCity.state_id'=>10,'StateCity.status'=>0)));
		$this->set('delhi_city',$delhi_city);
		//Featured Doctor Ends
	}
	
	
	function index(){
                $this->redirect("/");
		$this->layout='default';
		$this->pageTitle = "Art Bank";
		$this->set('title_for_layout','Niramaya Health Care , Pathcare, Pathlab, Test Lab, Pathology Lab');
		$this->set('page_description','Niramaya Health care, Pathology Lab (path care) is an elite Diagnostic and Wellness service provider with presence in the National Capital Region of Delhi.');
		$this->set('page_keyword','Niramaya Health Care , Diagnostic and Wellness service provider, Test Lab, Pathology Lab');
		$this->Sample=ClassRegistry::init('Test');
		$tests = $this->Test->find('all',array('conditions'=>array('Test.status'=>1,'Test.type'=>'TEST')));
		$this->set('tests',$tests);
		$profiles = $this->Test->find('all',array('conditions'=>array('Test.status'=>1,'Test.type'=>'PROFILE')));
		$this->set('profiles',$profiles);
		$encoded_mess_url = base64_decode($messg);
		if(!empty($encoded_mess_url) && $encoded_mess_url == 'Thank You For Your time we will be calling you soon')
		{
			$this->set('cll_msg',$encoded_mess_url);
		}
		if(!empty($encoded_mess_url) && $encoded_mess_url == 'Thank You for your time, your information has been recorded')
		{
			$this->set('bm_msg',$encoded_mess_url);
		}
		if($messg == 'become_form')
		{
			$this->Become=ClassRegistry::init('Become');
			if(!empty($this->data))
			{
				//echo "<pre>"; print_r($this->data); exit;
				if($this->Become->create($this->data))
				{
					if($this->Become->save($this->data,false))
					{
						$someOneArray1 = array();
			    		$someOneArray1['Become']['name'] = $this->data['Become']['name'];
						$someOneArray1['Become']['email'] = $this->data['Become']['email'];
						$this->set('mailContent1' , $someOneArray1 );
						$this->Email->template = 'become';
						$this->Email->from = $this->data['Become']['email'];
						$this->Email->fromName = $this->data['Become']['name'];
						$this->Email->subject = 'Become A Member';
						//$this->Email->to = $this->data['Sample']['email'];
						$this->Email->to = 'info@lotusfacilities.com,tripathi.ashish2007@gmail.com';
						//Send as 'html', 'text' or 'both' (default is 'text')
						$this->Email->sendAs = 'html'; // because we like to send pretty mail
						$this->Email->delivery = 'mail';
						if($this->Email->send())
						{
							$bcm_msg = base64_encode('Thank You for your time, your information has been recorded');
							$this->redirect(array('controller'=>'pages','action'=>'index',$bcm_msg));
						}
	      			}
				}
			}
		}
		
		if($messg == 'call_form')
		{
			$this->Call=ClassRegistry::init('Call');
			if(!empty($this->data))
			{
				if($this->Call->create($this->data))
				{
					if($this->Call->save($this->data,false))
					{
						$someOneArray = array();
			    		$someOneArray['Call']['name'] = $this->data['Call']['name'];
						$someOneArray['Call']['phone'] = $this->data['Call']['phone'];
						$someOneArray['Call']['message'] = $this->data['Call']['message'];
						$this->set('mailContent' , $someOneArray );
						$this->Email->template = 'call';
						$this->Email->from = 'Call Back';
						$this->Email->fromName = $this->data['Call']['name'];
						$this->Email->subject = 'Call Back';
						//$this->Email->to = $this->data['Sample']['email'];
						$this->Email->to = 'info@lotusfacilities.com,tripathi.ashish2007@gmail.com';
						//Send as 'html', 'text' or 'both' (default is 'text')
						$this->Email->sendAs = 'html'; // because we like to send pretty mail
						$this->Email->delivery = 'mail';
						if($this->Email->send())
						{
							$cl_msg = base64_encode('Thank You For Your time we will be calling you soon');
							$this->redirect(array('controller'=>'pages','action'=>'index',$cl_msg));
						}
	      			}
				}
			}
		}
		$find_banners = $this->Banner->find('all',array('conditions'=>array('Banner.show_status'=>'yes','Banner.status'=>1)));
		$this->set('show_banner',$find_banners);
		
		//Featured Doctor Starts
		$featured_doctor = $this->Doctor->find('all',array('conditions'=>array('Doctor.featured'=>1,'Doctor.admin_featured'=>1,'Doctor.status'=>1),'limit'=>3,'order'=>array('Doctor.id DESC')));
		$g = 0;
		foreach($featured_doctor as $kk => $vv)
		{
			$expl_speciality = explode(',',$vv['Doctor']['specialization']);
			$count = count($expl_speciality);
			if($count == 1)
			{
				$speciality_1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[0])));
				$featured_doctor[$g]['Doctor']['speciality'] = $speciality_1['Specialization']['display_name'];
				$g++;
			}
			if($count == 2)
			{
				$speciality_1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[0])));
				$speciality_2 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[1])));
				$featured_doctor[$g]['Doctor']['speciality'] = $speciality_1['Specialization']['display_name'].','.$speciality_2['Specialization']['display_name'];
				$g++;
			}
			if($count == 3)
			{
				$speciality_1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[0])));
				$speciality_2 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[1])));
				$featured_doctor[$g]['Doctor']['speciality'] = $speciality_1['Specialization']['display_name'].','.$speciality_2['Specialization']['display_name'];
				$g++;
			}
			if($count == 4)
			{
				$speciality_1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[0])));
				$speciality_2 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[1])));
				$featured_doctor[$g]['Doctor']['speciality'] = $speciality_1['Specialization']['display_name'].','.$speciality_2['Specialization']['display_name'];
				$g++;
			}
			if($count == 5)
			{
				$speciality_1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[0])));
				$speciality_2 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_speciality[1])));
				$featured_doctor[$g]['Doctor']['speciality'] = $speciality_1['Specialization']['display_name'].','.$speciality_2['Specialization']['display_name'];
				$g++;
			}
		}
		$this->set('featured_doctor',$featured_doctor);
		$speciality = $this->Specialization->find('all',array('conditions'=>array('Specialization.status'=>1)));
		$this->set('speciality',$speciality);
		$states = $this->State->find('all',array('conditions'=>array('State.status'=>1)));
		$this->set('states',$states);
		$delhi_city = $this->StateCity->find('all',array('conditions'=>array('StateCity.state_id'=>10,'StateCity.status'=>0)));
		$this->set('delhi_city',$delhi_city);
		//Featured Doctor Ends
	}

	
	
	function process(){
		$this->layout='default';
		$this->pageTitle = "Art Bank";
	}
	
	function specialities_all(){
		$this->layout='tests';
		$this->pageTitle = "Specialities";
	}
	
	
	function _page($page_seo_title, $render = true){
		$data = $this->Page->find(array('Page.seo_title'=>$page_seo_title, 'Page.status' => 1), array('Page.title', 'Page.content', 'Page.meta_keywords', 'Page.meta_description'));

		if(is_array($data) && count($data) > 0){
			$this->set('title_for_layout', $data['Page']['title']);
			$this->set('data', $data);
			$this->set('meta_keywords', trim($data['Page']['meta_keywords']));
			$this->set('meta_description', trim($data['Page']['meta_description']));

			if($render){
				$this->render('page');
			} else {
				return;
			}
		} else {
			return false;
		}		
	}
	function sta()
	{
	$this->set('title_for_layout',__('Static_page',true));

		//echo "<pre>"; print_r($this->Session->read('Locale.id')); exit;

		$sta = $this->Pagelocale->find('all',array('conditions'=>array('Pagelocale.page_id'=>12,'Pagelocale.locale_id'=>$this->Session->read('Locale.id'))));
		$this->set('data',$sta);
	 
	}

	function page($id) {
		//$this->layout='admin/default';
		$left_pages = array();
		if(isset($id) && $id){
			$data = $this->Page->find(array('Page.id'=>$id, 'Page.status' => 1), array('Page.id', 'Page.title', 'Page.content', 'Page.meta_keywords', 'Page.meta_description'));
			if(is_array($data) && count($data) > 0){
				$this->set('title_for_layout', $data['Page']['title']);
				$this->set('data', $data);
				$this->set('meta_keywords', trim($data['Page']['meta_keywords']));
				$this->set('meta_description', trim($data['Page']['meta_description']));
				// check for left navigation
				$left_pages = $this->Page->find('all',  array('conditions' => array('Page.parent_id'=> $data['Page']['id'], 'Page.status' => 1), 'fields' => array('Page.title', 'Page.seo_title')));
			} else {
				$this->cakeError('error404');
			}			
		} else {
			$this->cakeError('error404');
		}

		$this->set('left_pages', $left_pages);
	}

	function ajax_page($seo_title) {
		$this->layout='';
		if(isset($seo_title) && trim($seo_title)!=''){
			$data = $this->Page->find(array('Page.seo_title'=>$seo_title, 'Page.status' => 1), array('Page.id', 'Page.title', 'Page.content', 'Page.meta_keywords', 'Page.meta_description'));
			if(is_array($data) && count($data) > 0){
				$this->set('title_for_layout', $data['Page']['title']);
				$this->set('data', $data);
				$this->set('meta_keywords', trim($data['Page']['meta_keywords']));
				$this->set('meta_description', trim($data['Page']['meta_description']));
			} else {
				$this->cakeError('error404');
			}			
		} else {
			$this->cakeError('error404');
		}
		$this->render('page');
	
	}

	function customerService(){	
		$this->layout='default';	
		$this->set('title_for_layout', "Customer Service");
		if(!empty($this->data)) {
			//pr($this->data); die;
			
			if(($this->Page->create($this->data)) && ($this->Page->validates($this->data))){
			// sending email	
				if($this->_emailContactUs($this->data)){
					// set message
					$this->Session->setFlash('Your request has been submitted successfully. We will get back to you soon.','flash_success');
					// redirect to same page
					$this->redirect('/pages/customerService/');
				}else {
					// set message
					$this->Session->setFlash('Some error has been occured. Please try again later.','flash_failure');
				}		
			}else
			{
				$this->Page->invalidFields();
			}
			
		} 
		$countries = $this->Country->find('list');		
		$this->set('countries', $countries);
		
		$faqData =  $this->Faq->find('all',array('conditions' => array('Faq.status'=>1), 'order' => 'Faq.created DESC'));
		//pr($faqData);
		$this->set('faqData', $faqData);
		//$this->_page('contact-us', false);
	}
	
	

	function _emailContactUs($data){
				
			$this->Email->to = 'vipin.vishwkarma@truelogictechnology.com';
			//$this->Email->to = WEBSITE_ADMINISTRATOR_EMAIL;
			$this->Email->subject = 'Contact Us';
			$this->Email->replyTo = $data['Customer']['email'];
			$this->Email->from = 'starksuits <'.WEBSITE_ADMINISTRATOR_EMAIL.'>';
			$this->Email->template = 'contact_us'; // note no '.ctp'
			//Send as 'html', 'text' or 'both' (default is 'text')
			$this->Email->sendAs = 'both'; // because we like to send pretty mail
			//Set view variables as normal
			$this->set('data', $data);
			//Do not pass any args to send()
			if($this->Email->send()){
				return true;
			} else {
				return false;
			}
		}
	

	function admin_index() {

		$this->set('title_for_layout', 'Manage Page(s)');
          $locale_id=$this->getDefaultlocale();
        $this->Page->bindModel(array('hasMany'=>array(
			                         'pagelocales'=>array(  
	                                 'foreign'=>'page_id',
			                        'conditions'=>array('pagelocales.locale_id='.$locale_id))
									)),false);
		$conditions = array();

		
		

		if(!empty($this->data)){
			if(isset($this->data['Page']['id']) && count($this->data['Page']['id']) && trim($this->data['Page']['mode']) != ''){
				$this->update_mode($this->data['Page']['id'], $this->data['Page']['mode']);
			} else {
				// set message
				$this->Session->setFlash('Please select atlest one page(s) to perform any action','flash_failure');
			}
		}		
		
		$this->paginate = array('Page' => array('limit' => DEFAULT_PAGE_SIZE, 'conditions' => $conditions, 'order' => 'Page.title DESC'));
		$pages = $this->paginate('Page');
		$this->set('pages', $pages);
		
		$this->set_breadcrumb($this->data['Page']['id']);
		$this->set('breadcrumbs', array_reverse($this->breadcrumb,true));
	}

	function admin_add($parent_id = null) {
		$this->set('title_for_layout', 'Add Page');
		if(!empty($this->data)) {
			if($this->Page->create($this->data) && $this->Page->validates()){
				$title=$this->data['Page']['title'];
				$content=$this->data['Page']['content'];
				//$this->data['Page']['status']=0;
				$this->data['Page']['title']=$this->data['Page']['title1'];
				$this->data['Page']['content']="";

				//echo "asasa<pre>"; print_r(); exit;
				
				// save in database
				if($this->Page->save($this->data,false)){
					//print_r($this->data);exit;
					$page_id=$this->Page->getLastInsertID();
					  $data['Pagelocale']['title']=$this->data['Page']['title1'];
					  $data['Pagelocale']['content']=$this->data['Page']['content1'];
					  $data['Pagelocale']['page_id']=$page_id;
					  $data['Pagelocale']['locale_id']=$this->Session->read('Locale.id');
					  $this->Pagelocale->create();
					  $this->Pagelocale->save($data['Pagelocale']);
					 // die;
					  /*if(isset($this->data['Code']) && count($this->data['Code'])>0){
					   
						 foreach($this->data['Code'] as $c){
							 if($c!=$locale){
								  $data['Pagelocale']['title']=$title[$c];
								  $data['Pagelocale']['content']=$content[$c];;
								  $data['Pagelocale']['page_id']=$page_id;
								  $data['Pagelocale']['locale_id']=$c;
								   $this->Pagelocale->create();
								   $this->Pagelocale->save($data['Pagelocale']);
							}
						 }
					  }*/
					// set message
					$this->Session->setFlash('Page information has been saved successfully','flash_success');
					// redirect to same page
					$this->redirect('/admin/pages/index/parentId:'.trim($this->data['Page']['parentId']));
				} else {
					// set message
					$this->Session->setFlash('Some error has been occured. Please try again later.','flash_failure');
				}				
			} else {
				$this->Page->invalidFields();
			}
			
		} 
		$locales = $this->Siteadminlang->find('all',array('conditions' => array('status' => 1)));
		//echo "<pre>"; print_r($Siteadminlangs); exit;
	    $this->set('locales', $locales);
		
		$this->set_breadcrumb('');
		$this->set('breadcrumbs', array_reverse($this->breadcrumb,true));
	}

	function admin_edit($id) {
			$this->set('id',$id);
			$this->Page->bindModel(array(
								 'hasMany'=>array(
								  'pagelocales'=>array(  
								  'foreign'=>'page_id'
								  ))),false);
		$this->set('title_for_layout', 'Edit Page');
		if(isset($id) && trim($id)!=''){
			if(!empty($this->data)) {
				$data = $this->Page->find(array('Page.id'=>$id));
				$this->set('data', $data);
				//$this->data['Page']['type'] = $data['Page']['type'];
				if($this->Page->create($this->data) && $this->Page->validates()){
                   $this->data['Page']['id']=$id;
					$title=$this->data['Page']['title1'];
					$content=$this->data['Page']['content'];
					//$this->data['Page']['status']=0;
					//$this->data['Page']['title']="";
					//$this->data['Page']['content']="";
					
					$this->Page->save($this->data,false);
				
					if($this->Page->save($this->data,false)){
						//$delCond['conditions'] = array('Pagelocale.id'=>$id);
                      $this->Pagelocale->deleteAll(array('Pagelocale.page_id'=>$id));
					   
					  $data['Pagelocale']['title']=$this->data['Page']['title1'];
					  $data['Pagelocale']['content']=$this->data['Page']['content1'];
					  $data['Pagelocale']['page_id']=$id;
					  $data['Pagelocale']['locale_id']=$this->Session->read('Locale.id');
					  $this->Pagelocale->create();
					  $this->Pagelocale->save($data['Pagelocale']);
					  if(isset($this->data['Code']) && count($this->data['Code'])>0){
                       
						 foreach($this->data['Code'] as $c){
							 if($c!=$this->Session->read('Siteadminlang.id')){
								  $data['Pagelocale']['title']=$title[$c];
								  $data['Pagelocale']['content']=$content[$c];;
								  $data['Pagelocale']['page_id']=$id;
								  $data['Pagelocale']['locale_id']=$c;
								   $this->Pagelocale->create();
								   $this->Pagelocale->save($data['Pagelocale']);
							}
						 }
					  }
					   $this->Session->setFlash('Page information has been saved successfully');
					   $this->redirect('/admin/pages/index/');
					  }else{
						  $this->Session->setFlash('Some error has been occured. Please try again later.');
					     $this->redirect('/admin/pages/index/');
					  }
					

                
				} else {
					$this->Page->invalidFields();
				}
			} else {
				$data = $this->Page->find('first',array('conditions'=>array('Page.id'=>$id)));
				//pr($data);
				if(is_array($data) && count($data) > 0){
					$find_content = $this->Pagelocale->find('first',array('conditions'=>array('Pagelocale.page_id'=>$data['Page']['id'],'Pagelocale.locale_id'=>4)));
					if(!empty($find_content))
					{
						$this->data['Page']['title1'] = $find_content['Pagelocale']['title'];
						$this->data['Page']['content1'] = $find_content['Pagelocale']['content'];
						$this->data = $data;
					}
				} else {
					$this->Session->setFlash('Invalid page id');
					$this->redirect('/admin/pages/index/');
				}
			}
		} else {
			// set message
			$this->Session->setFlash('Invalid page id.','flash_failure');
			// redirect to same page
			$this->redirect('/admin/pages/index/');
		}

		$locales = $this->Siteadminlang->find('all',array('conditions' => array('status' => 1)));
	    $this->set('locales', $locales);

		

		$this->set_breadcrumb('');
		$this->set('breadcrumbs', array_reverse($this->breadcrumb,true));
	}

function getDefaultlocale(){
		$locale=$this->Siteadminlang->find('first',array('conditions'=>array('Siteadminlang.default'=>1)));
		if(isset($locale) && count($locale)>0){
			return $locale['Siteadminlang']['id'];
		}
	}
	function update_mode($data, $mode){
		switch($mode){
			case 'activate':
				$countRecords = count($data);
				for($ctr=0;$ctr<$countRecords;$ctr++){
					if($data[$ctr]){
						$this->Page->id = $data[$ctr];
						$this->Page->saveField('status', '1');
					}
				}
				// set message
				$this->Session->setFlash('Page(s) have been activated','flash_success');
				break;
			case 'deactivate':
				$countRecords = count($data);
				for($ctr=0;$ctr<$countRecords;$ctr++){
					if($data[$ctr]){
						$this->Page->id = $data[$ctr];
						$this->Page->saveField('status', '0');
					}
				}
				// set message
				$this->Session->setFlash('Page(s) have been deactivated','flash_success');
				break;
			case 'delete':
				$countRecords = count($data);
				for($ctr=0;$ctr<$countRecords;$ctr++){
					if($data[$ctr]){
						// check for system page, can not delete system page
						$page = $this->Page->find(array('Page.id'=>$data[$ctr]));
						if(is_array($page) && count($page) > 0){
							if($page['Page']['type'] != 'system'){
								$this->Page->delete($data[$ctr]);
							}
						}
					}
				}
				// set message
				$this->Session->setFlash('Page(s) have been deleted','flash_success');
				break;
			break;
		}
	}

	//function called recursively for getting parent category detail in breadcrumb
	function set_breadcrumb($parent_id) {
		/*if(isset($parent_id) && trim($parent_id)!='') {
			$parentIdDetail = $this->Page->find('first',array('fields'=>array('Page.*'),'conditions'=>array('Page.id' => $parent_id)));
			$this->breadcrumb[$parentIdDetail['Page']['id']] = $parentIdDetail['Page']['title'];
			if(isset($parentIdDetail['Page']['parent_id']) && trim($parentIdDetail['Page']['parent_id'])!='') {
				$this->set_breadcrumb($parentIdDetail['Page']['parent_id']);
			}
		}	*/
	}

	

	

	

	function terms()
	{
		$this->set('title_for_layout',__('PAGE_TITLE_TERMS',true));
		$terms = $this->Pagelocale->find('all',array('conditions'=>array('Pagelocale.page_id'=>8,'Pagelocale.locale_id'=>$this->Session->read('Siteadminlang.id'))));
		$this->set('data',$terms);
	}

	function aboutus()
	{
		$this->set('title_for_layout',__('PAGE_TITLE_ABOUT',true));

		//echo "<pre>"; print_r($this->Session->read('Siteadminlang.id')); exit;

		$about = $this->Pagelocale->find('all',array('conditions'=>array('Pagelocale.page_id'=>1,'Pagelocale.locale_id'=>$this->Session->read('Siteadminlang.id'))));
		$this->set('data',$about);
	}

	function video()
	{
		$this->set('title_for_layout',__('PAGE_TITLE_VIDEO',true));
		$video = $this->Pagelocale->find('all',array('conditions'=>array('Pagelocale.page_id'=>3,'Pagelocale.locale_id'=>$this->Session->read('Siteadminlang.id'))));
		$this->set('data',$video);
	}

	function presentation()
	{
		$this->set('title_for_layout',__('PAGE_TITLE_PRESENTATION',true));
		$presentation = $this->Pagelocale->find('all',array('conditions'=>array('Pagelocale.page_id'=>4,'Pagelocale.locale_id'=>$this->Session->read('Siteadminlang.id'))));
		$this->set('data',$presentation);
	}

	function gallery()
	{
		$this->set('title_for_layout',__('PAGE_TITLE_GALLERY',true));
		$gallery = $this->Pagelocale->find('all',array('conditions'=>array('Pagelocale.page_id'=>5,'Pagelocale.locale_id'=>$this->Session->read('Siteadminlang.id'))));
		$this->set('data',$gallery);
	}
	
	function company_overview()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Company Overview');
		$data = $this->Pagelocale->find('first',array('conditions'=>array('Pagelocale.page_id'=>21),'order'=>array('Pagelocale.locale_id ASC')));
		//echo "<pre>"; print_r($data); exit;
		$this->set('data',$data);
	}
	
	function business_partner()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Business Partner');
		$data = $this->Pagelocale->find('first',array('conditions'=>array('Pagelocale.page_id'=>32),'order'=>array('Pagelocale.locale_id ASC')));
		//echo "<pre>"; print_r($data); exit;
		$this->set('data',$data);
	}
	
	function testimonials()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Testimonials');
		$data = $this->Pagelocale->find('first',array('conditions'=>array('Pagelocale.page_id'=>33),'order'=>array('Pagelocale.locale_id ASC')));
		//echo "<pre>"; print_r($data); exit;
		$this->set('data',$data);
	}		function our_clients()	{		$this->layout='tests';	}		
	function vision_mission()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Company Vision & Mission');
		$data = $this->Pagelocale->find('first',array('conditions'=>array('Pagelocale.page_id'=>24),'order'=>array('Pagelocale.locale_id ASC')));
		$this->set('data',$data);
	}
	
	function why_us()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Why Us');
		$data = $this->Pagelocale->find('first',array('conditions'=>array('Pagelocale.page_id'=>22),'order'=>array('Pagelocale.locale_id ASC')));
		$this->set('data',$data);
	}
	
	function contact()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Blood test lab , Pathology lab, Noida, Indirapuram, Crossings Republic, Niramaya Health care');
		$this->set('page_description','Niramaya Health care has some branches for  Blood test lab &  Pathology lab in Noida, Indirapuram and Crossings Republic to serve you better and provide you quick lab test results.');
		//$this->set('page_keyword','Niramaya Health care has some branches for  Blood test lab &  Pathology lab in Noida, Indirapuram and Crossings Republic to serve you better and provide you quick lab test results.');
		$this->set('page_keyword','Pathology lab in Crossings Republik, Blood test lab in Noida, Blood Test Lab in Indirapuram, Pathology lab in Noida, Pathology lab in Indirapuram.');
		$data = $this->Pagelocale->find('first',array('conditions'=>array('Pagelocale.page_id'=>29),'order'=>array('Pagelocale.locale_id ASC')));
		$this->set('data',$data);
	}
	
	function privacy()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Privacy');
		$data = $this->Pagelocale->find('first',array('conditions'=>array('Pagelocale.page_id'=>25),'order'=>array('Pagelocale.locale_id ASC')));
		$this->set('data',$data);
	}
	
	function quality_policy()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Quality Policy');
		$data = $this->Pagelocale->find('first',array('conditions'=>array('Pagelocale.page_id'=>26),'order'=>array('Pagelocale.locale_id ASC')));
		$this->set('data',$data);
	}
	
	
	function terms_refunds()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Terms Refunds');
		$data = $this->Pagelocale->find('first',array('conditions'=>array('Pagelocale.page_id'=>31),'order'=>array('Pagelocale.locale_id ASC')));
		$this->set('data',$data);
	}
	
	function sitemap()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Sitemap');
		$data = $this->Pagelocale->find('first',array('conditions'=>array('Pagelocale.page_id'=>27),'order'=>array('Pagelocale.locale_id ASC')));
		$this->set('data',$data);
	}
	
	function faq()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Lab Test booking at Niramaya, FAQ- Niramaya Healthcare');
		$this->set('page_description','want to know more about lab test booking ? At Niramaya we provide the FAQ , where you can know more about out lab test process, packages and programs.');
		$this->set('page_keyword','Lab Test booking, Faq, niramaya healthcare');
		$data = $this->Pagelocale->find('all',array('conditions'=>array('Pagelocale.page_id'=>6),'order'=>array('Pagelocale.locale_id ASC')));
		$this->set('data',$data);
	}
	
	function terms_of_service()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Faq');
		$data = $this->Pagelocale->find('first',array('conditions'=>array('Pagelocale.page_id'=>28),'order'=>array('Pagelocale.locale_id ASC')));
		$this->set('data',$data);
	}
	
	function management_team()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Management Team');
	}
	
	function career()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Career');
		$data = $this->Pagelocale->find('first',array('conditions'=>array('Pagelocale.page_id'=>23),'order'=>array('Pagelocale.locale_id ASC')));
		$this->set('data',$data);
	}
	
	function our_testimonial()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Our Testimonials');
		$data = $this->Pagelocale->find('first',array('conditions'=>array('Pagelocale.page_id'=>30)));
		$this->set('data',$data);
	}
	
	function buy_home_blood_sample_collection()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Home Blood Sample Collection in Delhi, Gurgaon, Noida, Ghaziabad, Niramaya Healthcare – NABL Test Lab');
		$this->set('page_description','Niramaya health care offers Home Blood Sample collection to provide you better and fast lab test results. To know more call us @ 09555009009');
		$this->set('page_keyword','Home Blood Sample collection, Sample collection for lab test, blood test collection');
	}
	
	function forg_pass()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Forgot Password');
		if(!empty($this->data))
		{
			$find_user = $this->User->find('first',array('conditions'=>array('User.email'=>$this->data['User']['email'],'User.contact'=>$this->data['User']['phone'])));
			if(!empty($find_user))
			{
				$new_pass = mt_rand();
				$this->set('user_pass',$new_pass);
				$this->Email->to = $find_user['User']['email'];
				//$this->Email->bcc = array('agrawalrohit3010@gmail.com');
				//$this->Email->cc = array('anjalisharmadelhi87@gmail.com');
				$this->Email->subject = 'Login Details from '.WEBSITE_TITLE;
				//$this->Email->replyTo = 'support@example.com';
				$this->Email->from = WEBSITE_ADMINISTRATOR_EMAIL;
				$this->Email->template = 'forg_pass';
				
				$this->Email->sendAs = 'both'; 
				if($this->Email->send())
				{
					$update_user_entry = $this->User->updateAll(array('User.passwd'=>$new_pass),array('User.id'=>$find_user['User']['id']));
					$this->set('alert_mess','Your new password has been sent on your registered emailid');
				}		
			}
		}
	}
	
	function login($get_param=NULL)
	{
		if(empty($get_param))
		{
			if(!empty($this->data))
			{
				$find_user = $this->User->find('first',array('conditions'=>array('User.contact'=>$this->data['Login']['username'],'User.otp'=>$this->data['Login']['pass'])));
				if(!empty($find_user))
				{
					$this->Session->write('UserDetail',$find_user);
					$cart_test = $this->Session->read('session_test');
					
					if(!empty($cart_test))
					{
						$this->redirect('/tests/make_payment');
					}
					
					if(empty($cart_test))
					{
						$this->redirect('/tests/payment_history');
					}
				}
				else
				{
					$this->redirect('/testds/login');
				}
			}
		}
		else
		{
			if(!empty($get_param))
			{
				$find_user = $this->User->find('first',array('conditions'=>array('User.id'=>$get_param)));
				if(!empty($find_user))
				{
					$this->Session->write('UserDetail',$find_user);
					$cart_test = $this->Session->read('session_test');
					if(!empty($cart_test))
					{
						$this->redirect('/tests/make_payment');
					}
					if(empty($cart_test))
					{
						$this->redirect('/tests/payment_history');
					}
				}
			}
		}
	}
	
	function entry()
	{
		$find_entry = $this->Health->find('all',array('conditions'=>array('Health.s_date'=>'0000-00-00')));
		echo "<pre>"; print_r($find_entry);
		die('finish');
	}
	
	
	
	function login_page($doc_id=NULL,$name=NULL,$speciality=NULL,$state=NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Login Page');
		if(!empty($doc_id) && $doc_id != 'find_doctor')
		{
			$this->set('doc_id',$doc_id);
		}
		if(!empty($doc_id) && $doc_id == 'find_doctor')
		{
			$this->set('doc_id',$doc_id);
			$this->set('search_name',$name);
			$this->set('search_speciality',$speciality);
			$this->set('search_state',$state);
		}
	}
	
	function login_report()
	{
		if(!empty($this->data))
		{
			$find_order_id = $this->Billing->find('first',array('conditions'=>array('Billing.order_id'=>$this->data['ViewReport']['password'])));
			
			if(!empty($find_order_id))
			{
				$find_user = $this->User->find('first',array('conditions'=>array('User.id'=>$find_order_id['Billing']['user_id'],'User.contact'=>trim($this->data['ViewReport']['username']))));
				if(!empty($find_user))
				{
					$this->Session->write('UserDetail',$find_user);
					$this->redirect('/tests/payment_history');
				}
				else
				{
					$this->Session->setFlash('The Mobile No. does not exist.','flash_failure');
					//$this->redirect('/pages/report_login_page');
					$this->redirect('/testds/viewreport');
				}
			}
			else
			{
				$this->Session->setFlash('The Request No. does not exist.','flash_failure');
				//$this->redirect('/pages/report_login_page');
				$this->redirect('/testds/viewreport');
			}
		}
	}
	
	function report_login_page()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Login Page');
	}
	
	function download_pdf()
	{
		header('Content-Type: application/pdf');
    	header('Content-disposition: attachment;filename=profile.pdf');
    	readfile(SITE_URL.'files/company/niramaya-company-profile-2.pdf');
		exit;
	}
	
	function become_doctor($docid=NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Become Doctor');
		if(!empty($this->data))
		{
			if(($this->data['Doctor']['password'] == $this->data['Doctor']['cnf_pass']) && !empty($this->data['Doctor']['password']))
			{
				//echo "<pre>"; print_r($this->data); exit;
				$get_last_insert_id_unique = $this->Doctor->find('first',array('order'=>array('Doctor.id DESC'),'limit'=>1));
				if(empty($get_last_insert_id_unique))
				{
					$this->data['Doctor']['unique_id'] = '1000';
				}
				else
				{
					$this->data['Doctor']['unique_id'] = ($get_last_insert_id_unique['Doctor']['unique_id'] + 1);
				}
				$file = $this->File->uploadFile($this->data['Doctor']['photo'], DOCTOR_IMAGE_STORE_PATH, true,array('jpg','gif','jpeg','png','JPG','GIF','JPEG','PNG','bmp','BMP'));
				
				$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
				$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_WIDTH);
				$this->Image->save(DOCTOR_IMAGE_THUMB_PATH.$file['name']);
				
				$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
				$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_MEDIUM_WIDTH);
				$this->Image->save(DOCTOR_IMAGE_MEDIUM_PATH.$file['name']);
				
				$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
				$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_SMALL_WIDTH);
				$this->Image->save(DOCTOR_IMAGE_SMALL_PATH.$file['name']);
				
				$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
				$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_VERYSMALL_WIDTH);
				$this->Image->save(DOCTOR_IMAGE_VERYSMALL_PATH.$file['name']);
				
				$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
				$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_BIGSMALL_WIDTH);
				$this->Image->save(DOCTOR_IMAGE_BIGSMALL_PATH.$file['name']);
				
				$this->data['Doctor']['image'] = $file['name'];
				
				$this->data['Doctor']['dob'] = $this->data['Doctor']['day'].'-'.$this->data['Doctor']['month'].'-'.$this->data['Doctor']['year'];
				if(!empty($this->data['Doctor']['address1']) && empty($this->data['Doctor']['address2']))
				{
					$this->data['Doctor']['address'] = $this->data['Doctor']['address1'];
				}
				if(!empty($this->data['Doctor']['address1']) && !empty($this->data['Doctor']['address2']))
				{
					$this->data['Doctor']['address'] = $this->data['Doctor']['address1'].'*'.$this->data['Doctor']['address2'];
				}
				if(empty($this->data['Doctor']['home_fee']))
				{
					$this->data['Doctor']['home_fee'] = 0;
				}
				$real_pass = $this->data['Doctor']['password'];
				$this->data['Doctor']['created'] = date('Y-m-d H:i:s');
				$this->data['Doctor']['status'] = 0;
				$this->data['Doctor']['email_confirm'] = 0;
				$this->data['Doctor']['featured'] = 0;
				$this->data['Doctor']['admin_featured'] = 0;
				$this->data['Doctor']['password'] = md5($this->data['Doctor']['password']);
				
				if($this->Doctor->create($this->data))
				{
					if($this->Doctor->save($this->data))
					{
						$last_id = $this->Doctor->getLastInsertId();
						$this->redirect('/pages/become_doctor_2/'.base64_encode($last_id).'/'.base64_encode($real_pass));
					}
				}
				
			}
			else
			{
				$this->set('DoctorDetail',$this->data);
				$this->set('messg','Your password and confirm password did not match');			
			}
		}
		else
		{
			$dec_doc_id = base64_decode($docid);
			$get_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$dec_doc_id)));
			$this->data = $get_detail;
		}
		$state = $this->State->find('all',array('conditions'=>array('State.status'=>1)));
		$this->set('state',$state);
	}
	
	function become_doctor_2($last_id = NULL,$real_pass = NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Become Doctor');
		$dec_last_id = base64_decode($last_id);
		if(!empty($this->data))
		{
			if(count($this->data['Doctor']['specialization']) > 5)
			{
				$this->set('DoctorDetail',$this->data);
				$this->set('messg','You can select maximum 5 specializations only');
			}
			else
			{
				if(count($this->data['Doctor']['specialization']) == 0)
				{
					$this->set('DoctorDetail',$this->data);
					$this->set('messg','Please select atleast 1 Speciality');
				}
				else
				{
					$this->data['Doctor']['specialization'] = implode(',',$this->data['Doctor']['specialization']);
					if($this->Doctor->create($this->data))
					{
						if($this->Doctor->save($this->data))
						{
							$this->redirect('/pages/become_doctor_3/'.base64_encode($this->data['Doctor']['id']).'/'.$real_pass);
						}
					}
				}
			}
		}
		else
		{
			$dec_doc_id = base64_decode($last_id);
			$get_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$dec_doc_id)));
			$explode_spec = explode(',',$get_detail['Doctor']['specialization']);
			$get_detail['Doctor']['specialization_set'] = $explode_spec;
			$this->data = $get_detail;
			//echo "<pre>"; print_r($this->data); exit;
		}
		$specialization = $this->Specialization->find('all',array('conditions'=>array('Specialization.status'=>1),'order'=>array('Specialization.drop_down_name ASC')));
		$this->set('specialization',$specialization);
		$this->set('last_id',$last_id);
		$this->set('real_pass',$real_pass);
	}
	
	function become_doctor_3($last_id = NULL,$real_pass = NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Become Doctor');
		$dec_last_id = base64_decode($last_id);
		if(!empty($this->data))
		{
			if($this->data['DoctorClinic']['city_name_new'] != '')
			{
				$check_duplicate_city = $this->StateCity->find('first',array('conditions'=>array('StateCity.city_name'=>$this->data['DoctorClinic']['city_name_new'])));
				if(empty($check_duplicate_city))
				{
					$this->data['StateCity']['state_id'] = $this->data['DoctorClinic']['state'];
					$this->data['StateCity']['city_name'] = $this->data['DoctorClinic']['city_name_new'];
					$this->data['StateCity']['status'] = 1;
					if($this->StateCity->create($this->data))
					{
						if($this->StateCity->save($this->data))
						{
							$get_last_insert_id_statecity = $this->StateCity->getLastInsertId();
							$this->data['DoctorClinic']['city'] = $get_last_insert_id_statecity;
						}
					}
				}
				else
				{
					$this->data['DoctorClinic']['city'] = $check_duplicate_city['StateCity']['id'];
				}
			}
			$get_doc_special = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$this->data['DoctorClinic']['doctor_id'])));
			$this->data['DoctorClinic']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
			$this->data['DoctorClinic']['special'] = $get_doc_special['Doctor']['specialization'];
			$this->data['DoctorClinic']['featured'] = 0;
			$this->data['DoctorClinic']['verify'] = 0;
			$this->data['DoctorClinic']['cons_fee'] = $get_doc_special['Doctor']['cons_fee'];
			$this->data['DoctorClinic']['clinic_name'] = $this->data['DoctorClinic']['clinic_name'];
			if(!empty($this->data['DoctorClinic']['address1']) && empty($this->data['DoctorClinic']['address2']))
			{
				$this->data['DoctorClinic']['clinic_address'] = $this->data['DoctorClinic']['address1'];
			}
			if(!empty($this->data['DoctorClinic']['address1']) && !empty($this->data['DoctorClinic']['address2']))
			{
				$this->data['DoctorClinic']['clinic_address'] = $this->data['DoctorClinic']['address1'].'*'.$this->data['DoctorClinic']['address2'];
			}
			$this->data['DoctorClinic']['status'] = 1;
			$this->data['DoctorClinic']['created'] = date('Y-m-d H:i:s');
			if($this->DoctorClinic->create($this->data))
			{
				if($this->DoctorClinic->save($this->data))
				{
					
					$last_insert_id = $this->DoctorClinic->getLastInsertId();
					for($i=1;$i<=189;$i++)
					{
						if($i <= 27)
						{
							$this->data['ClinicTime']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
							$this->data['ClinicTime']['clinic_id'] = $last_insert_id;
							$this->data['ClinicTime']['day'] = 1;
							if(($i > 0) && ($i <= 6))
							{
								$this->data['ClinicTime']['day_slot'] = 1;
							}
							if(($i > 6) && ($i <= 15))
							{
								$this->data['ClinicTime']['day_slot'] = 2;
							}
							if(($i > 15) && ($i <= 22))
							{
								$this->data['ClinicTime']['day_slot'] = 3;
							}
							if(($i > 22) && ($i <= 27))
							{
								$this->data['ClinicTime']['day_slot'] = 4;
							}
							
							if($this->data['DoctorClinic']['val_'.$i] != '')
							{
								$this->data['ClinicTime']['time_slot'] = $this->data['DoctorClinic']['val_'.$i];
								$this->data['ClinicTime']['doctor_choose'] = 1;
								$this->data['ClinicTime']['availability'] = 1;
								$this->data['ClinicTime']['user_book'] = 0;
								$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
								$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
							}
							else
							{
								if($i == 1)
								{
									$this->data['ClinicTime']['time_slot'] = '09:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;	
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 2)
								{
									$this->data['ClinicTime']['time_slot'] = '09:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 3)
								{
									$this->data['ClinicTime']['time_slot'] = '10:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 4)
								{
									$this->data['ClinicTime']['time_slot'] = '10:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 5)
								{
									$this->data['ClinicTime']['time_slot'] = '11:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 6)
								{
									$this->data['ClinicTime']['time_slot'] = '11:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 7)
								{
									$this->data['ClinicTime']['time_slot'] = '12:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 8)
								{
									$this->data['ClinicTime']['time_slot'] = '12:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 9)
								{
									$this->data['ClinicTime']['time_slot'] = '01:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 10)
								{
									$this->data['ClinicTime']['time_slot'] = '01:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 11)
								{
									$this->data['ClinicTime']['time_slot'] = '02:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 12)
								{
									$this->data['ClinicTime']['time_slot'] = '02:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 13)
								{
									$this->data['ClinicTime']['time_slot'] = '03:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 14)
								{
									$this->data['ClinicTime']['time_slot'] = '03:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 15)
								{
									$this->data['ClinicTime']['time_slot'] = '04:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 16)
								{
									$this->data['ClinicTime']['time_slot'] = '04:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 17)
								{
									$this->data['ClinicTime']['time_slot'] = '05:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 18)
								{
									$this->data['ClinicTime']['time_slot'] = '05:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 19)
								{
									$this->data['ClinicTime']['time_slot'] = '06:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 20)
								{
									$this->data['ClinicTime']['time_slot'] = '06:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 21)
								{
									$this->data['ClinicTime']['time_slot'] = '07:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 22)
								{
									$this->data['ClinicTime']['time_slot'] = '07:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 23)
								{
									$this->data['ClinicTime']['time_slot'] = '08:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 24)
								{
									$this->data['ClinicTime']['time_slot'] = '08:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 25)
								{
									$this->data['ClinicTime']['time_slot'] = '09:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 26)
								{
									$this->data['ClinicTime']['time_slot'] = '09:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 27)
								{
									$this->data['ClinicTime']['time_slot'] = '10:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
							}
							if($this->ClinicTime->create($this->data))
							{
								$this->ClinicTime->save($this->data);
							}
						}
						if(($i > 27) && ($i <= 54))
						{
							$this->data['ClinicTime']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
							$this->data['ClinicTime']['clinic_id'] = $last_insert_id;
							$this->data['ClinicTime']['day'] = 2;
							if(($i > 27) && ($i <= 33))
							{
								$this->data['ClinicTime']['day_slot'] = 1;
							}
							if(($i > 33) && ($i <= 42))
							{
								$this->data['ClinicTime']['day_slot'] = 2;
							}
							if(($i > 42) && ($i <= 49))
							{
								$this->data['ClinicTime']['day_slot'] = 3;
							}
							if(($i > 49) && ($i <= 54))
							{
								$this->data['ClinicTime']['day_slot'] = 4;
							}
							
							if($this->data['DoctorClinic']['val_'.$i] != '')
							{
								$this->data['ClinicTime']['time_slot'] = $this->data['DoctorClinic']['val_'.$i];
								$this->data['ClinicTime']['doctor_choose'] = 1;
								$this->data['ClinicTime']['availability'] = 1;
								$this->data['ClinicTime']['user_book'] = 0;
								$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
								$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
							}
							else
							{
								if($i == 28)
								{
									$this->data['ClinicTime']['time_slot'] = '09:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;	
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 29)
								{
									$this->data['ClinicTime']['time_slot'] = '09:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 30)
								{
									$this->data['ClinicTime']['time_slot'] = '10:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 31)
								{
									$this->data['ClinicTime']['time_slot'] = '10:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 32)
								{
									$this->data['ClinicTime']['time_slot'] = '11:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 33)
								{
									$this->data['ClinicTime']['time_slot'] = '11:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 34)
								{
									$this->data['ClinicTime']['time_slot'] = '12:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 35)
								{
									$this->data['ClinicTime']['time_slot'] = '12:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 36)
								{
									$this->data['ClinicTime']['time_slot'] = '01:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 37)
								{
									$this->data['ClinicTime']['time_slot'] = '01:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 38)
								{
									$this->data['ClinicTime']['time_slot'] = '02:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 39)
								{
									$this->data['ClinicTime']['time_slot'] = '02:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 40)
								{
									$this->data['ClinicTime']['time_slot'] = '03:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 41)
								{
									$this->data['ClinicTime']['time_slot'] = '03:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 42)
								{
									$this->data['ClinicTime']['time_slot'] = '04:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 43)
								{
									$this->data['ClinicTime']['time_slot'] = '04:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 44)
								{
									$this->data['ClinicTime']['time_slot'] = '05:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 45)
								{
									$this->data['ClinicTime']['time_slot'] = '05:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 46)
								{
									$this->data['ClinicTime']['time_slot'] = '06:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 47)
								{
									$this->data['ClinicTime']['time_slot'] = '06:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 48)
								{
									$this->data['ClinicTime']['time_slot'] = '07:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 49)
								{
									$this->data['ClinicTime']['time_slot'] = '07:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 50)
								{
									$this->data['ClinicTime']['time_slot'] = '08:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 51)
								{
									$this->data['ClinicTime']['time_slot'] = '08:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 52)
								{
									$this->data['ClinicTime']['time_slot'] = '09:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 53)
								{
									$this->data['ClinicTime']['time_slot'] = '09:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 54)
								{
									$this->data['ClinicTime']['time_slot'] = '10:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
							}
							if($this->ClinicTime->create($this->data))
							{
								$this->ClinicTime->save($this->data);
							}
						}
						if(($i > 54) && ($i <= 81))
						{
							$this->data['ClinicTime']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
							$this->data['ClinicTime']['clinic_id'] = $last_insert_id;
							$this->data['ClinicTime']['day'] = 3;
							if(($i > 54) && ($i <= 60))
							{
								$this->data['ClinicTime']['day_slot'] = 1;
							}
							if(($i > 60) && ($i <= 69))
							{
								$this->data['ClinicTime']['day_slot'] = 2;
							}
							if(($i > 69) && ($i <= 76))
							{
								$this->data['ClinicTime']['day_slot'] = 3;
							}
							if(($i > 76) && ($i <= 81))
							{
								$this->data['ClinicTime']['day_slot'] = 4;
							}
							
							if($this->data['DoctorClinic']['val_'.$i] != '')
							{
								$this->data['ClinicTime']['time_slot'] = $this->data['DoctorClinic']['val_'.$i];
								$this->data['ClinicTime']['doctor_choose'] = 1;
								$this->data['ClinicTime']['availability'] = 1;
								$this->data['ClinicTime']['user_book'] = 0;
								$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
								$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
							}
							else
							{
								if($i == 55)
								{
									$this->data['ClinicTime']['time_slot'] = '09:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;	
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 56)
								{
									$this->data['ClinicTime']['time_slot'] = '09:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 57)
								{
									$this->data['ClinicTime']['time_slot'] = '10:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 58)
								{
									$this->data['ClinicTime']['time_slot'] = '10:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 59)
								{
									$this->data['ClinicTime']['time_slot'] = '11:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 60)
								{
									$this->data['ClinicTime']['time_slot'] = '11:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 61)
								{
									$this->data['ClinicTime']['time_slot'] = '12:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 62)
								{
									$this->data['ClinicTime']['time_slot'] = '12:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 63)
								{
									$this->data['ClinicTime']['time_slot'] = '01:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 64)
								{
									$this->data['ClinicTime']['time_slot'] = '01:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 65)
								{
									$this->data['ClinicTime']['time_slot'] = '02:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 66)
								{
									$this->data['ClinicTime']['time_slot'] = '02:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 67)
								{
									$this->data['ClinicTime']['time_slot'] = '03:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 68)
								{
									$this->data['ClinicTime']['time_slot'] = '03:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 69)
								{
									$this->data['ClinicTime']['time_slot'] = '04:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 70)
								{
									$this->data['ClinicTime']['time_slot'] = '04:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 71)
								{
									$this->data['ClinicTime']['time_slot'] = '05:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 72)
								{
									$this->data['ClinicTime']['time_slot'] = '05:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 73)
								{
									$this->data['ClinicTime']['time_slot'] = '06:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 74)
								{
									$this->data['ClinicTime']['time_slot'] = '06:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 75)
								{
									$this->data['ClinicTime']['time_slot'] = '07:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 76)
								{
									$this->data['ClinicTime']['time_slot'] = '07:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 77)
								{
									$this->data['ClinicTime']['time_slot'] = '08:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 78)
								{
									$this->data['ClinicTime']['time_slot'] = '08:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 79)
								{
									$this->data['ClinicTime']['time_slot'] = '09:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 80)
								{
									$this->data['ClinicTime']['time_slot'] = '09:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 81)
								{
									$this->data['ClinicTime']['time_slot'] = '10:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
							}
							if($this->ClinicTime->create($this->data))
							{
								$this->ClinicTime->save($this->data);
							}
						}
						if(($i > 81) && ($i <= 108))
						{
							$this->data['ClinicTime']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
							$this->data['ClinicTime']['clinic_id'] = $last_insert_id;
							$this->data['ClinicTime']['day'] = 4;
							if(($i > 81) && ($i <= 87))
							{
								$this->data['ClinicTime']['day_slot'] = 1;
							}
							if(($i > 87) && ($i <= 96))
							{
								$this->data['ClinicTime']['day_slot'] = 2;
							}
							if(($i > 96) && ($i <= 103))
							{
								$this->data['ClinicTime']['day_slot'] = 3;
							}
							if(($i > 103) && ($i <= 108))
							{
								$this->data['ClinicTime']['day_slot'] = 4;
							}
							
							if($this->data['DoctorClinic']['val_'.$i] != '')
							{
								$this->data['ClinicTime']['time_slot'] = $this->data['DoctorClinic']['val_'.$i];
								$this->data['ClinicTime']['doctor_choose'] = 1;
								$this->data['ClinicTime']['availability'] = 1;
								$this->data['ClinicTime']['user_book'] = 0;
								$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
								$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
							}
							else
							{
								if($i == 82)
								{
									$this->data['ClinicTime']['time_slot'] = '09:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;	
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 83)
								{
									$this->data['ClinicTime']['time_slot'] = '09:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 84)
								{
									$this->data['ClinicTime']['time_slot'] = '10:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 85)
								{
									$this->data['ClinicTime']['time_slot'] = '10:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 86)
								{
									$this->data['ClinicTime']['time_slot'] = '11:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 87)
								{
									$this->data['ClinicTime']['time_slot'] = '11:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 88)
								{
									$this->data['ClinicTime']['time_slot'] = '12:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 89)
								{
									$this->data['ClinicTime']['time_slot'] = '12:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 90)
								{
									$this->data['ClinicTime']['time_slot'] = '01:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 91)
								{
									$this->data['ClinicTime']['time_slot'] = '01:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 92)
								{
									$this->data['ClinicTime']['time_slot'] = '02:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 93)
								{
									$this->data['ClinicTime']['time_slot'] = '02:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 94)
								{
									$this->data['ClinicTime']['time_slot'] = '03:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 95)
								{
									$this->data['ClinicTime']['time_slot'] = '03:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 96)
								{
									$this->data['ClinicTime']['time_slot'] = '04:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 97)
								{
									$this->data['ClinicTime']['time_slot'] = '04:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 98)
								{
									$this->data['ClinicTime']['time_slot'] = '05:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 99)
								{
									$this->data['ClinicTime']['time_slot'] = '05:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 100)
								{
									$this->data['ClinicTime']['time_slot'] = '06:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 101)
								{
									$this->data['ClinicTime']['time_slot'] = '06:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 102)
								{
									$this->data['ClinicTime']['time_slot'] = '07:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 103)
								{
									$this->data['ClinicTime']['time_slot'] = '07:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 104)
								{
									$this->data['ClinicTime']['time_slot'] = '08:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 105)
								{
									$this->data['ClinicTime']['time_slot'] = '08:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 106)
								{
									$this->data['ClinicTime']['time_slot'] = '09:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 107)
								{
									$this->data['ClinicTime']['time_slot'] = '09:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 108)
								{
									$this->data['ClinicTime']['time_slot'] = '10:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
							}
							if($this->ClinicTime->create($this->data))
							{
								$this->ClinicTime->save($this->data);
							}
						}
						if(($i > 108) && ($i <= 135))
						{
							$this->data['ClinicTime']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
							$this->data['ClinicTime']['clinic_id'] = $last_insert_id;
							$this->data['ClinicTime']['day'] = 5;
							if(($i > 108) && ($i <= 114))
							{
								$this->data['ClinicTime']['day_slot'] = 1;
							}
							if(($i > 114) && ($i <= 123))
							{
								$this->data['ClinicTime']['day_slot'] = 2;
							}
							if(($i > 123) && ($i <= 130))
							{
								$this->data['ClinicTime']['day_slot'] = 3;
							}
							if(($i > 130) && ($i <= 135))
							{
								$this->data['ClinicTime']['day_slot'] = 4;
							}
							
							if($this->data['DoctorClinic']['val_'.$i] != '')
							{
								$this->data['ClinicTime']['time_slot'] = $this->data['DoctorClinic']['val_'.$i];
								$this->data['ClinicTime']['doctor_choose'] = 1;
								$this->data['ClinicTime']['availability'] = 1;
								$this->data['ClinicTime']['user_book'] = 0;
								$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
								$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
							}
							else
							{
								if($i == 109)
								{
									$this->data['ClinicTime']['time_slot'] = '09:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;	
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 110)
								{
									$this->data['ClinicTime']['time_slot'] = '09:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 111)
								{
									$this->data['ClinicTime']['time_slot'] = '10:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 112)
								{
									$this->data['ClinicTime']['time_slot'] = '10:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 113)
								{
									$this->data['ClinicTime']['time_slot'] = '11:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 114)
								{
									$this->data['ClinicTime']['time_slot'] = '11:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 115)
								{
									$this->data['ClinicTime']['time_slot'] = '12:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 116)
								{
									$this->data['ClinicTime']['time_slot'] = '12:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 117)
								{
									$this->data['ClinicTime']['time_slot'] = '01:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 118)
								{
									$this->data['ClinicTime']['time_slot'] = '01:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 119)
								{
									$this->data['ClinicTime']['time_slot'] = '02:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 120)
								{
									$this->data['ClinicTime']['time_slot'] = '02:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 121)
								{
									$this->data['ClinicTime']['time_slot'] = '03:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 122)
								{
									$this->data['ClinicTime']['time_slot'] = '03:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 123)
								{
									$this->data['ClinicTime']['time_slot'] = '04:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 124)
								{
									$this->data['ClinicTime']['time_slot'] = '04:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 125)
								{
									$this->data['ClinicTime']['time_slot'] = '05:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 126)
								{
									$this->data['ClinicTime']['time_slot'] = '05:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 127)
								{
									$this->data['ClinicTime']['time_slot'] = '06:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 128)
								{
									$this->data['ClinicTime']['time_slot'] = '06:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 129)
								{
									$this->data['ClinicTime']['time_slot'] = '07:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 130)
								{
									$this->data['ClinicTime']['time_slot'] = '07:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 131)
								{
									$this->data['ClinicTime']['time_slot'] = '08:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 132)
								{
									$this->data['ClinicTime']['time_slot'] = '08:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 133)
								{
									$this->data['ClinicTime']['time_slot'] = '09:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 134)
								{
									$this->data['ClinicTime']['time_slot'] = '09:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 135)
								{
									$this->data['ClinicTime']['time_slot'] = '10:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
							}
							if($this->ClinicTime->create($this->data))
							{
								$this->ClinicTime->save($this->data);
							}
						}
						if(($i > 135) && ($i <= 162))
						{
							$this->data['ClinicTime']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
							$this->data['ClinicTime']['clinic_id'] = $last_insert_id;
							$this->data['ClinicTime']['day'] = 6;
							if(($i > 135) && ($i <= 141))
							{
								$this->data['ClinicTime']['day_slot'] = 1;
							}
							if(($i > 141) && ($i <= 150))
							{
								$this->data['ClinicTime']['day_slot'] = 2;
							}
							if(($i > 150) && ($i <= 157))
							{
								$this->data['ClinicTime']['day_slot'] = 3;
							}
							if(($i > 157) && ($i <= 162))
							{
								$this->data['ClinicTime']['day_slot'] = 4;
							}
							
							if($this->data['DoctorClinic']['val_'.$i] != '')
							{
								$this->data['ClinicTime']['time_slot'] = $this->data['DoctorClinic']['val_'.$i];
								$this->data['ClinicTime']['doctor_choose'] = 1;
								$this->data['ClinicTime']['availability'] = 1;
								$this->data['ClinicTime']['user_book'] = 0;
								$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
								$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
							}
							else
							{
								if($i == 136)
								{
									$this->data['ClinicTime']['time_slot'] = '09:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;	
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 137)
								{
									$this->data['ClinicTime']['time_slot'] = '09:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 138)
								{
									$this->data['ClinicTime']['time_slot'] = '10:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 139)
								{
									$this->data['ClinicTime']['time_slot'] = '10:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 140)
								{
									$this->data['ClinicTime']['time_slot'] = '11:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 141)
								{
									$this->data['ClinicTime']['time_slot'] = '11:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 142)
								{
									$this->data['ClinicTime']['time_slot'] = '12:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 143)
								{
									$this->data['ClinicTime']['time_slot'] = '12:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 144)
								{
									$this->data['ClinicTime']['time_slot'] = '01:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 145)
								{
									$this->data['ClinicTime']['time_slot'] = '01:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 146)
								{
									$this->data['ClinicTime']['time_slot'] = '02:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 147)
								{
									$this->data['ClinicTime']['time_slot'] = '02:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 148)
								{
									$this->data['ClinicTime']['time_slot'] = '03:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 149)
								{
									$this->data['ClinicTime']['time_slot'] = '03:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 150)
								{
									$this->data['ClinicTime']['time_slot'] = '04:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 151)
								{
									$this->data['ClinicTime']['time_slot'] = '04:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 152)
								{
									$this->data['ClinicTime']['time_slot'] = '05:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 153)
								{
									$this->data['ClinicTime']['time_slot'] = '05:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 154)
								{
									$this->data['ClinicTime']['time_slot'] = '06:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 155)

								{
									$this->data['ClinicTime']['time_slot'] = '06:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 156)
								{
									$this->data['ClinicTime']['time_slot'] = '07:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 157)
								{
									$this->data['ClinicTime']['time_slot'] = '07:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 158)
								{
									$this->data['ClinicTime']['time_slot'] = '08:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 159)
								{
									$this->data['ClinicTime']['time_slot'] = '08:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 160)
								{
									$this->data['ClinicTime']['time_slot'] = '09:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 161)
								{
									$this->data['ClinicTime']['time_slot'] = '09:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 162)
								{
									$this->data['ClinicTime']['time_slot'] = '10:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
							}
							if($this->ClinicTime->create($this->data))
							{
								$this->ClinicTime->save($this->data);
							}
						}
						if(($i > 162) && ($i <= 189))
						{
							$this->data['ClinicTime']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
							$this->data['ClinicTime']['clinic_id'] = $last_insert_id;
							$this->data['ClinicTime']['day'] = 7;
							if(($i > 162) && ($i <= 168))
							{
								$this->data['ClinicTime']['day_slot'] = 1;
							}
							if(($i > 168) && ($i <= 177))
							{
								$this->data['ClinicTime']['day_slot'] = 2;
							}
							if(($i > 177) && ($i <= 184))
							{
								$this->data['ClinicTime']['day_slot'] = 3;
							}
							if(($i > 184) && ($i <= 189))
							{
								$this->data['ClinicTime']['day_slot'] = 4;
							}
							
							if($this->data['DoctorClinic']['val_'.$i] != '')
							{
								$this->data['ClinicTime']['time_slot'] = $this->data['DoctorClinic']['val_'.$i];
								$this->data['ClinicTime']['doctor_choose'] = 1;
								$this->data['ClinicTime']['availability'] = 1;
								$this->data['ClinicTime']['user_book'] = 0;
								$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
								$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
							}
							else
							{
								if($i == 163)
								{
									$this->data['ClinicTime']['time_slot'] = '09:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;	
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 164)
								{
									$this->data['ClinicTime']['time_slot'] = '09:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 165)
								{
									$this->data['ClinicTime']['time_slot'] = '10:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 166)
								{
									$this->data['ClinicTime']['time_slot'] = '10:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 167)
								{
									$this->data['ClinicTime']['time_slot'] = '11:00 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 168)
								{
									$this->data['ClinicTime']['time_slot'] = '11:30 AM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 169)
								{
									$this->data['ClinicTime']['time_slot'] = '12:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 170)
								{
									$this->data['ClinicTime']['time_slot'] = '12:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 171)
								{
									$this->data['ClinicTime']['time_slot'] = '01:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 172)
								{
									$this->data['ClinicTime']['time_slot'] = '01:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 173)
								{
									$this->data['ClinicTime']['time_slot'] = '02:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 174)
								{
									$this->data['ClinicTime']['time_slot'] = '02:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 175)
								{
									$this->data['ClinicTime']['time_slot'] = '03:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 176)
								{
									$this->data['ClinicTime']['time_slot'] = '03:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 177)
								{
									$this->data['ClinicTime']['time_slot'] = '04:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 178)
								{
									$this->data['ClinicTime']['time_slot'] = '04:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 179)
								{
									$this->data['ClinicTime']['time_slot'] = '05:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 180)
								{
									$this->data['ClinicTime']['time_slot'] = '05:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 181)
								{
									$this->data['ClinicTime']['time_slot'] = '06:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 182)
								{
									$this->data['ClinicTime']['time_slot'] = '06:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 183)
								{
									$this->data['ClinicTime']['time_slot'] = '07:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 184)
								{
									$this->data['ClinicTime']['time_slot'] = '07:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 185)
								{
									$this->data['ClinicTime']['time_slot'] = '08:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 186)
								{
									$this->data['ClinicTime']['time_slot'] = '08:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 187)
								{
									$this->data['ClinicTime']['time_slot'] = '09:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 188)
								{
									$this->data['ClinicTime']['time_slot'] = '09:30 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								if($i == 189)
								{
									$this->data['ClinicTime']['time_slot'] = '10:00 PM';
									$this->data['ClinicTime']['doctor_choose'] = 0;
									$this->data['ClinicTime']['availability'] = 0;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
							}
							if($this->ClinicTime->create($this->data))
							{
								$this->ClinicTime->save($this->data);
							}
						}
					}
					
					//Availability Period Starts
					$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$this->data['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$last_insert_id,'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$this->data['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$last_insert_id,'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$this->data['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$last_insert_id,'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$this->data['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$last_insert_id,'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$this->data['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$last_insert_id,'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$this->data['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$last_insert_id,'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$this->data['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$last_insert_id,'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					
					$avail_day_arr = array();
					if(!empty($get_mon_avail)){$avail_day_arr[] = 1;}
					if(!empty($get_tue_avail)){$avail_day_arr[] = 2;}
					if(!empty($get_wed_avail)){$avail_day_arr[] = 3;}
					if(!empty($get_thu_avail)){$avail_day_arr[] = 4;}
					if(!empty($get_fri_avail)){$avail_day_arr[] = 5;}
					if(!empty($get_sat_avail)){$avail_day_arr[] = 6;}
					if(!empty($get_sun_avail)){$avail_day_arr[] = 7;}
					
					$implode_day_avail = implode(',',$avail_day_arr);
					
					$update_clinic = $this->DoctorClinic->query("UPDATE doctor_clinic SET avail_day='$implode_day_avail' WHERE id='".$last_insert_id."'");
					//Avaliability Period Ends
					
					
					if($this->data['DoctorClinic']['add_more'] == 1)
					{
						if($this->data['DoctorClinic']['go_form'] == '')
						{
							$this->redirect('/pages/add_more_1/'.base64_encode($this->data['DoctorClinic']['doctor_id']).'/'.$real_pass);
						}
						if($this->data['DoctorClinic']['go_form'] == 2)
						{
							$this->redirect('/pages/add_more_2/'.base64_encode($this->data['DoctorClinic']['doctor_id']).'/'.$real_pass);
						}
						if($this->data['DoctorClinic']['go_form'] == 3)
						{
							$this->redirect('/pages/add_more_3/'.base64_encode($this->data['DoctorClinic']['doctor_id']).'/'.$real_pass);
						}
						if($this->data['DoctorClinic']['go_form'] == 4)
						{
							$this->redirect('/pages/add_more_4/'.base64_encode($this->data['DoctorClinic']['doctor_id']).'/'.$real_pass);
						}
					}
					else
					{
						$this->redirect('/pages/thankyou/'.base64_encode($this->data['DoctorClinic']['doctor_id']).'/'.$real_pass);
					}
				}
			}
		}
		$find_state = $this->State->find('all',array('conditions'=>array('State.status'=>1)));
		$this->set('state',$find_state);
		$this->set('real_pass',$real_pass);
		$this->set('last_id',$last_id);
	}
	
	function add_more_1($last_id = NULL,$real_pass = NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Become Doctor');
		$this->set('last_id',$last_id);
		$this->set('real_pass',$real_pass);
		$this->set('add_more','2');
		$find_state = $this->State->find('all',array('conditions'=>array('State.status'=>1)));
		$this->set('state',$find_state);
	}
	
	function add_more_2($last_id = NULL,$real_pass = NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Become Doctor');
		$this->set('last_id',$last_id);
		$this->set('real_pass',$real_pass);
		$this->set('add_more','3');
		$find_state = $this->State->find('all',array('conditions'=>array('State.status'=>1)));
		$this->set('state',$find_state);
	}
	
	function add_more_3($last_id = NULL,$real_pass = NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Become Doctor');
		$this->set('last_id',$last_id);
		$this->set('real_pass',$real_pass);
		$this->set('add_more','4');
		$find_state = $this->State->find('all',array('conditions'=>array('State.status'=>1)));
		$this->set('state',$find_state);
	}
	
	function add_more_4($last_id = NULL,$real_pass = NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Become Doctor');
		$this->set('last_id',$last_id);
		$this->set('real_pass',$real_pass);
		$this->set('add_more','5');
		$find_state = $this->State->find('all',array('conditions'=>array('State.status'=>1)));
		$this->set('state',$find_state);
	}
	
	function add_more_5($last_id = NULL,$real_pass = NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Become Doctor');
		$this->set('real_pass',$real_pass);
		$this->set('last_id',$last_id);
		
	}
	
	function thankyou($last_id = NULL,$real_pass = NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Become Doctor');
		$dec_id = base64_decode($last_id);
		$get_email = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$dec_id)));
		if(!empty($get_email))
		{
			$this->set('doctor_f_name',$get_email['Doctor']['first_name']);
			$this->set('doctor_l_name',$get_email['Doctor']['last_name']);
			$this->set('doctor_pass',$get_email['Doctor']['password']);
			$this->set('doctor_id',base64_encode($get_email['Doctor']['id']));
			//$this->Email->to = $get_email['Doctor']['email'];
			//$this->Email->subject = 'Niramayahealthcare Registration Confirmation Email';
			//$this->Email->replyTo = REPLY_TO_EMAIL;
			//$this->Email->from = 'info@niramayahealthcare.com';
			//$this->Email->template = 'confirm_email_doctor';
			//$this->Email->sendAs = 'both'; 
			//if($this->Email->send())
			//{
				$this->set('email',$get_email['Doctor']['email']);
			//}
		}
		else
		{
			$this->redirect('/pages/become_doctor');
		}
		$this->set('real_pass',$real_pass);
		$this->set('last_id',$last_id);
	}
	
	function doctor_email_confirm($doc_id = NULL,$doc_pass = NULL)
	{
		$dec_doc = base64_decode($doc_id);
		
		$update_doctor = $this->Doctor->query("UPDATE doctors SET email_confirm='1' WHERE id='".$dec_doc."' AND password='".$doc_pass."'");
		$this->redirect('/pages/doctor_login');
	}
	
	function admin_view_doctor()
	{
		//echo date('Y-m-d H:i:s'); exit;
		
		$this->set('title_for_layout','View Doctor(s)');
		if(isset($this->params['named']['first_name']) && $this->params['named']['first_name']!='')
		{
			$this->data['Doctorsearch']['f_name'] = $this->params['named']['first_name'];
			$options['first_name'] = $this->params['named']['first_name'];
		}
		if(isset($this->params['named']['last_name']) && $this->params['named']['last_name']!='')
		{
			$this->data['Doctorsearch']['l_name'] = $this->params['named']['last_name'];
			$options['last_name'] = $this->params['named']['last_name'];
		}
		if(isset($this->params['named']['email']) && $this->params['named']['email']!='')
		{
			$this->data['Doctorsearch']['email'] = $this->params['named']['email'];
			$options['email'] = $this->params['named']['email'];
		}
		if(isset($this->params['named']['phn']) && $this->params['named']['phn']!='')
		{
			$this->data['Doctorsearch']['contact'] = $this->params['named']['phn'];
			$options['phn'] = $this->params['named']['phn'];
		}
		if(isset($this->params['named']['help_verify']) && $this->params['named']['help_verify']!='')
		{
			$this->data['Doctorsearch']['help_verify'] = $this->params['named']['help_verify'];
			$options['help_verify'] = $this->params['named']['help_verify'];
		}
		if(isset($this->params['named']['email_verify']) && $this->params['named']['email_verify']!='')
		{
			$this->data['Doctorsearch']['email_verify'] = $this->params['named']['email_verify'];
			$options['email_verify'] = $this->params['named']['email_verify'];
		}
		if(isset($this->params['named']['featured']) && $this->params['named']['featured']!='')
		{
			$this->data['Doctorsearch']['featured'] = $this->params['named']['featured'];
			$options['featured'] = $this->params['named']['featured'];
		}
		
		if(!empty($this->data))
		{
			$first_name = $this->data['Doctorsearch']['f_name'];
			$last_name = $this->data['Doctorsearch']['l_name'];
			$email = $this->data['Doctorsearch']['email'];
			$phn_number = $this->data['Doctorsearch']['contact'];
			$helpdesk_verified = $this->data['Doctorsearch']['help_verify'];
			$email_verified = $this->data['Doctorsearch']['email_verify'];
			$featured = $this->data['Doctorsearch']['featured'];
			
			if(!empty($first_name) && $first_name != '')
			{
				$conditions['Doctor.first_name LIKE'] = '%'.$first_name.'%';
				$options['first_name'] = $first_name;
			}
			if(!empty($last_name) && $last_name != '')
			{
				$conditions['Doctor.last_name LIKE'] = '%'.$last_name.'%';
				$options['last_name'] = $last_name;
			}
			if(!empty($email) && $email != '')
			{
				$conditions['Doctor.email LIKE'] = '%'.$email.'%';
				$options['email'] = $email;
			}
			if(!empty($phn_number) && $phn_number != '')
			{
				$conditions['Doctor.contact LIKE'] = '%'.$phn_number.'%';
				$options['phn'] = $phn_number;
			}
			if(!empty($helpdesk_verified) && $helpdesk_verified != '')
			{
				$conditions['Doctor.status'] = $helpdesk_verified;
				$options['help_verify'] = $helpdesk_verified;
			}
			if(!empty($email_verified) && $email_verified != '')
			{
				$conditions['Doctor.email_confirm'] = $email_verified;
				$options['email_verify'] = $email_verified;
			}
			if(!empty($featured) && $featured != '')
			{
				$conditions['Doctor.admin_featured'] = $featured;
				$options['featured'] = $featured;
			}
			//$conditions['Doctor.show_status'] = 1;
			
			$this->paginate = array('Doctor' => array('limit' =>'10','order'=>array('Doctor.id'=>'DESC'),'conditions'=>$conditions));
			$doctorlist=$this->paginate('Doctor');
			
			$this->set('first_name',$first_name);
			$this->set('last_name',$last_name);
			$this->set('email',$email);
			$this->set('phn_number',$phn_number);
			$this->set('helpdesk_verified',$helpdesk_verified);
			$this->set('email_verified',$email_verified);
			$this->set('featured',$featured);
		}
		else
		{
			$this->paginate = array('Doctor' => array('limit' =>'10','order'=>array('Doctor.id'=>'DESC')));
			$doctorlist=$this->paginate('Doctor');
		}
		$this->set('doctorlist',$doctorlist);
		$this->set('options',$options);
	}
	
	function accept_featured()
	{
		$doc_id = base64_decode($_REQUEST['doc_id']);
		$update = $this->Doctor->query("UPDATE doctors SET featured='1' WHERE id='".$doc_id."'");
		$get_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$doc_id)));
		//Email to Doctor Starts
		$this->set('doctor_f_name',$get_detail['Doctor']['first_name']);
		$this->set('doctor_l_name',$get_detail['Doctor']['last_name']);
		$this->Email->to = $get_detail['Doctor']['email'];
		$this->Email->subject = 'Niramayahealthcare Featured Doctor Registration';
		$this->Email->replyTo = REPLY_TO_EMAIL;
		$this->Email->from = 'info@niramayahealthcare.com';
		$this->Email->template = 'featured_doctor';
		$this->Email->sendAs = 'both'; 
		$this->Email->send();
		//Email to Doctor Ends
		echo "Yes";
		exit;
	}
	
	function print_featured()
	{
		$this->layout = false;
		$this->set('title_for_layout','Featured Doctor Benefits');
	}
	
	function feature_page($doc_id = NULL,$real_pass = NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Featured Doctor');
		$this->set('last_id',$doc_id);
		$this->set('real_pass',$real_pass);
	}
	
	function admin_doctor_detail($doc_id=NULL)
	{
		$this->set('title_for_layout','Doctor Details');
		$dec_doc_id = base64_decode($doc_id);
		$get_doctor_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$dec_doc_id)));
		if($get_doctor_detail['Doctor']['gender'] == 1)
		{
			$get_doctor_detail['Doctor']['gender'] = 'Male';
		}
		if($get_doctor_detail['Doctor']['gender'] == 2)
		{
			$get_doctor_detail['Doctor']['gender'] = 'Female';
		}
		$expl_add = explode('*',$get_doctor_detail['Doctor']['address']);
		if(!empty($expl_add[0]))
		{
			$get_doctor_detail['Doctor']['address1'] = $expl_add[0];
		}
		if(!empty($expl_add[1]))
		{
			$get_doctor_detail['Doctor']['address2'] = $expl_add[1];
		}
		$get_state = $this->State->find('first',array('conditions'=>array('State.id'=>$get_doctor_detail['Doctor']['state'])));
		$get_doctor_detail['Doctor']['state'] = $get_state['State']['name'];
		
		$explode_special = explode(',',$get_doctor_detail['Doctor']['specialization']);
		$g = 1;
		foreach($explode_special as $key => $val)
		{
			$specialization_name = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$val)));
			if($g == 1)
			{
				$get_doctor_detail['Doctor']['special1'] = $specialization_name['Specialization']['display_name'];
			}
			if($g == 2)
			{
				$get_doctor_detail['Doctor']['special2'] = $specialization_name['Specialization']['display_name'];
			}
			if($g == 3)
			{
				$get_doctor_detail['Doctor']['special3'] = $specialization_name['Specialization']['display_name'];
			}
			if($g == 4)
			{
				$get_doctor_detail['Doctor']['special4'] = $specialization_name['Specialization']['display_name'];
			}
			if($g == 5)
			{
				$get_doctor_detail['Doctor']['special5'] = $specialization_name['Specialization']['display_name'];
			}
			$g++;
		}
		
		$get_clinic_detail = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$get_doctor_detail['Doctor']['id'])));
		
		$d = 0;
		foreach($get_clinic_detail as $k => $v)
		{
			$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			
			
			if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day1'] = 'Mo'; $get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day2'] = 'Tu'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day3'] = 'We'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day4'] = 'Th'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day5'] = 'Fr'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day6'] = 'Sa'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day7'] = 'Su'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
			
			
			$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			
			$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			
			$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			
			$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			
			
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
			
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
			
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
			
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
			$d++;
		}
		
		//echo "<pre>"; print_r($get_clinic_detail); exit;
		$this->set('get_doctor_detail',$get_doctor_detail);
		$this->set('get_clinic_detail',$get_clinic_detail);
	}
	
	function admin_view_verify_doctor()
	{
		$this->set('title_for_layout','Verified Doctors List');
		if(isset($this->params['named']['first_name']) && $this->params['named']['first_name']!='')
		{
			$this->data['Doctorsearch']['f_name'] = $this->params['named']['first_name'];
			$options['first_name'] = $this->params['named']['first_name'];
		}
		if(isset($this->params['named']['last_name']) && $this->params['named']['last_name']!='')
		{
			$this->data['Doctorsearch']['l_name'] = $this->params['named']['last_name'];
			$options['last_name'] = $this->params['named']['last_name'];
		}
		if(isset($this->params['named']['email']) && $this->params['named']['email']!='')
		{
			$this->data['Doctorsearch']['email'] = $this->params['named']['email'];
			$options['email'] = $this->params['named']['email'];
		}
		if(isset($this->params['named']['phn']) && $this->params['named']['phn']!='')
		{
			$this->data['Doctorsearch']['contact'] = $this->params['named']['phn'];
			$options['phn'] = $this->params['named']['phn'];
		}
		if(isset($this->params['named']['email_verify']) && $this->params['named']['email_verify']!='')
		{
			$this->data['Doctorsearch']['email_verify'] = $this->params['named']['email_verify'];
			$options['email_verify'] = $this->params['named']['email_verify'];
		}
		if(isset($this->params['named']['featured']) && $this->params['named']['featured']!='')
		{
			$this->data['Doctorsearch']['featured'] = $this->params['named']['featured'];
			$options['featured'] = $this->params['named']['featured'];
		}
		
		if(!empty($this->data))
		{
			$first_name = $this->data['Doctorsearch']['f_name'];
			$last_name = $this->data['Doctorsearch']['l_name'];
			$email = $this->data['Doctorsearch']['email'];
			$phn_number = $this->data['Doctorsearch']['contact'];
			$helpdesk_verified = $this->data['Doctorsearch']['help_verify'];
			$email_verified = $this->data['Doctorsearch']['email_verify'];
			$featured = $this->data['Doctorsearch']['featured'];
			
			if(!empty($first_name) && $first_name != '')
			{
				$conditions['Doctor.first_name LIKE'] = '%'.$first_name.'%';
				$options['first_name'] = $first_name;
			}
			if(!empty($last_name) && $last_name != '')
			{
				$conditions['Doctor.last_name LIKE'] = '%'.$last_name.'%';
				$options['last_name'] = $last_name;
			}
			if(!empty($email) && $email != '')
			{
				$conditions['Doctor.email LIKE'] = '%'.$email.'%';
				$options['email'] = $email;
			}
			if(!empty($phn_number) && $phn_number != '')
			{
				$conditions['Doctor.contact LIKE'] = '%'.$phn_number.'%';
				$options['phn'] = $phn_number;
			}
			if(!empty($email_verified) && $email_verified != '')
			{
				$conditions['Doctor.email_confirm'] = $email_verified;
				$options['email_verify'] = $email_verified;
			}
			if(!empty($featured) && $featured != '')
			{
				$conditions['Doctor.admin_featured'] = $featured;
				$options['featured'] = $featured;
			}
			$conditions['Doctor.status'] = 1;
			
			$this->paginate = array('Doctor' => array('limit' => '10', 'conditions' => $conditions, 'order' => 'Doctor.id DESC'));
			$doctorlist=$this->paginate('Doctor');
			
			$this->set('first_name',$first_name);
			$this->set('last_name',$last_name);
			$this->set('email',$email);
			$this->set('phn_number',$phn_number);
			$this->set('email_verified',$email_verified);
			$this->set('featured',$featured);
		}
		else
		{
			$this->paginate = array('Doctor' => array('limit' => '10', 'conditions' => array('Doctor.status'=>1), 'order' => 'Doctor.id DESC'));
			$doctorlist = $this->paginate('Doctor');
		}
		$this->set('doctorlist',$doctorlist);
	}
	
	function admin_doctor_detail_2($doc_id=NULL)
	{
		$this->set('title_for_layout','Doctor Details');
		$dec_doc_id = base64_decode($doc_id);
		$get_doctor_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$dec_doc_id)));
		if($get_doctor_detail['Doctor']['gender'] == 1)
		{
			$get_doctor_detail['Doctor']['gender'] = 'Male';
		}
		if($get_doctor_detail['Doctor']['gender'] == 2)
		{
			$get_doctor_detail['Doctor']['gender'] = 'Female';
		}
		$expl_add = explode('*',$get_doctor_detail['Doctor']['address']);
		if(!empty($expl_add[0]))
		{
			$get_doctor_detail['Doctor']['address1'] = $expl_add[0];
		}
		if(!empty($expl_add[1]))
		{
			$get_doctor_detail['Doctor']['address2'] = $expl_add[1];
		}
		$get_state = $this->State->find('first',array('conditions'=>array('State.id'=>$get_doctor_detail['Doctor']['state'])));
		$get_doctor_detail['Doctor']['state'] = $get_state['State']['name'];
		
		$explode_special = explode(',',$get_doctor_detail['Doctor']['specialization']);
		$g = 1;
		foreach($explode_special as $key => $val)
		{
			$specialization_name = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$val)));
			if($g == 1)
			{
				$get_doctor_detail['Doctor']['special1'] = $specialization_name['Specialization']['display_name'];
			}
			if($g == 2)
			{
				$get_doctor_detail['Doctor']['special2'] = $specialization_name['Specialization']['display_name'];
			}
			if($g == 3)
			{
				$get_doctor_detail['Doctor']['special3'] = $specialization_name['Specialization']['display_name'];
			}
			if($g == 4)
			{
				$get_doctor_detail['Doctor']['special4'] = $specialization_name['Specialization']['display_name'];
			}
			if($g == 5)
			{
				$get_doctor_detail['Doctor']['special5'] = $specialization_name['Specialization']['display_name'];
			}
			$g++;
		}
		
		$get_clinic_detail = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$get_doctor_detail['Doctor']['id'])));
		
		$d = 0;
		foreach($get_clinic_detail as $k => $v)
		{
			$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			
			
			if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day1'] = 'Mo'; $get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day2'] = 'Tu'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day3'] = 'We'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day4'] = 'Th'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day5'] = 'Fr'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day6'] = 'Sa'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day7'] = 'Su'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
			
			
			$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			
			$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			
			$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			
			$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			
			
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
			
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
			
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
			
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
			$d++;
		}
		$this->set('get_doctor_detail',$get_doctor_detail);
		$this->set('get_clinic_detail',$get_clinic_detail);
	}
	
	function admin_view_featured_doctor()
	{
		$this->set('title_for_layout','Featured Doctors List');
		if(isset($this->params['named']['first_name']) && $this->params['named']['first_name']!='')
		{
			$this->data['Doctorsearch']['f_name'] = $this->params['named']['first_name'];
			$options['first_name'] = $this->params['named']['first_name'];
		}
		if(isset($this->params['named']['last_name']) && $this->params['named']['last_name']!='')
		{
			$this->data['Doctorsearch']['l_name'] = $this->params['named']['last_name'];
			$options['last_name'] = $this->params['named']['last_name'];
		}
		if(isset($this->params['named']['email']) && $this->params['named']['email']!='')
		{
			$this->data['Doctorsearch']['email'] = $this->params['named']['email'];
			$options['email'] = $this->params['named']['email'];
		}
		if(isset($this->params['named']['phn']) && $this->params['named']['phn']!='')
		{
			$this->data['Doctorsearch']['contact'] = $this->params['named']['phn'];
			$options['phn'] = $this->params['named']['phn'];
		}
		if(isset($this->params['named']['email_verify']) && $this->params['named']['email_verify']!='')
		{
			$this->data['Doctorsearch']['email_verify'] = $this->params['named']['email_verify'];
			$options['email_verify'] = $this->params['named']['email_verify'];
		}
		
		if(!empty($this->data))
		{
			$first_name = $this->data['Doctorsearch']['f_name'];
			$last_name = $this->data['Doctorsearch']['l_name'];
			$email = $this->data['Doctorsearch']['email'];
			$phn_number = $this->data['Doctorsearch']['contact'];
			$email_verified = $this->data['Doctorsearch']['email_verify'];
			
			if(!empty($first_name) && $first_name != '')
			{
				$conditions['Doctor.first_name LIKE'] = '%'.$first_name.'%';
				$options['first_name'] = $first_name;
			}
			if(!empty($last_name) && $last_name != '')
			{
				$conditions['Doctor.last_name LIKE'] = '%'.$last_name.'%';
				$options['last_name'] = $last_name;
			}
			if(!empty($email) && $email != '')
			{
				$conditions['Doctor.email LIKE'] = '%'.$email.'%';
				$options['email'] = $email;
			}
			if(!empty($phn_number) && $phn_number != '')
			{
				$conditions['Doctor.contact LIKE'] = '%'.$phn_number.'%';
				$options['phn'] = $phn_number;
			}
			if(!empty($email_verified) && $email_verified != '')
			{
				$conditions['Doctor.email_confirm'] = $email_verified;
				$options['email_verify'] = $email_verified;
			}
			$conditions['Doctor.status'] = 1;
			$conditions['Doctor.admin_featured'] = 1;
			
			$this->paginate = array('Doctor' => array('limit' => '10', 'conditions' => $conditions, 'order' => 'Doctor.id DESC'));
			$doctorlist=$this->paginate('Doctor');
			
			$this->set('first_name',$first_name);
			$this->set('last_name',$last_name);
			$this->set('email',$email);
			$this->set('phn_number',$phn_number);
			$this->set('email_verified',$email_verified);
		}
		else
		{
			$this->paginate = array('Doctor' => array('limit' => '10', 'conditions' => array('Doctor.status'=>1,'Doctor.admin_featured'=>1,'Doctor.featured'=>1), 'order' => 'Doctor.id DESC'));
			$doctorlist = $this->paginate('Doctor');
		}
		$this->set('doctorlist',$doctorlist);
	}
	
	function admin_doctor_detail_3($doc_id=NULL)
	{
		$this->set('title_for_layout','Doctor Details');
		$dec_doc_id = base64_decode($doc_id);
		$get_doctor_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$dec_doc_id)));
		if($get_doctor_detail['Doctor']['gender'] == 1)
		{
			$get_doctor_detail['Doctor']['gender'] = 'Male';
		}
		if($get_doctor_detail['Doctor']['gender'] == 2)
		{
			$get_doctor_detail['Doctor']['gender'] = 'Female';
		}
		$expl_add = explode('*',$get_doctor_detail['Doctor']['address']);
		if(!empty($expl_add[0]))
		{
			$get_doctor_detail['Doctor']['address1'] = $expl_add[0];
		}
		if(!empty($expl_add[1]))
		{
			$get_doctor_detail['Doctor']['address2'] = $expl_add[1];
		}
		$get_state = $this->State->find('first',array('conditions'=>array('State.id'=>$get_doctor_detail['Doctor']['state'])));
		$get_doctor_detail['Doctor']['state'] = $get_state['State']['name'];
		
		$explode_special = explode(',',$get_doctor_detail['Doctor']['specialization']);
		$g = 1;
		foreach($explode_special as $key => $val)
		{
			$specialization_name = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$val)));
			if($g == 1)
			{
				$get_doctor_detail['Doctor']['special1'] = $specialization_name['Specialization']['display_name'];
			}
			if($g == 2)
			{
				$get_doctor_detail['Doctor']['special2'] = $specialization_name['Specialization']['display_name'];
			}
			if($g == 3)
			{
				$get_doctor_detail['Doctor']['special3'] = $specialization_name['Specialization']['display_name'];
			}
			if($g == 4)
			{
				$get_doctor_detail['Doctor']['special4'] = $specialization_name['Specialization']['display_name'];
			}
			if($g == 5)
			{
				$get_doctor_detail['Doctor']['special5'] = $specialization_name['Specialization']['display_name'];
			}
			$g++;
		}
		
		$get_clinic_detail = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$get_doctor_detail['Doctor']['id'])));
		
		$d = 0;
		foreach($get_clinic_detail as $k => $v)
		{
			$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			
			
			if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day1'] = 'Mo'; $get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day2'] = 'Tu'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day3'] = 'We'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day4'] = 'Th'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day5'] = 'Fr'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day6'] = 'Sa'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$get_clinic_detail[$d]['DoctorClinic']['day7'] = 'Su'; if(empty($get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'])){$get_clinic_detail[$d]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$get_clinic_detail[$d]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
			
			
			$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			
			$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			
			$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			
			$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$v['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$v['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			
			
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
			
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
			
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
			
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
			$get_clinic_detail[$d]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
			$d++;
		}
		$this->set('get_doctor_detail',$get_doctor_detail);
		$this->set('get_clinic_detail',$get_clinic_detail);
	}
	
	function admin_unfeature_doctor($doc_id=NULL)
	{
		$update = $this->Doctor->query("UPDATE doctors SET admin_featured='0' WHERE id='".$doc_id."'");
		$find_clinic = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_id)));
		foreach($find_clinic as $cl_k => $cl_v)
		{
			$update_clinic = $this->DoctorClinic->query("UPDATE doctor_clinic SET featured='0' WHERE id='".$cl_v['DoctorClinic']['id']."'");
		}
		$this->Session->setFlash('Doctor unfeatured successfully.','flash_success');
		$this->redirect('/admin/pages/view_featured_doctor');
	}
	
	function admin_unverify_doctor($doc_id=NULL)
	{
		$update = $this->Doctor->query("UPDATE doctors SET status='0' WHERE id='".$doc_id."'");
		$find_clinic = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_id)));
		foreach($find_clinic as $cl_k => $cl_v)
		{
			$update_clinic = $this->DoctorClinic->query("UPDATE doctor_clinic SET verify='0' WHERE id='".$cl_v['DoctorClinic']['id']."'");
		}
		$this->Session->setFlash('Doctor unverifed successfully.','flash_success');
		$this->redirect('/admin/pages/view_verify_doctor');
	}
	
	function find_doctor($form_id=NULL,$clinic_name=NULL,$spec_name=NULL,$spec_id=NULL,$state_name=NULL,$state_id=NULL,$city_name=NULL,$city_id=NULL,$doc_name=NULL,$appoint_date=NULL,$appoint_time=NULL)
	{
		//phpinfo();
		$this->layout = 'tests';
		$this->set('title_for_layout','Searched Doctors');
		
		if(isset($this->params['named']['name']) && $this->params['named']['name']!='')
		{
			$this->data['SearchDoctor']['name'] = $this->params['named']['name'];
			$options['name'] = $this->params['named']['name'];
		}
		if(isset($this->params['named']['speciality']) && $this->params['named']['speciality']!='')
		{
			$this->data['SearchDoctor']['speciality'] = $this->params['named']['speciality'];
			$options['speciality'] = $this->params['named']['speciality'];
		}
		if(isset($this->params['named']['specialization_id']) && $this->params['named']['specialization_id']!='')
		{
			$this->data['SearchDoctor']['speciality_id'] = $this->params['named']['specialization_id'];
			$options['specialization_id'] = $this->params['named']['specialization_id'];
		}
		if(isset($this->params['named']['state']) && $this->params['named']['state']!='')
		{
			$this->data['SearchDoctor']['state'] = $this->params['named']['state'];
			$options['state'] = $this->params['named']['state'];
		}
		if(isset($this->params['named']['state_id']) && $this->params['named']['state_id']!='')
		{
			$this->data['SearchDoctor']['state_id'] = $this->params['named']['state_id'];
			$options['state_id'] = $this->params['named']['state_id'];
		}
		if(isset($this->params['named']['city']) && $this->params['named']['city']!='')
		{
			$this->data['SearchDoctor']['locality'] = $this->params['named']['city'];
			$options['city'] = $this->params['named']['city'];
		}
		if(isset($this->params['named']['city_id']) && $this->params['named']['city_id']!='')
		{
			$this->data['SearchDoctor']['locality_id'] = $this->params['named']['city_id'];
			$options['city_id'] = $this->params['named']['city_id'];
		}
		
		if(!empty($clinic_name) && $clinic_name != ''){if(base64_decode($clinic_name) != 'NO'){$this->data['SearchDoctor']['name'] = base64_decode($clinic_name);}else{$this->data['SearchDoctor']['name'] = '';}}
		if(!empty($spec_name) && $spec_name != ''){if(base64_decode($spec_name) != 'NO'){$this->data['SearchDoctor']['speciality'] = base64_decode($spec_name);}else{$this->data['SearchDoctor']['speciality'] = '';}}
		if(!empty($spec_id) && $spec_id != ''){if(base64_decode($spec_id) != 'NO'){$this->data['SearchDoctor']['speciality_id'] = base64_decode($spec_id);}else{$this->data['SearchDoctor']['speciality_id'] = '';}}
		if(!empty($state_name) && $state_name != ''){if(base64_decode($state_name) != 'NO'){$this->data['SearchDoctor']['state'] = base64_decode($state_name);}else{$this->data['SearchDoctor']['state'] = '';}}
		if(!empty($state_id) && $state_id != ''){if(base64_decode($state_id) != 'NO'){$this->data['SearchDoctor']['state_id'] = base64_decode($state_id);}else{$this->data['SearchDoctor']['state_id'] = '';}}
		if(!empty($city_name) && $city_name != ''){if(base64_decode($city_name) != 'NO'){$this->data['SearchDoctor']['locality'] = base64_decode($city_name);}else{$this->data['SearchDoctor']['locality'] = '';}}
		if(!empty($city_id) && $city_id != ''){if(base64_decode($city_id) != 'NO'){$this->data['SearchDoctor']['locality_id'] = base64_decode($city_id);}else{$this->data['SearchDoctor']['locality_id'] = '';}}
		
		$dec_doc_name = base64_decode($doc_name);
		$dec_appoint_date = base64_decode($appoint_date);
		$dec_appoint_time = base64_decode($appoint_time);
		$this->set('dec_doc_name',$dec_doc_name);
		$this->set('dec_appoint_date',$dec_appoint_date);
		$this->set('dec_appoint_time',$dec_appoint_time);
		
		//echo "<pre>"; print_r($this->data); exit;
		
		if(!empty($this->data))
		{
			//echo "<pre>"; print_r($this->data); exit;
			$clinic_name = $this->data['SearchDoctor']['name'];
			$doc_speciality = $this->data['SearchDoctor']['speciality'];
			$doc_speciality_id = $this->data['SearchDoctor']['speciality_id'];
			$doc_state_name = $this->data['SearchDoctor']['state'];
			$doc_state_id = $this->data['SearchDoctor']['state_id'];
			$doc_city_name = $this->data['SearchDoctor']['locality'];
			$doc_city_id = $this->data['SearchDoctor']['locality_id'];
			//echo "<pre>"; print_r($this->data); exit;
			if(isset($clinic_name) && !empty($clinic_name))
			{
				$conditions['DoctorClinic.clinic_name LIKE'] = '%'.$clinic_name.'%';
				$options['name'] = $clinic_name;
			}
			if(isset($doc_speciality_id) && !empty($doc_speciality_id))
			{
				$conditions['DoctorClinic.special LIKE'] = '%'.$doc_speciality_id.'%';
				$options['specialization'] = $doc_speciality;
				$options['specialization_id'] = $doc_speciality_id;
			}
			if(isset($doc_state_id) && !empty($doc_state_id))
			{
				$conditions['DoctorClinic.state'] = $doc_state_id;
				$options['state'] = $doc_state_name;
				$options['state_id'] = $doc_state_id;
			}
			if(isset($doc_city_id) && !empty($doc_city_id))
			{
				$conditions['DoctorClinic.city'] = $doc_city_id;
				$options['city'] = $doc_city_name;
				$options['city_id'] = $doc_city_id;
			}
			$conditions['DoctorClinic.status'] = 1;
			
			$this->paginate = array('DoctorClinic' => array('limit' => '5', 'conditions' => $conditions, 'order' => 'DoctorClinic.id DESC'));
			$search_doctor = $this->paginate('DoctorClinic');
			//$search_doctor = $this->DoctorClinic->find('all',array('conditions'=>$conditions,'group'=>array('DoctorClinic.doctor_id')));
			
			//echo "<pre>"; print_r($search_doctor); exit;
			$g = 0;
			foreach($search_doctor as $ke => $vl)
			{
				$expl_special = explode(',',$vl['DoctorClinic']['special']);
				$count = count($expl_special);
				if($count == 1)
				{
					$clinic_count = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['DoctorClinic']['doctor_id'])));
					$search_doctor[$g]['DoctorClinic']['clinic_count'] = $clinic_count;
					
					$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
					$search_doctor[$g]['DoctorClinic']['speciality'] = $special_1[0]['specializations']['display_name'];
					$doc_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$vl['DoctorClinic']['doctor_id'])));
					//$find_clinic = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					
					//$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					
					$search_doctor[$g]['DoctorClinic']['appoint_activate'] = $doc_detail['Doctor']['appointment_activation'];
					
					$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					
					
					if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$search_doctor[$g]['DoctorClinic']['day1'] = 'Mo'; $search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$search_doctor[$g]['DoctorClinic']['day2'] = 'Tu'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$search_doctor[$g]['DoctorClinic']['day3'] = 'We'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$search_doctor[$g]['DoctorClinic']['day4'] = 'Th'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$search_doctor[$g]['DoctorClinic']['day5'] = 'Fr'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$search_doctor[$g]['DoctorClinic']['day6'] = 'Sa'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$search_doctor[$g]['DoctorClinic']['day7'] = 'Su'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
					
					
					$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$mor1 = 0;
					foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
					{
						if(!empty($cltm1_val['BookAppointment']))
						{
							$mor11 = 1;
							foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
							{
								if($app_cltm1_val['status'] == 1)
								{
									$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
									$mor11++;
								}
							}
						}
						$mor1++;
					}
					$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$mor2 = 0;
					foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
					{
						if(!empty($cltm2_val['BookAppointment']))
						{
							$mor22 = 1;
							foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
							{
								if($app_cltm2_val['status'] == 1)
								{
									$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
									$mor22++;
								}
							}
						}
						$mor2++;
					}
					$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$mor3 = 0;
					foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
					{
						if(!empty($cltm3_val['BookAppointment']))
						{
							$mor33 = 1;
							foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
							{
								if($app_cltm3_val['status'] == 1)
								{
									$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
									$mor33++;
								}
							}
						}
						$mor3++;
					}
					$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$mor4 = 0;
					foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
					{
						if(!empty($cltm4_val['BookAppointment']))
						{
							$mor44 = 1;
							foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
							{
								if($app_cltm4_val['status'] == 1)
								{
									$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
									$mor44++;
								}
							}
						}
						$mor4++;
					}
					$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$mor5 = 0;
					foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
					{
						if(!empty($cltm5_val['BookAppointment']))
						{
							$mor55 = 1;
							foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
							{
								if($app_cltm5_val['status'] == 1)
								{
									$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
									$mor55++;
								}
							}
						}
						$mor5++;
					}
					$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$mor6 = 0;
					foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
					{
						if(!empty($cltm6_val['BookAppointment']))
						{
							$mor66 = 1;
							foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
							{
								if($app_cltm6_val['status'] == 1)
								{
									$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
									$mor66++;
								}
							}
						}
						$mor6++;
					}
					$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$mor7 = 0;
					foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
					{
						if(!empty($cltm7_val['BookAppointment']))
						{
							$mor77 = 1;
							foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
							{
								if($app_cltm7_val['status'] == 1)
								{
									$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
									$mor77++;
								}
							}
						}
						$mor7++;
					}
					
					$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$aft1 = 0;
					foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
					{
						if(!empty($clta1_val['BookAppointment']))
						{
							$aft11 = 1;
							foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
							{
								if($app_clta1_val['status'] == 1)
								{
									$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
									$aft11++;
								}
							}
						}
						$aft1++;
					}
					$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$aft2 = 0;
					foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
					{
						if(!empty($clta2_val['BookAppointment']))
						{
							$aft22 = 1;
							foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
							{
								if($app_clta2_val['status'] == 1)
								{
									$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
									$aft22++;
								}
							}
						}
						$aft2++;
					}
					$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$aft3 = 0;
					foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
					{
						if(!empty($clta3_val['BookAppointment']))
						{
							$aft33 = 1;
							foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
							{
								if($app_clta3_val['status'] == 1)
								{
									$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
									$aft33++;
								}
							}
						}
						$aft3++;
					}
					$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$aft4 = 0;
					foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
					{
						if(!empty($clta4_val['BookAppointment']))
						{
							$aft44 = 1;
							foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
							{
								if($app_clta4_val['status'] == 1)
								{
									$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
									$aft44++;
								}
							}
						}
						$aft4++;
					}
					$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$aft5 = 0;
					foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
					{
						if(!empty($clta5_val['BookAppointment']))
						{
							$aft55 = 1;
							foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
							{
								if($app_clta5_val['status'] == 1)
								{
									$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
									$aft55++;
								}
							}
						}
						$aft5++;
					}
					$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$aft6 = 0;
					foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
					{
						if(!empty($clta6_val['BookAppointment']))
						{
							$aft66 = 1;
							foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
							{
								if($app_clta6_val['status'] == 1)
								{
									$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
									$aft66++;
								}
							}
						}
						$aft6++;
					}
					$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$aft7 = 0;
					foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
					{
						if(!empty($clta7_val['BookAppointment']))
						{
							$aft77 = 1;
							foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
							{
								if($app_clta7_val['status'] == 1)
								{
									$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
									$aft77++;
								}
							}
						}
						$aft7++;
					}
					
					$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$evn1 = 0;
					foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
					{
						if(!empty($clte1_val['BookAppointment']))
						{
							$evn11 = 1;
							foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
							{
								if($app_clte1_val['status'] == 1)
								{
									$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
									$evn11++;
								}
							}
						}
						$evn1++;
					}
					$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$evn2 = 0;
					foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
					{
						if(!empty($clte2_val['BookAppointment']))
						{
							$evn22 = 1;
							foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
							{
								if($app_clte2_val['status'] == 1)
								{
									$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
									$evn22++;
								}
							}
						}
						$evn2++;
					}
					$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$evn3 = 0;
					foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
					{
						if(!empty($clte3_val['BookAppointment']))
						{
							$evn33 = 1;
							foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
							{
								if($app_clte3_val['status'] == 1)
								{
									$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
									$evn33++;
								}
							}
						}
						$evn3++;
					}
					$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$evn4 = 0;
					foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
					{
						if(!empty($clte4_val['BookAppointment']))
						{
							$evn44 = 1;
							foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
							{
								if($app_clte4_val['status'] == 1)
								{
									$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
									$evn44++;
								}
							}
						}
						$evn4++;
					}
					$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$evn5 = 0;
					foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
					{
						if(!empty($clte5_val['BookAppointment']))
						{
							$evn55 = 1;
							foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
							{
								if($app_clte5_val['status'] == 1)
								{
									$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
									$evn55++;
								}
							}
						}
						$evn5++;
					}
					$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$evn6 = 0;
					foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
					{
						if(!empty($clte6_val['BookAppointment']))
						{
							$evn66 = 1;
							foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
							{
								if($app_clte6_val['status'] == 1)
								{
									$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
									$evn66++;
								}
							}
						}
						$evn6++;
					}
					$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$evn7 = 0;
					foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
					{
						if(!empty($clte7_val['BookAppointment']))
						{
							$evn77 = 1;
							foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
							{
								if($app_clte7_val['status'] == 1)
								{
									$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
									$evn77++;
								}
							}
						}
						$evn7++;
					}
					
					$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt1 = 0;
					foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
					{
						if(!empty($cltn1_val['BookAppointment']))
						{
							$ngt11 = 1;
							foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
							{
								if($app_cltn1_val['status'] == 1)
								{
									$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
									$ngt11++;
								}
							}
						}
						$ngt1++;
					}
					$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt2 = 0;
					foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
					{
						if(!empty($cltn2_val['BookAppointment']))
						{
							$ngt22 = 1;
							foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
							{
								if($app_cltn2_val['status'] == 1)
								{
									$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
									$ngt22++;
								}
							}
						}
						$ngt2++;
					}
					$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt3 = 0;
					foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
					{
						if(!empty($cltn3_val['BookAppointment']))
						{
							$ngt33 = 1;
							foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
							{
								if($app_cltn3_val['status'] == 1)
								{
									$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
									$ngt33++;
								}
							}
						}
						$ngt3++;
					}
					$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt4 = 0;
					foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
					{
						if(!empty($cltn4_val['BookAppointment']))
						{
							$ngt44 = 1;
							foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
							{
								if($app_cltn4_val['status'] == 1)
								{
									$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
									$ngt44++;
								}
							}
						}
						$ngt4++;
					}
					$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt5 = 0;
					foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
					{
						if(!empty($cltn5_val['BookAppointment']))
						{
							$ngt55 = 1;
							foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
							{
								if($app_cltn5_val['status'] == 1)
								{
									$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
									$ngt55++;
								}
							}
						}
						$ngt5++;
					}
					$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt6 = 0;
					foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
					{
						if(!empty($cltn6_val['BookAppointment']))
						{
							$ngt66 = 1;
							foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
							{
								if($app_cltn6_val['status'] == 1)
								{
									$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
									$ngt66++;
								}
							}
						}
						$ngt6++;
					}
					$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt7 = 0;
					foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
					{
						if(!empty($cltn7_val['BookAppointment']))
						{
							$ngt77 = 1;
							foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
							{
								if($app_cltn7_val['status'] == 1)
								{
									$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
									$ngt77++;
								}
							}
						}
						$ngt7++;
					}
					
					$expl_clinic_address = explode('*',$vl['DoctorClinic']['clinic_address']);
					$search_doctor[$g]['DoctorClinic']['clinic_id'] = $vl['DoctorClinic']['id'];
					$search_doctor[$g]['DoctorClinic']['clinic_name'] = $vl['DoctorClinic']['clinic_name'];
					$search_doctor[$g]['DoctorClinic']['clinic_add1'] = $expl_clinic_address[0];
					$search_doctor[$g]['DoctorClinic']['clinic_add2'] = $expl_clinic_address[1];
					
					$search_doctor[$g]['DoctorClinic']['doctor_id'] = $doc_detail['Doctor']['id'];
					$search_doctor[$g]['DoctorClinic']['doctor_title'] = $doc_detail['Doctor']['title'];
					$search_doctor[$g]['DoctorClinic']['doctor_f_name'] = $doc_detail['Doctor']['first_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_l_name'] = $doc_detail['Doctor']['last_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_gender'] = $doc_detail['Doctor']['gender'];
					$search_doctor[$g]['DoctorClinic']['doctor_image'] = $doc_detail['Doctor']['image'];
					$search_doctor[$g]['DoctorClinic']['appointment_activation'] = $doc_detail['Doctor']['appointment_activation'];
					$search_doctor[$g]['DoctorClinic']['doctor_locality'] = $doc_detail['Doctor']['locality'];
					$search_doctor[$g]['DoctorClinic']['doctor_cons_fee'] = $doc_detail['Doctor']['cons_fee'];
					$search_doctor[$g]['DoctorClinic']['doctor_home_fee'] = $doc_detail['Doctor']['home_fee'];
					
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;

					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
						
					//$search_doctor[$g]['Doctor']['clinic_count'] = $count_cl;
					$search_doctor[$g]['DoctorClinic']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
					
					$state_name = $this->State->find('first',array('conditions'=>array('State.id'=>$vl['DoctorClinic']['state'])));
					$city_name = $this->StateCity->find('first',array('conditions'=>array('StateCity.id'=>$vl['DoctorClinic']['city'])));
					$search_doctor[$g]['DoctorClinic']['state_name'] = $state_name['State']['name'];
					$search_doctor[$g]['DoctorClinic']['city_name'] = $city_name['StateCity']['city_name'];
					$g++;
				}
				if($count == 2)
				{
					$clinic_count = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['DoctorClinic']['doctor_id'])));
					$search_doctor[$g]['DoctorClinic']['clinic_count'] = $clinic_count;
					
					$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
					$special_2 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[1]."'");
					$search_doctor[$g]['DoctorClinic']['speciality'] = $special_1[0]['specializations']['display_name'].' , '.$special_2[0]['specializations']['display_name'];
					$doc_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$vl['DoctorClinic']['doctor_id'])));
					//$find_clinic = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					
					//$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					$search_doctor[$g]['DoctorClinic']['appoint_activate'] = $doc_detail['Doctor']['appointment_activation'];
					
					$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					
					
					if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$search_doctor[$g]['DoctorClinic']['day1'] = 'Mo'; $search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$search_doctor[$g]['DoctorClinic']['day2'] = 'Tu'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$search_doctor[$g]['DoctorClinic']['day3'] = 'We'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$search_doctor[$g]['DoctorClinic']['day4'] = 'Th'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$search_doctor[$g]['DoctorClinic']['day5'] = 'Fr'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$search_doctor[$g]['DoctorClinic']['day6'] = 'Sa'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$search_doctor[$g]['DoctorClinic']['day7'] = 'Su'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
					
					
					$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$mor1 = 0;
					foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
					{
						if(!empty($cltm1_val['BookAppointment']))
						{
							$mor11 = 1;
							foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
							{
								if($app_cltm1_val['status'] == 1)
								{
									$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
									$mor11++;
								}
							}
						}
						$mor1++;
					}
					$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$mor2 = 0;
					foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
					{
						if(!empty($cltm2_val['BookAppointment']))
						{
							$mor22 = 1;
							foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
							{
								if($app_cltm2_val['status'] == 1)
								{
									$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
									$mor22++;
								}
							}
						}
						$mor2++;
					}
					$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$mor3 = 0;
					foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
					{
						if(!empty($cltm3_val['BookAppointment']))
						{
							$mor33 = 1;
							foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
							{
								if($app_cltm3_val['status'] == 1)
								{
									$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
									$mor33++;
								}
							}
						}
						$mor3++;
					}
					$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$mor4 = 0;
					foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
					{
						if(!empty($cltm4_val['BookAppointment']))
						{
							$mor44 = 1;
							foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
							{
								if($app_cltm4_val['status'] == 1)
								{
									$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
									$mor44++;
								}
							}
						}
						$mor4++;
					}
					$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$mor5 = 0;
					foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
					{
						if(!empty($cltm5_val['BookAppointment']))
						{
							$mor55 = 1;
							foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
							{
								if($app_cltm5_val['status'] == 1)
								{
									$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
									$mor55++;
								}
							}
						}
						$mor5++;
					}
					$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$mor6 = 0;
					foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
					{
						if(!empty($cltm6_val['BookAppointment']))
						{
							$mor66 = 1;
							foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
							{
								if($app_cltm6_val['status'] == 1)
								{
									$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
									$mor66++;
								}
							}
						}
						$mor6++;
					}
					$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$mor7 = 0;
					foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
					{
						if(!empty($cltm7_val['BookAppointment']))
						{
							$mor77 = 1;
							foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
							{
								if($app_cltm7_val['status'] == 1)
								{
									$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
									$mor77++;
								}
							}
						}
						$mor7++;
					}
					
					$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$aft1 = 0;
					foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
					{
						if(!empty($clta1_val['BookAppointment']))
						{
							$aft11 = 1;
							foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
							{
								if($app_clta1_val['status'] == 1)
								{
									$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
									$aft11++;
								}
							}
						}
						$aft1++;
					}
					$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$aft2 = 0;
					foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
					{
						if(!empty($clta2_val['BookAppointment']))
						{
							$aft22 = 1;
							foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
							{
								if($app_clta2_val['status'] == 1)
								{
									$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
									$aft22++;
								}
							}
						}
						$aft2++;
					}
					$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$aft3 = 0;
					foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
					{
						if(!empty($clta3_val['BookAppointment']))
						{
							$aft33 = 1;
							foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
							{
								if($app_clta3_val['status'] == 1)
								{
									$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
									$aft33++;
								}
							}
						}
						$aft3++;
					}
					$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$aft4 = 0;
					foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
					{
						if(!empty($clta4_val['BookAppointment']))
						{
							$aft44 = 1;
							foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
							{
								if($app_clta4_val['status'] == 1)
								{
									$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
									$aft44++;
								}
							}
						}
						$aft4++;
					}
					$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$aft5 = 0;
					foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
					{
						if(!empty($clta5_val['BookAppointment']))
						{
							$aft55 = 1;
							foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
							{
								if($app_clta5_val['status'] == 1)
								{
									$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
									$aft55++;
								}
							}
						}
						$aft5++;
					}
					$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$aft6 = 0;
					foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
					{
						if(!empty($clta6_val['BookAppointment']))
						{
							$aft66 = 1;
							foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
							{
								if($app_clta6_val['status'] == 1)
								{
									$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
									$aft66++;
								}
							}
						}
						$aft6++;
					}
					$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$aft7 = 0;
					foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
					{
						if(!empty($clta7_val['BookAppointment']))
						{
							$aft77 = 1;
							foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
							{
								if($app_clta7_val['status'] == 1)
								{
									$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
									$aft77++;
								}
							}
						}
						$aft7++;
					}
					
					$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$evn1 = 0;
					foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
					{
						if(!empty($clte1_val['BookAppointment']))
						{
							$evn11 = 1;
							foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
							{
								if($app_clte1_val['status'] == 1)
								{
									$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
									$evn11++;
								}
							}
						}
						$evn1++;
					}
					$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$evn2 = 0;
					foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
					{
						if(!empty($clte2_val['BookAppointment']))
						{
							$evn22 = 1;
							foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
							{
								if($app_clte2_val['status'] == 1)
								{
									$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
									$evn22++;
								}
							}
						}
						$evn2++;
					}
					$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$evn3 = 0;
					foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
					{
						if(!empty($clte3_val['BookAppointment']))
						{
							$evn33 = 1;
							foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
							{
								if($app_clte3_val['status'] == 1)
								{
									$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
									$evn33++;
								}
							}
						}
						$evn3++;
					}
					$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$evn4 = 0;
					foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
					{
						if(!empty($clte4_val['BookAppointment']))
						{
							$evn44 = 1;
							foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
							{
								if($app_clte4_val['status'] == 1)
								{
									$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
									$evn44++;
								}
							}
						}
						$evn4++;
					}
					$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$evn5 = 0;
					foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
					{
						if(!empty($clte5_val['BookAppointment']))
						{
							$evn55 = 1;
							foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
							{
								if($app_clte5_val['status'] == 1)
								{
									$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
									$evn55++;
								}
							}
						}
						$evn5++;
					}
					$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$evn6 = 0;
					foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
					{
						if(!empty($clte6_val['BookAppointment']))
						{
							$evn66 = 1;
							foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
							{
								if($app_clte6_val['status'] == 1)
								{
									$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
									$evn66++;
								}
							}
						}
						$evn6++;
					}
					$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$evn7 = 0;
					foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
					{
						if(!empty($clte7_val['BookAppointment']))
						{
							$evn77 = 1;
							foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
							{
								if($app_clte7_val['status'] == 1)
								{
									$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
									$evn77++;
								}
							}
						}
						$evn7++;
					}
					
					$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt1 = 0;
					foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
					{
						if(!empty($cltn1_val['BookAppointment']))
						{
							$ngt11 = 1;
							foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
							{
								if($app_cltn1_val['status'] == 1)
								{
									$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
									$ngt11++;
								}
							}
						}
						$ngt1++;
					}
					$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt2 = 0;
					foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
					{
						if(!empty($cltn2_val['BookAppointment']))
						{
							$ngt22 = 1;
							foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
							{
								if($app_cltn2_val['status'] == 1)
								{
									$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
									$ngt22++;
								}
							}
						}
						$ngt2++;
					}
					$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt3 = 0;
					foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
					{
						if(!empty($cltn3_val['BookAppointment']))
						{
							$ngt33 = 1;
							foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
							{
								if($app_cltn3_val['status'] == 1)
								{
									$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
									$ngt33++;
								}
							}
						}
						$ngt3++;
					}
					$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt4 = 0;
					foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
					{
						if(!empty($cltn4_val['BookAppointment']))
						{
							$ngt44 = 1;
							foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
							{
								if($app_cltn4_val['status'] == 1)
								{
									$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
									$ngt44++;
								}
							}
						}
						$ngt4++;
					}
					$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt5 = 0;
					foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
					{
						if(!empty($cltn5_val['BookAppointment']))
						{
							$ngt55 = 1;
							foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
							{
								if($app_cltn5_val['status'] == 1)
								{
									$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
									$ngt55++;
								}
							}
						}
						$ngt5++;
					}
					$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt6 = 0;
					foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
					{
						if(!empty($cltn6_val['BookAppointment']))
						{
							$ngt66 = 1;
							foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
							{
								if($app_cltn6_val['status'] == 1)
								{
									$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
									$ngt66++;
								}
							}
						}
						$ngt6++;
					}
					$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt7 = 0;
					foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
					{
						if(!empty($cltn7_val['BookAppointment']))
						{
							$ngt77 = 1;
							foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
							{
								if($app_cltn7_val['status'] == 1)
								{
									$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
									$ngt77++;
								}
							}
						}
						$ngt7++;
					}
					
					$expl_clinic_address = explode('*',$vl['DoctorClinic']['clinic_address']);
					$search_doctor[$g]['DoctorClinic']['clinic_id'] = $vl['DoctorClinic']['id'];
					$search_doctor[$g]['DoctorClinic']['clinic_name'] = $vl['DoctorClinic']['clinic_name'];
					$search_doctor[$g]['DoctorClinic']['clinic_add1'] = $expl_clinic_address[0];
					$search_doctor[$g]['DoctorClinic']['clinic_add2'] = $expl_clinic_address[1];
					
					$search_doctor[$g]['DoctorClinic']['doctor_id'] = $doc_detail['Doctor']['id'];
					$search_doctor[$g]['DoctorClinic']['doctor_title'] = $doc_detail['Doctor']['title'];
					$search_doctor[$g]['DoctorClinic']['doctor_f_name'] = $doc_detail['Doctor']['first_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_l_name'] = $doc_detail['Doctor']['last_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_gender'] = $doc_detail['Doctor']['gender'];
					$search_doctor[$g]['DoctorClinic']['doctor_image'] = $doc_detail['Doctor']['image'];
					$search_doctor[$g]['DoctorClinic']['appointment_activation'] = $doc_detail['Doctor']['appointment_activation'];
					$search_doctor[$g]['DoctorClinic']['doctor_locality'] = $doc_detail['Doctor']['locality'];
					$search_doctor[$g]['DoctorClinic']['doctor_cons_fee'] = $doc_detail['Doctor']['cons_fee'];
					$search_doctor[$g]['DoctorClinic']['doctor_home_fee'] = $doc_detail['Doctor']['home_fee'];
					
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
						
					//$search_doctor[$g]['Doctor']['clinic_count'] = $count_cl;
					$search_doctor[$g]['DoctorClinic']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
					
					$state_name = $this->State->find('first',array('conditions'=>array('State.id'=>$vl['DoctorClinic']['state'])));
					$city_name = $this->StateCity->find('first',array('conditions'=>array('StateCity.id'=>$vl['DoctorClinic']['city'])));
					$search_doctor[$g]['DoctorClinic']['state_name'] = $state_name['State']['name'];
					$search_doctor[$g]['DoctorClinic']['city_name'] = $city_name['StateCity']['city_name'];
					$g++;
				}
				if($count == 3)
				{
					$clinic_count = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['DoctorClinic']['doctor_id'])));
					$search_doctor[$g]['DoctorClinic']['clinic_count'] = $clinic_count;
					
					$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
					$special_2 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[1]."'");
					$special_3 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[2]."'");
					$search_doctor[$g]['DoctorClinic']['speciality'] = $special_1[0]['specializations']['display_name'].' , '.$special_2[0]['specializations']['display_name'].' , '.$special_3[0]['specializations']['display_name'];
					$doc_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$vl['DoctorClinic']['doctor_id'])));
					//$find_clinic = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					
					//$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					$search_doctor[$g]['DoctorClinic']['appoint_activate'] = $doc_detail['Doctor']['appointment_activation'];
					
					$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					
					
					if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$search_doctor[$g]['DoctorClinic']['day1'] = 'Mo'; $search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$search_doctor[$g]['DoctorClinic']['day2'] = 'Tu'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$search_doctor[$g]['DoctorClinic']['day3'] = 'We'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$search_doctor[$g]['DoctorClinic']['day4'] = 'Th'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$search_doctor[$g]['DoctorClinic']['day5'] = 'Fr'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$search_doctor[$g]['DoctorClinic']['day6'] = 'Sa'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$search_doctor[$g]['DoctorClinic']['day7'] = 'Su'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
					
					
					$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$mor1 = 0;
					foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
					{
						if(!empty($cltm1_val['BookAppointment']))
						{
							$mor11 = 1;
							foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
							{
								if($app_cltm1_val['status'] == 1)
								{
									$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
									$mor11++;
								}
							}
						}
						$mor1++;
					}
					$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$mor2 = 0;
					foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
					{
						if(!empty($cltm2_val['BookAppointment']))
						{
							$mor22 = 1;
							foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
							{
								if($app_cltm2_val['status'] == 1)
								{
									$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
									$mor22++;
								}
							}
						}
						$mor2++;
					}
					$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$mor3 = 0;
					foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
					{
						if(!empty($cltm3_val['BookAppointment']))
						{
							$mor33 = 1;
							foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
							{
								if($app_cltm3_val['status'] == 1)
								{
									$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
									$mor33++;
								}
							}
						}
						$mor3++;
					}
					$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$mor4 = 0;
					foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
					{
						if(!empty($cltm4_val['BookAppointment']))
						{
							$mor44 = 1;
							foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
							{
								if($app_cltm4_val['status'] == 1)
								{
									$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
									$mor44++;
								}
							}
						}
						$mor4++;
					}
					$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$mor5 = 0;
					foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
					{
						if(!empty($cltm5_val['BookAppointment']))
						{
							$mor55 = 1;
							foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
							{
								if($app_cltm5_val['status'] == 1)
								{
									$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
									$mor55++;
								}
							}
						}
						$mor5++;
					}
					$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$mor6 = 0;
					foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
					{
						if(!empty($cltm6_val['BookAppointment']))
						{
							$mor66 = 1;
							foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
							{
								if($app_cltm6_val['status'] == 1)
								{
									$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
									$mor66++;
								}
							}
						}
						$mor6++;
					}
					$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$mor7 = 0;
					foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
					{
						if(!empty($cltm7_val['BookAppointment']))
						{
							$mor77 = 1;
							foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
							{
								if($app_cltm7_val['status'] == 1)
								{
									$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
									$mor77++;
								}
							}
						}
						$mor7++;
					}
					
					$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$aft1 = 0;
					foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
					{
						if(!empty($clta1_val['BookAppointment']))
						{
							$aft11 = 1;
							foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
							{
								if($app_clta1_val['status'] == 1)
								{
									$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
									$aft11++;
								}
							}
						}
						$aft1++;
					}
					$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$aft2 = 0;
					foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
					{
						if(!empty($clta2_val['BookAppointment']))
						{
							$aft22 = 1;
							foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
							{
								if($app_clta2_val['status'] == 1)
								{
									$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
									$aft22++;
								}
							}
						}
						$aft2++;
					}
					$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$aft3 = 0;
					foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
					{
						if(!empty($clta3_val['BookAppointment']))
						{
							$aft33 = 1;
							foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
							{
								if($app_clta3_val['status'] == 1)
								{
									$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
									$aft33++;
								}
							}
						}
						$aft3++;
					}
					$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$aft4 = 0;
					foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
					{
						if(!empty($clta4_val['BookAppointment']))
						{
							$aft44 = 1;
							foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
							{
								if($app_clta4_val['status'] == 1)
								{
									$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
									$aft44++;
								}
							}
						}
						$aft4++;
					}
					$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$aft5 = 0;
					foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
					{
						if(!empty($clta5_val['BookAppointment']))
						{
							$aft55 = 1;
							foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
							{
								if($app_clta5_val['status'] == 1)
								{
									$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
									$aft55++;
								}
							}
						}
						$aft5++;
					}
					$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$aft6 = 0;
					foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
					{
						if(!empty($clta6_val['BookAppointment']))
						{
							$aft66 = 1;
							foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
							{
								if($app_clta6_val['status'] == 1)
								{
									$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
									$aft66++;
								}
							}
						}
						$aft6++;
					}
					$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$aft7 = 0;
					foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
					{
						if(!empty($clta7_val['BookAppointment']))
						{
							$aft77 = 1;
							foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
							{
								if($app_clta7_val['status'] == 1)
								{
									$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
									$aft77++;
								}
							}
						}
						$aft7++;
					}
					
					$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$evn1 = 0;
					foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
					{
						if(!empty($clte1_val['BookAppointment']))
						{
							$evn11 = 1;
							foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
							{
								if($app_clte1_val['status'] == 1)
								{
									$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
									$evn11++;
								}
							}
						}
						$evn1++;
					}
					$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$evn2 = 0;
					foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
					{
						if(!empty($clte2_val['BookAppointment']))
						{
							$evn22 = 1;
							foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
							{
								if($app_clte2_val['status'] == 1)
								{
									$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
									$evn22++;
								}
							}
						}
						$evn2++;
					}
					$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$evn3 = 0;
					foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
					{
						if(!empty($clte3_val['BookAppointment']))
						{
							$evn33 = 1;
							foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
							{
								if($app_clte3_val['status'] == 1)
								{
									$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
									$evn33++;
								}
							}
						}
						$evn3++;
					}
					$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$evn4 = 0;
					foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
					{
						if(!empty($clte4_val['BookAppointment']))
						{
							$evn44 = 1;
							foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
							{
								if($app_clte4_val['status'] == 1)
								{
									$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
									$evn44++;
								}
							}
						}
						$evn4++;
					}
					$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$evn5 = 0;
					foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
					{
						if(!empty($clte5_val['BookAppointment']))
						{
							$evn55 = 1;
							foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
							{
								if($app_clte5_val['status'] == 1)
								{
									$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
									$evn55++;
								}
							}
						}
						$evn5++;
					}
					$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$evn6 = 0;
					foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
					{
						if(!empty($clte6_val['BookAppointment']))
						{
							$evn66 = 1;
							foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
							{
								if($app_clte6_val['status'] == 1)
								{
									$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
									$evn66++;
								}
							}
						}
						$evn6++;
					}
					$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$evn7 = 0;
					foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
					{
						if(!empty($clte7_val['BookAppointment']))
						{
							$evn77 = 1;
							foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
							{
								if($app_clte7_val['status'] == 1)
								{
									$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
									$evn77++;
								}
							}
						}
						$evn7++;
					}
					
					$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt1 = 0;
					foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
					{
						if(!empty($cltn1_val['BookAppointment']))
						{
							$ngt11 = 1;
							foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
							{
								if($app_cltn1_val['status'] == 1)
								{
									$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
									$ngt11++;
								}
							}
						}
						$ngt1++;
					}
					$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt2 = 0;
					foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
					{
						if(!empty($cltn2_val['BookAppointment']))
						{
							$ngt22 = 1;
							foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
							{
								if($app_cltn2_val['status'] == 1)
								{
									$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
									$ngt22++;
								}
							}
						}
						$ngt2++;
					}
					$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt3 = 0;
					foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
					{
						if(!empty($cltn3_val['BookAppointment']))
						{
							$ngt33 = 1;
							foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
							{
								if($app_cltn3_val['status'] == 1)
								{
									$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
									$ngt33++;
								}
							}
						}
						$ngt3++;
					}
					$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt4 = 0;
					foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
					{
						if(!empty($cltn4_val['BookAppointment']))
						{
							$ngt44 = 1;
							foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
							{
								if($app_cltn4_val['status'] == 1)
								{
									$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
									$ngt44++;
								}
							}
						}
						$ngt4++;
					}
					$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt5 = 0;
					foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
					{
						if(!empty($cltn5_val['BookAppointment']))
						{
							$ngt55 = 1;
							foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
							{
								if($app_cltn5_val['status'] == 1)
								{
									$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
									$ngt55++;
								}
							}
						}
						$ngt5++;
					}
					$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt6 = 0;
					foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
					{
						if(!empty($cltn6_val['BookAppointment']))
						{
							$ngt66 = 1;
							foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
							{
								if($app_cltn6_val['status'] == 1)
								{
									$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
									$ngt66++;
								}
							}
						}
						$ngt6++;
					}
					$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt7 = 0;
					foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
					{
						if(!empty($cltn7_val['BookAppointment']))
						{
							$ngt77 = 1;
							foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
							{
								if($app_cltn7_val['status'] == 1)
								{
									$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
									$ngt77++;
								}
							}
						}
						$ngt7++;
					}
					
					$expl_clinic_address = explode('*',$vl['DoctorClinic']['clinic_address']);
					$search_doctor[$g]['DoctorClinic']['clinic_id'] = $vl['DoctorClinic']['id'];
					$search_doctor[$g]['DoctorClinic']['clinic_name'] = $vl['DoctorClinic']['clinic_name'];
					$search_doctor[$g]['DoctorClinic']['clinic_add1'] = $expl_clinic_address[0];
					$search_doctor[$g]['DoctorClinic']['clinic_add2'] = $expl_clinic_address[1];
					
					$search_doctor[$g]['DoctorClinic']['doctor_id'] = $doc_detail['Doctor']['id'];
					$search_doctor[$g]['DoctorClinic']['doctor_title'] = $doc_detail['Doctor']['title'];
					$search_doctor[$g]['DoctorClinic']['doctor_f_name'] = $doc_detail['Doctor']['first_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_l_name'] = $doc_detail['Doctor']['last_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_gender'] = $doc_detail['Doctor']['gender'];
					$search_doctor[$g]['DoctorClinic']['doctor_image'] = $doc_detail['Doctor']['image'];
					$search_doctor[$g]['DoctorClinic']['appointment_activation'] = $doc_detail['Doctor']['appointment_activation'];
					$search_doctor[$g]['DoctorClinic']['doctor_locality'] = $doc_detail['Doctor']['locality'];
					$search_doctor[$g]['DoctorClinic']['doctor_cons_fee'] = $doc_detail['Doctor']['cons_fee'];
					$search_doctor[$g]['DoctorClinic']['doctor_home_fee'] = $doc_detail['Doctor']['home_fee'];
					
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
						
					//$search_doctor[$g]['Doctor']['clinic_count'] = $count_cl;
					$search_doctor[$g]['DoctorClinic']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
					
					$state_name = $this->State->find('first',array('conditions'=>array('State.id'=>$vl['DoctorClinic']['state'])));
					$city_name = $this->StateCity->find('first',array('conditions'=>array('StateCity.id'=>$vl['DoctorClinic']['city'])));
					$search_doctor[$g]['DoctorClinic']['state_name'] = $state_name['State']['name'];
					$search_doctor[$g]['DoctorClinic']['city_name'] = $city_name['StateCity']['city_name'];
					$g++;
				}
				if($count == 4)
				{
					$clinic_count = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['DoctorClinic']['doctor_id'])));
					$search_doctor[$g]['DoctorClinic']['clinic_count'] = $clinic_count;
					
					$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
					$special_2 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[1]."'");
					$special_3 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[2]."'");
					$special_4 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[3]."'");
					$search_doctor[$g]['DoctorClinic']['speciality'] = $special_1[0]['specializations']['display_name'].' , '.$special_2[0]['specializations']['display_name'].' , '.$special_3[0]['specializations']['display_name'].' , '.$special_4[0]['specializations']['display_name'];
					$doc_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$vl['DoctorClinic']['doctor_id'])));
					//$find_clinic = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					
					//$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					$search_doctor[$g]['DoctorClinic']['appoint_activate'] = $doc_detail['Doctor']['appointment_activation'];
					
					$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					
					
					if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$search_doctor[$g]['DoctorClinic']['day1'] = 'Mo'; $search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$search_doctor[$g]['DoctorClinic']['day2'] = 'Tu'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$search_doctor[$g]['DoctorClinic']['day3'] = 'We'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$search_doctor[$g]['DoctorClinic']['day4'] = 'Th'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$search_doctor[$g]['DoctorClinic']['day5'] = 'Fr'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$search_doctor[$g]['DoctorClinic']['day6'] = 'Sa'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$search_doctor[$g]['DoctorClinic']['day7'] = 'Su'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
					
					
					$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$mor1 = 0;
					foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
					{
						if(!empty($cltm1_val['BookAppointment']))
						{
							$mor11 = 1;
							foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
							{
								if($app_cltm1_val['status'] == 1)
								{
									$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
									$mor11++;
								}
							}
						}
						$mor1++;
					}
					$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$mor2 = 0;
					foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
					{
						if(!empty($cltm2_val['BookAppointment']))
						{
							$mor22 = 1;
							foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
							{
								if($app_cltm2_val['status'] == 1)
								{
									$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
									$mor22++;
								}
							}
						}
						$mor2++;
					}
					$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$mor3 = 0;
					foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
					{
						if(!empty($cltm3_val['BookAppointment']))
						{
							$mor33 = 1;
							foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
							{
								if($app_cltm3_val['status'] == 1)
								{
									$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
									$mor33++;
								}
							}
						}
						$mor3++;
					}
					$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$mor4 = 0;
					foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
					{
						if(!empty($cltm4_val['BookAppointment']))
						{
							$mor44 = 1;
							foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
							{
								if($app_cltm4_val['status'] == 1)
								{
									$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
									$mor44++;
								}
							}
						}
						$mor4++;
					}
					$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$mor5 = 0;
					foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
					{
						if(!empty($cltm5_val['BookAppointment']))
						{
							$mor55 = 1;
							foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
							{
								if($app_cltm5_val['status'] == 1)
								{
									$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
									$mor55++;
								}
							}
						}
						$mor5++;
					}
					$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$mor6 = 0;
					foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
					{
						if(!empty($cltm6_val['BookAppointment']))
						{
							$mor66 = 1;
							foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
							{
								if($app_cltm6_val['status'] == 1)
								{
									$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
									$mor66++;
								}
							}
						}
						$mor6++;
					}
					$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$mor7 = 0;
					foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
					{
						if(!empty($cltm7_val['BookAppointment']))
						{
							$mor77 = 1;
							foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
							{
								if($app_cltm7_val['status'] == 1)
								{
									$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
									$mor77++;
								}
							}
						}
						$mor7++;
					}
					
					$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$aft1 = 0;
					foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
					{
						if(!empty($clta1_val['BookAppointment']))
						{
							$aft11 = 1;
							foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
							{
								if($app_clta1_val['status'] == 1)
								{
									$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
									$aft11++;
								}
							}
						}
						$aft1++;
					}
					$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$aft2 = 0;
					foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
					{
						if(!empty($clta2_val['BookAppointment']))
						{
							$aft22 = 1;
							foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
							{
								if($app_clta2_val['status'] == 1)
								{
									$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
									$aft22++;
								}
							}
						}
						$aft2++;
					}
					$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$aft3 = 0;
					foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
					{
						if(!empty($clta3_val['BookAppointment']))
						{
							$aft33 = 1;
							foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
							{
								if($app_clta3_val['status'] == 1)
								{
									$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
									$aft33++;
								}
							}
						}
						$aft3++;
					}
					$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$aft4 = 0;
					foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
					{
						if(!empty($clta4_val['BookAppointment']))
						{
							$aft44 = 1;
							foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
							{
								if($app_clta4_val['status'] == 1)
								{
									$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
									$aft44++;
								}
							}
						}
						$aft4++;
					}
					$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$aft5 = 0;
					foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
					{
						if(!empty($clta5_val['BookAppointment']))
						{
							$aft55 = 1;
							foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
							{
								if($app_clta5_val['status'] == 1)
								{
									$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
									$aft55++;
								}
							}
						}
						$aft5++;
					}
					$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$aft6 = 0;
					foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
					{
						if(!empty($clta6_val['BookAppointment']))
						{
							$aft66 = 1;
							foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
							{
								if($app_clta6_val['status'] == 1)
								{
									$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
									$aft66++;
								}
							}
						}
						$aft6++;
					}
					$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$aft7 = 0;
					foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
					{
						if(!empty($clta7_val['BookAppointment']))
						{
							$aft77 = 1;
							foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
							{
								if($app_clta7_val['status'] == 1)
								{
									$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
									$aft77++;
								}
							}
						}
						$aft7++;
					}
					
					$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$evn1 = 0;
					foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
					{
						if(!empty($clte1_val['BookAppointment']))
						{
							$evn11 = 1;
							foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
							{
								if($app_clte1_val['status'] == 1)
								{
									$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
									$evn11++;
								}
							}
						}
						$evn1++;
					}
					$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$evn2 = 0;
					foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
					{
						if(!empty($clte2_val['BookAppointment']))
						{
							$evn22 = 1;
							foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
							{
								if($app_clte2_val['status'] == 1)
								{
									$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
									$evn22++;
								}
							}
						}
						$evn2++;
					}
					$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$evn3 = 0;
					foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
					{
						if(!empty($clte3_val['BookAppointment']))
						{
							$evn33 = 1;
							foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
							{
								if($app_clte3_val['status'] == 1)
								{
									$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
									$evn33++;
								}
							}
						}
						$evn3++;
					}
					$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$evn4 = 0;
					foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
					{
						if(!empty($clte4_val['BookAppointment']))
						{
							$evn44 = 1;
							foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
							{
								if($app_clte4_val['status'] == 1)
								{
									$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
									$evn44++;
								}
							}
						}
						$evn4++;
					}
					$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$evn5 = 0;
					foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
					{
						if(!empty($clte5_val['BookAppointment']))
						{
							$evn55 = 1;
							foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
							{
								if($app_clte5_val['status'] == 1)
								{
									$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
									$evn55++;
								}
							}
						}
						$evn5++;
					}
					$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$evn6 = 0;
					foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
					{
						if(!empty($clte6_val['BookAppointment']))
						{
							$evn66 = 1;
							foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
							{
								if($app_clte6_val['status'] == 1)
								{
									$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
									$evn66++;
								}
							}
						}
						$evn6++;
					}
					$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$evn7 = 0;
					foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
					{
						if(!empty($clte7_val['BookAppointment']))
						{
							$evn77 = 1;
							foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
							{
								if($app_clte7_val['status'] == 1)
								{
									$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
									$evn77++;
								}
							}
						}
						$evn7++;
					}
					
					$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt1 = 0;
					foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
					{
						if(!empty($cltn1_val['BookAppointment']))
						{
							$ngt11 = 1;
							foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
							{
								if($app_cltn1_val['status'] == 1)
								{
									$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
									$ngt11++;
								}
							}
						}
						$ngt1++;
					}
					$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt2 = 0;
					foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
					{
						if(!empty($cltn2_val['BookAppointment']))
						{
							$ngt22 = 1;
							foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
							{
								if($app_cltn2_val['status'] == 1)
								{
									$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
									$ngt22++;
								}
							}
						}
						$ngt2++;
					}
					$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt3 = 0;
					foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
					{
						if(!empty($cltn3_val['BookAppointment']))
						{
							$ngt33 = 1;
							foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
							{
								if($app_cltn3_val['status'] == 1)
								{
									$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
									$ngt33++;
								}
							}
						}
						$ngt3++;
					}
					$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt4 = 0;
					foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
					{
						if(!empty($cltn4_val['BookAppointment']))
						{
							$ngt44 = 1;
							foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
							{
								if($app_cltn4_val['status'] == 1)
								{
									$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
									$ngt44++;
								}
							}
						}
						$ngt4++;
					}
					$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt5 = 0;
					foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
					{
						if(!empty($cltn5_val['BookAppointment']))
						{
							$ngt55 = 1;
							foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
							{
								if($app_cltn5_val['status'] == 1)
								{
									$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
									$ngt55++;
								}
							}
						}
						$ngt5++;
					}
					$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt6 = 0;
					foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
					{
						if(!empty($cltn6_val['BookAppointment']))
						{
							$ngt66 = 1;
							foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
							{
								if($app_cltn6_val['status'] == 1)
								{
									$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
									$ngt66++;
								}
							}
						}
						$ngt6++;
					}
					$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt7 = 0;
					foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
					{
						if(!empty($cltn7_val['BookAppointment']))
						{
							$ngt77 = 1;
							foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
							{
								if($app_cltn7_val['status'] == 1)
								{
									$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
									$ngt77++;
								}
							}
						}
						$ngt7++;
					}
					
					$expl_clinic_address = explode('*',$vl['DoctorClinic']['clinic_address']);
					$search_doctor[$g]['DoctorClinic']['clinic_id'] = $vl['DoctorClinic']['id'];
					$search_doctor[$g]['DoctorClinic']['clinic_name'] = $vl['DoctorClinic']['clinic_name'];
					$search_doctor[$g]['DoctorClinic']['clinic_add1'] = $expl_clinic_address[0];
					$search_doctor[$g]['DoctorClinic']['clinic_add2'] = $expl_clinic_address[1];
					
					$search_doctor[$g]['DoctorClinic']['doctor_id'] = $doc_detail['Doctor']['id'];
					$search_doctor[$g]['DoctorClinic']['doctor_title'] = $doc_detail['Doctor']['title'];
					$search_doctor[$g]['DoctorClinic']['doctor_f_name'] = $doc_detail['Doctor']['first_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_l_name'] = $doc_detail['Doctor']['last_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_gender'] = $doc_detail['Doctor']['gender'];
					$search_doctor[$g]['DoctorClinic']['doctor_image'] = $doc_detail['Doctor']['image'];
					$search_doctor[$g]['DoctorClinic']['appointment_activation'] = $doc_detail['Doctor']['appointment_activation'];
					$search_doctor[$g]['DoctorClinic']['doctor_locality'] = $doc_detail['Doctor']['locality'];
					$search_doctor[$g]['DoctorClinic']['doctor_cons_fee'] = $doc_detail['Doctor']['cons_fee'];
					$search_doctor[$g]['DoctorClinic']['doctor_home_fee'] = $doc_detail['Doctor']['home_fee'];
					
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
						
					//$search_doctor[$g]['Doctor']['clinic_count'] = $count_cl;
					$search_doctor[$g]['DoctorClinic']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
					
					$state_name = $this->State->find('first',array('conditions'=>array('State.id'=>$vl['DoctorClinic']['state'])));
					$city_name = $this->StateCity->find('first',array('conditions'=>array('StateCity.id'=>$vl['DoctorClinic']['city'])));
					$search_doctor[$g]['DoctorClinic']['state_name'] = $state_name['State']['name'];
					$search_doctor[$g]['DoctorClinic']['city_name'] = $city_name['StateCity']['city_name'];
					$g++;
				}
				if($count == 5)
				{
					$clinic_count = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['DoctorClinic']['doctor_id'])));
					$search_doctor[$g]['DoctorClinic']['clinic_count'] = $clinic_count;
					
					$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
					$special_2 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[1]."'");
					$special_3 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[2]."'");
					$special_4 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[3]."'");
					$special_5 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[4]."'");
					$search_doctor[$g]['DoctorClinic']['speciality'] = $special_1[0]['specializations']['display_name'].' , '.$special_2[0]['specializations']['display_name'].' , '.$special_3[0]['specializations']['display_name'].' , '.$special_4[0]['specializations']['display_name'].' , '.$special_5[0]['specializations']['display_name'];
					$doc_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$vl['DoctorClinic']['doctor_id'])));
					//$find_clinic = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					
					//$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					$search_doctor[$g]['DoctorClinic']['appoint_activate'] = $doc_detail['Doctor']['appointment_activation'];
					
					$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					
					
					if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$search_doctor[$g]['DoctorClinic']['day1'] = 'Mo'; $search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$search_doctor[$g]['DoctorClinic']['day2'] = 'Tu'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$search_doctor[$g]['DoctorClinic']['day3'] = 'We'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$search_doctor[$g]['DoctorClinic']['day4'] = 'Th'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$search_doctor[$g]['DoctorClinic']['day5'] = 'Fr'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$search_doctor[$g]['DoctorClinic']['day6'] = 'Sa'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$search_doctor[$g]['DoctorClinic']['day7'] = 'Su'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
					
					
					$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$mor1 = 0;
					foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
					{
						if(!empty($cltm1_val['BookAppointment']))
						{
							$mor11 = 1;
							foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
							{
								if($app_cltm1_val['status'] == 1)
								{
									$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
									$mor11++;
								}
							}
						}
						$mor1++;
					}
					$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$mor2 = 0;
					foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
					{
						if(!empty($cltm2_val['BookAppointment']))
						{
							$mor22 = 1;
							foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
							{
								if($app_cltm2_val['status'] == 1)
								{
									$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
									$mor22++;
								}
							}
						}
						$mor2++;
					}
					$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$mor3 = 0;
					foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
					{
						if(!empty($cltm3_val['BookAppointment']))
						{
							$mor33 = 1;
							foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
							{
								if($app_cltm3_val['status'] == 1)
								{
									$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
									$mor33++;
								}
							}
						}
						$mor3++;
					}
					$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$mor4 = 0;
					foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
					{
						if(!empty($cltm4_val['BookAppointment']))
						{
							$mor44 = 1;
							foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
							{
								if($app_cltm4_val['status'] == 1)
								{
									$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
									$mor44++;
								}
							}
						}
						$mor4++;
					}
					$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$mor5 = 0;
					foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
					{
						if(!empty($cltm5_val['BookAppointment']))
						{
							$mor55 = 1;
							foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
							{
								if($app_cltm5_val['status'] == 1)
								{
									$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
									$mor55++;
								}
							}
						}
						$mor5++;
					}
					$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$mor6 = 0;
					foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
					{
						if(!empty($cltm6_val['BookAppointment']))
						{
							$mor66 = 1;
							foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
							{
								if($app_cltm6_val['status'] == 1)
								{
									$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
									$mor66++;
								}
							}
						}
						$mor6++;
					}
					$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$mor7 = 0;
					foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
					{
						if(!empty($cltm7_val['BookAppointment']))
						{
							$mor77 = 1;
							foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
							{
								if($app_cltm7_val['status'] == 1)
								{
									$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
									$mor77++;
								}
							}
						}
						$mor7++;
					}
					
					$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$aft1 = 0;
					foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
					{
						if(!empty($clta1_val['BookAppointment']))
						{
							$aft11 = 1;
							foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
							{
								if($app_clta1_val['status'] == 1)
								{
									$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
									$aft11++;
								}
							}
						}
						$aft1++;
					}
					$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$aft2 = 0;
					foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
					{
						if(!empty($clta2_val['BookAppointment']))
						{
							$aft22 = 1;
							foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
							{
								if($app_clta2_val['status'] == 1)
								{
									$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
									$aft22++;
								}
							}
						}
						$aft2++;
					}
					$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$aft3 = 0;
					foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
					{
						if(!empty($clta3_val['BookAppointment']))
						{
							$aft33 = 1;
							foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
							{
								if($app_clta3_val['status'] == 1)
								{
									$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
									$aft33++;
								}
							}
						}
						$aft3++;
					}
					$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$aft4 = 0;
					foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
					{
						if(!empty($clta4_val['BookAppointment']))
						{
							$aft44 = 1;
							foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
							{
								if($app_clta4_val['status'] == 1)
								{
									$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
									$aft44++;
								}
							}
						}
						$aft4++;
					}
					$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$aft5 = 0;
					foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
					{
						if(!empty($clta5_val['BookAppointment']))
						{
							$aft55 = 1;
							foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
							{
								if($app_clta5_val['status'] == 1)
								{
									$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
									$aft55++;
								}
							}
						}
						$aft5++;
					}
					$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$aft6 = 0;
					foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
					{
						if(!empty($clta6_val['BookAppointment']))
						{
							$aft66 = 1;
							foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
							{
								if($app_clta6_val['status'] == 1)
								{
									$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
									$aft66++;
								}
							}
						}
						$aft6++;
					}
					$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$aft7 = 0;
					foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
					{
						if(!empty($clta7_val['BookAppointment']))
						{
							$aft77 = 1;
							foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
							{
								if($app_clta7_val['status'] == 1)
								{
									$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
									$aft77++;
								}
							}
						}
						$aft7++;
					}
					
					$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$evn1 = 0;
					foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
					{
						if(!empty($clte1_val['BookAppointment']))
						{
							$evn11 = 1;
							foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
							{
								if($app_clte1_val['status'] == 1)
								{
									$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
									$evn11++;
								}
							}
						}
						$evn1++;
					}
					$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$evn2 = 0;
					foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
					{
						if(!empty($clte2_val['BookAppointment']))
						{
							$evn22 = 1;
							foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
							{
								if($app_clte2_val['status'] == 1)
								{
									$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
									$evn22++;
								}
							}
						}
						$evn2++;
					}
					$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$evn3 = 0;
					foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
					{
						if(!empty($clte3_val['BookAppointment']))
						{
							$evn33 = 1;
							foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
							{
								if($app_clte3_val['status'] == 1)
								{
									$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
									$evn33++;
								}
							}
						}
						$evn3++;
					}
					$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$evn4 = 0;
					foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
					{
						if(!empty($clte4_val['BookAppointment']))
						{
							$evn44 = 1;
							foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
							{
								if($app_clte4_val['status'] == 1)
								{
									$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
									$evn44++;
								}
							}
						}
						$evn4++;
					}
					$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$evn5 = 0;
					foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
					{
						if(!empty($clte5_val['BookAppointment']))
						{
							$evn55 = 1;
							foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
							{
								if($app_clte5_val['status'] == 1)
								{
									$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
									$evn55++;
								}
							}
						}
						$evn5++;
					}
					$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$evn6 = 0;
					foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
					{
						if(!empty($clte6_val['BookAppointment']))
						{
							$evn66 = 1;
							foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
							{
								if($app_clte6_val['status'] == 1)
								{
									$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
									$evn66++;
								}
							}
						}
						$evn6++;
					}
					$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$evn7 = 0;
					foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
					{
						if(!empty($clte7_val['BookAppointment']))
						{
							$evn77 = 1;
							foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
							{
								if($app_clte7_val['status'] == 1)
								{
									$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
									$evn77++;
								}
							}
						}
						$evn7++;
					}
					
					$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt1 = 0;
					foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
					{
						if(!empty($cltn1_val['BookAppointment']))
						{
							$ngt11 = 1;
							foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
							{
								if($app_cltn1_val['status'] == 1)
								{
									$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
									$ngt11++;
								}
							}
						}
						$ngt1++;
					}
					$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt2 = 0;
					foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
					{
						if(!empty($cltn2_val['BookAppointment']))
						{
							$ngt22 = 1;
							foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
							{
								if($app_cltn2_val['status'] == 1)
								{
									$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
									$ngt22++;
								}
							}
						}
						$ngt2++;
					}
					$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt3 = 0;
					foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
					{
						if(!empty($cltn3_val['BookAppointment']))
						{
							$ngt33 = 1;
							foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
							{
								if($app_cltn3_val['status'] == 1)
								{
									$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
									$ngt33++;
								}
							}
						}
						$ngt3++;
					}
					$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt4 = 0;
					foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
					{
						if(!empty($cltn4_val['BookAppointment']))
						{
							$ngt44 = 1;
							foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
							{
								if($app_cltn4_val['status'] == 1)
								{
									$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
									$ngt44++;
								}
							}
						}
						$ngt4++;
					}
					$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt5 = 0;
					foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
					{
						if(!empty($cltn5_val['BookAppointment']))
						{
							$ngt55 = 1;
							foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
							{
								if($app_cltn5_val['status'] == 1)
								{
									$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
									$ngt55++;
								}
							}
						}
						$ngt5++;
					}
					$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt6 = 0;
					foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
					{
						if(!empty($cltn6_val['BookAppointment']))
						{
							$ngt66 = 1;
							foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
							{
								if($app_cltn6_val['status'] == 1)
								{
									$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
									$ngt66++;
								}
							}
						}
						$ngt6++;
					}
					$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt7 = 0;
					foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
					{
						if(!empty($cltn7_val['BookAppointment']))
						{
							$ngt77 = 1;
							foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
							{
								if($app_cltn7_val['status'] == 1)
								{
									$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
									$ngt77++;
								}
							}
						}
						$ngt7++;
					}
					
					$expl_clinic_address = explode('*',$vl['DoctorClinic']['clinic_address']);
					$search_doctor[$g]['DoctorClinic']['clinic_id'] = $vl['DoctorClinic']['id'];
					$search_doctor[$g]['DoctorClinic']['clinic_name'] = $vl['DoctorClinic']['clinic_name'];
					$search_doctor[$g]['DoctorClinic']['clinic_add1'] = $expl_clinic_address[0];
					$search_doctor[$g]['DoctorClinic']['clinic_add2'] = $expl_clinic_address[1];
					
					$search_doctor[$g]['DoctorClinic']['doctor_id'] = $doc_detail['Doctor']['id'];
					$search_doctor[$g]['DoctorClinic']['doctor_title'] = $doc_detail['Doctor']['title'];
					$search_doctor[$g]['DoctorClinic']['doctor_f_name'] = $doc_detail['Doctor']['first_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_l_name'] = $doc_detail['Doctor']['last_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_gender'] = $doc_detail['Doctor']['gender'];
					$search_doctor[$g]['DoctorClinic']['doctor_image'] = $doc_detail['Doctor']['image'];
					$search_doctor[$g]['DoctorClinic']['appointment_activation'] = $doc_detail['Doctor']['appointment_activation'];
					$search_doctor[$g]['DoctorClinic']['doctor_locality'] = $doc_detail['Doctor']['locality'];
					$search_doctor[$g]['DoctorClinic']['doctor_cons_fee'] = $doc_detail['Doctor']['cons_fee'];
					$search_doctor[$g]['DoctorClinic']['doctor_home_fee'] = $doc_detail['Doctor']['home_fee'];
					$search_doctor[$g]['DoctorClinic']['own_desc'] = $doc_detail['Doctor']['own_desc'];
					if($doc_detail['Doctor']['admin_featured'] == 1)
					{
						$search_doctor[$g]['DoctorClinic']['admin_featured'] = 1;
					}
					else
					{
						$search_doctor[$g]['DoctorClinic']['admin_featured'] = 0;
					}
					
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
						
					//$search_doctor[$g]['Doctor']['clinic_count'] = $count_cl;
					$search_doctor[$g]['DoctorClinic']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
					
					$state_name = $this->State->find('first',array('conditions'=>array('State.id'=>$vl['DoctorClinic']['state'])));
					$city_name = $this->StateCity->find('first',array('conditions'=>array('StateCity.id'=>$vl['DoctorClinic']['city'])));
					$search_doctor[$g]['DoctorClinic']['state_name'] = $state_name['State']['name'];
					$search_doctor[$g]['DoctorClinic']['city_name'] = $city_name['StateCity']['city_name'];
					$g++;
				}
				
				if(!empty($this->data['SearchDoctor']['state']))
				{
					$state_city = $this->StateCity->find('all',array('conditions'=>array('StateCity.state_id'=>$this->data['SearchDoctor']['state'])));
				}
				
				$this->set('search_name',$clinic_name);
				$this->set('search_speciality',$doc_speciality);
				$this->set('search_speciality_id',$doc_speciality_id);
				$this->set('search_state',$doc_state_name);
				$this->set('search_state_id',$doc_state_id);
				$this->set('search_city',$doc_city_name);
				$this->set('search_city_id',$doc_city_id);
				
			}
			
			$entry_doctor = $this->DoctorClinic->find('all',array('conditions'=>$conditions,'group'=>array('DoctorClinic.doctor_id')));
			//echo "<pre>"; print_r($entry_doctor); exit;
			$count_result = count($entry_doctor);
			$get_user_max_val = $this->SearchedDoctor->query("SELECT MAX(user_temp_id) FROM searched_doctor");
			$x = 1;
			foreach($entry_doctor as $d_key => $d_val)
			{
				
				if($x == 1)
				{
					$sess_user_id = $this->Session->read('UserTempId');
					if($get_user_max_val[0][0]['MAX(user_temp_id)'] == '')
					{
						$this->data['SearchedDoctor']['user_temp_id'] = 1000;
						$this->Session->write('UserTempId',$this->data['SearchedDoctor']['user_temp_id']);
					}
					if($get_user_max_val[0][0]['MAX(user_temp_id)'] != '' && empty($sess_user_id))
					{
						$this->data['SearchedDoctor']['user_temp_id'] = ($get_user_max_val[0][0]['MAX(user_temp_id)'] + 1);
						$this->Session->write('UserTempId',$this->data['SearchedDoctor']['user_temp_id']);
					}
					if($get_user_max_val[0][0]['MAX(user_temp_id)'] != '' && !empty($sess_user_id))
					{
						$this->data['SearchedDoctor']['user_temp_id'] = $sess_user_id;
					}
				}
				else
				{
					$this->data['SearchedDoctor']['user_temp_id'] = $this->Session->read('UserTempId');
				}
				$this->data['SearchedDoctor']['clinic_id'] = $d_val['DoctorClinic']['id'];
				$this->data['SearchedDoctor']['doctor_featured'] = $d_val['DoctorClinic']['featured'];
				$this->data['SearchedDoctor']['state'] = $d_val['DoctorClinic']['state'];
				$this->data['SearchedDoctor']['city'] = $d_val['DoctorClinic']['city'];
				$this->data['SearchedDoctor']['cons_fee'] = $d_val['DoctorClinic']['cons_fee'];
				$this->data['SearchedDoctor']['avail_day'] = $d_val['DoctorClinic']['avail_day'];
				
				$check_duplicate = $this->SearchedDoctor->find('first',array('conditions'=>array('SearchedDoctor.user_temp_id'=>$this->Session->read('UserTempId'),'SearchedDoctor.doctor_featured'=>$d_val['DoctorClinic']['featured'],'SearchedDoctor.state'=>$d_val['DoctorClinic']['state'],'SearchedDoctor.city'=>$d_val['DoctorClinic']['city'],'SearchedDoctor.cons_fee'=>$d_val['DoctorClinic']['cons_fee'],'SearchedDoctor.avail_day'=>$d_val['DoctorClinic']['avail_day'],'SearchedDoctor.clinic_id'=>$d_val['DoctorClinic']['id'])));
				if(empty($check_duplicate))
				{
					if($this->SearchedDoctor->create($this->data))
					{
						if($this->SearchedDoctor->save($this->data))
						{
							$x++;
						}
					}
				}
			}
			
			//echo "<pre>"; print_r($search_doctor); exit;
			
			$this->set('user_temp_id',$sess_user_id);
			$this->set('options',$options);
			$this->set('search_doctor',$search_doctor);
			$user_detail = $this->Session->read('UserDetail');
			$this->set('user_detail',$user_detail);
			$this->set('result_count',$count_result);
		}
		else
		{
			$this->redirect('/');
		}
	}
	
	function filter_doctor($filter_feature=NULL,$filter_day=NULL,$filter_fee=NULL,$filter_user_temp=NULL,$doc_name=NULL,$appoint_date=NULL,$appoint_time=NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Filtered Doctor List');
		
		if(isset($this->params['named']['user_temp']) && $this->params['named']['user_temp']!='')
		{
			$this->data['Filter']['user_temp_id'] = $this->params['named']['user_temp'];
			$options['user_temp'] = $this->params['named']['user_temp'];
		}
		if(isset($this->params['named']['doctor_feature']) && $this->params['named']['doctor_feature']!='')
		{
			$this->data['Filter']['doctor_feature'] = $this->params['named']['doctor_feature'];
			$options['doctor_feature'] = $this->params['named']['doctor_feature'];
		}
		if(isset($this->params['named']['avail_day']) && $this->params['named']['avail_day']!='')
		{
			$this->data['Filter']['day_avail'] = $this->params['named']['avail_day'];
			$options['avail_day'] = $this->params['named']['avail_day'];
		}
		if(isset($this->params['named']['cons_fee']) && $this->params['named']['cons_fee']!='')
		{
			$this->data['Filter']['cons_fee'] = $this->params['named']['cons_fee'];
			$options['cons_fee'] = $this->params['named']['cons_fee'];
		}
		if(isset($this->params['named']['day_avail']) && $this->params['named']['day_avail']!='')
		{
			$this->data['Filter']['day_avail'] = $this->params['named']['day_avail'];
			$options['day_avail'] = $this->params['named']['day_avail'];
		}
		
		if(!empty($filter_feature) && $filter_feature != ''){if(base64_decode($filter_feature) != 'NO'){$this->data['Filter']['doctor_feature'] = base64_decode($filter_feature);}else{$this->data['Filter']['doctor_feature'] = '';}}
		if(!empty($filter_day) && $filter_day != ''){if(base64_decode($filter_day) != 'NO'){$this->data['Filter']['day_avail'] = base64_decode($filter_day);}else{$this->data['Filter']['day_avail'] = '';}}
		if(!empty($filter_fee) && $filter_fee != ''){if(base64_decode($filter_fee) != 'NO'){$this->data['Filter']['cons_fee'] = base64_decode($filter_fee);}else{$this->data['Filter']['cons_fee'] = '';}}
		if(!empty($filter_user_temp) && $filter_user_temp != ''){if(base64_decode($filter_user_temp) != 'NO'){$this->data['Filter']['user_temp_id'] = base64_decode($filter_user_temp);}else{$this->data['Filter']['user_temp_id'] = '';}}
		
		//echo "<pre>"; print_r($this->data); exit;
		
		$this->set('dec_doc_name',base64_decode($doc_name));
		$this->set('dec_appoint_date',base64_decode($appoint_date));
		$this->set('dec_appoint_time',base64_decode($appoint_time));
		
		//echo "<pre>"; print_r($this->data); exit;
		
		if(!empty($this->data))
		{
			//echo "<pre>"; print_r($this->data); exit;			
			if(!empty($this->data['Filter']['user_temp_id']) && $this->data['Filter']['user_temp_id'] != '')
			{
				$conditions['SearchedDoctor.user_temp_id'] = $this->data['Filter']['user_temp_id'];
				$options['user_temp'] = $this->data['Filter']['user_temp_id'];
			}
			if(!empty($this->data['Filter']['doctor_feature']) && $this->data['Filter']['doctor_feature'] != '')
			{
				$conditions['SearchedDoctor.doctor_featured'] = 
				$options['doctor_feature'] = $this->data['Filter']['doctor_feature'];
			}
			if(!empty($this->data['Filter']['day_avail']) && $this->data['Filter']['day_avail'] != '')
			{
				$conditions['SearchedDoctor.avail_day LIKE'] = '%'.$this->data['Filter']['day_avail'].'%';
				$options['avail_day'] = $this->data['Filter']['day_avail'];
			}
			if(!empty($this->data['Filter']['cons_fee']) && $this->data['Filter']['cons_fee'] != '')
			{
				$expl_cons_fee = explode(';',$this->data['Filter']['cons_fee']);
				//$conditions = array('User.created' =>array('Between',$start,$end));
				$conditions['SearchedDoctor.cons_fee >='] = $expl_cons_fee[0];
				$conditions['SearchedDoctor.cons_fee <='] = $expl_cons_fee[1];
				$options['cons_fee'] = $this->data['Filter']['cons_fee'];
			}
			//echo "<pre>"; print_r($conditions); exit;
			$this->paginate = array('SearchedDoctor' => array('limit' => '5', 'conditions' =>$conditions , 'order' => 'SearchedDoctor.id DESC'));
			$search_doctor = $this->paginate('SearchedDoctor');
			//echo "<pre>"; print_r($search_doctor); exit;
			$g = 0;
			foreach($search_doctor as $keey => $vaal)
			{
				$vl = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.id'=>$vaal['SearchedDoctor']['clinic_id'])));
				$expl_special = explode(',',$vl['DoctorClinic']['special']);
				$count = count($expl_special);
				if($count == 1)
				{
					$clinic_count = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['DoctorClinic']['doctor_id'])));
					$search_doctor[$g]['DoctorClinic']['clinic_count'] = $clinic_count;
					
					$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
					$search_doctor[$g]['DoctorClinic']['speciality'] = $special_1[0]['specializations']['display_name'];
					$doc_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$vl['DoctorClinic']['doctor_id'])));
					//$find_clinic = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					
					//$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					$search_doctor[$g]['DoctorClinic']['appoint_activate'] = $doc_detail['Doctor']['appointment_activation'];
					$search_doctor[$g]['DoctorClinic']['id'] = $vl['DoctorClinic']['id'];
					
					$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					
					
					if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$search_doctor[$g]['DoctorClinic']['day1'] = 'Mo'; $search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$search_doctor[$g]['DoctorClinic']['day2'] = 'Tu'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$search_doctor[$g]['DoctorClinic']['day3'] = 'We'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$search_doctor[$g]['DoctorClinic']['day4'] = 'Th'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$search_doctor[$g]['DoctorClinic']['day5'] = 'Fr'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$search_doctor[$g]['DoctorClinic']['day6'] = 'Sa'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$search_doctor[$g]['DoctorClinic']['day7'] = 'Su'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
					
					
					$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$mor1 = 0;
					foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
					{
						if(!empty($cltm1_val['BookAppointment']))
						{
							$mor11 = 1;
							foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
							{
								if($app_cltm1_val['status'] == 1)
								{
									$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
									$mor11++;
								}
							}
						}
						$mor1++;
					}
					$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$mor2 = 0;
					foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
					{
						if(!empty($cltm2_val['BookAppointment']))
						{
							$mor22 = 1;
							foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
							{
								if($app_cltm2_val['status'] == 1)
								{
									$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
									$mor22++;
								}
							}
						}
						$mor2++;
					}
					$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$mor3 = 0;
					foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
					{
						if(!empty($cltm3_val['BookAppointment']))
						{
							$mor33 = 1;
							foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
							{
								if($app_cltm3_val['status'] == 1)
								{
									$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
									$mor33++;
								}
							}
						}
						$mor3++;
					}
					$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$mor4 = 0;
					foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
					{
						if(!empty($cltm4_val['BookAppointment']))
						{
							$mor44 = 1;
							foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
							{
								if($app_cltm4_val['status'] == 1)
								{
									$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
									$mor44++;
								}
							}
						}
						$mor4++;
					}
					$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$mor5 = 0;
					foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
					{
						if(!empty($cltm5_val['BookAppointment']))
						{
							$mor55 = 1;
							foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
							{
								if($app_cltm5_val['status'] == 1)
								{
									$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
									$mor55++;
								}
							}
						}
						$mor5++;
					}
					$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$mor6 = 0;
					foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
					{
						if(!empty($cltm6_val['BookAppointment']))
						{
							$mor66 = 1;
							foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
							{
								if($app_cltm6_val['status'] == 1)
								{
									$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
									$mor66++;
								}
							}
						}
						$mor6++;
					}
					$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$mor7 = 0;
					foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
					{
						if(!empty($cltm7_val['BookAppointment']))
						{
							$mor77 = 1;
							foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
							{
								if($app_cltm7_val['status'] == 1)
								{
									$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
									$mor77++;
								}
							}
						}
						$mor7++;
					}
					
					$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$aft1 = 0;
					foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
					{
						if(!empty($clta1_val['BookAppointment']))
						{
							$aft11 = 1;
							foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
							{
								if($app_clta1_val['status'] == 1)
								{
									$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
									$aft11++;
								}
							}
						}
						$aft1++;
					}
					$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$aft2 = 0;
					foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
					{
						if(!empty($clta2_val['BookAppointment']))
						{
							$aft22 = 1;
							foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
							{
								if($app_clta2_val['status'] == 1)
								{
									$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
									$aft22++;
								}
							}
						}
						$aft2++;
					}
					$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$aft3 = 0;
					foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
					{
						if(!empty($clta3_val['BookAppointment']))
						{
							$aft33 = 1;
							foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
							{
								if($app_clta3_val['status'] == 1)
								{
									$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
									$aft33++;
								}
							}
						}
						$aft3++;
					}
					$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$aft4 = 0;
					foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
					{
						if(!empty($clta4_val['BookAppointment']))
						{
							$aft44 = 1;
							foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
							{
								if($app_clta4_val['status'] == 1)
								{
									$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
									$aft44++;
								}
							}
						}
						$aft4++;
					}
					$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$aft5 = 0;
					foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
					{
						if(!empty($clta5_val['BookAppointment']))
						{
							$aft55 = 1;
							foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
							{
								if($app_clta5_val['status'] == 1)
								{
									$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
									$aft55++;
								}
							}
						}
						$aft5++;
					}
					$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$aft6 = 0;
					foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
					{
						if(!empty($clta6_val['BookAppointment']))
						{
							$aft66 = 1;
							foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
							{
								if($app_clta6_val['status'] == 1)
								{
									$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
									$aft66++;
								}
							}
						}
						$aft6++;
					}
					$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$aft7 = 0;
					foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
					{
						if(!empty($clta7_val['BookAppointment']))
						{
							$aft77 = 1;
							foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
							{
								if($app_clta7_val['status'] == 1)
								{
									$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
									$aft77++;
								}
							}
						}
						$aft7++;
					}
					
					$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$evn1 = 0;
					foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
					{
						if(!empty($clte1_val['BookAppointment']))
						{
							$evn11 = 1;
							foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
							{
								if($app_clte1_val['status'] == 1)
								{
									$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
									$evn11++;
								}
							}
						}
						$evn1++;
					}
					$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$evn2 = 0;
					foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
					{
						if(!empty($clte2_val['BookAppointment']))
						{
							$evn22 = 1;
							foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
							{
								if($app_clte2_val['status'] == 1)
								{
									$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
									$evn22++;
								}
							}
						}
						$evn2++;
					}
					$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$evn3 = 0;
					foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
					{
						if(!empty($clte3_val['BookAppointment']))
						{
							$evn33 = 1;
							foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
							{
								if($app_clte3_val['status'] == 1)
								{
									$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
									$evn33++;
								}
							}
						}
						$evn3++;
					}
					$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$evn4 = 0;
					foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
					{
						if(!empty($clte4_val['BookAppointment']))
						{
							$evn44 = 1;
							foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
							{
								if($app_clte4_val['status'] == 1)
								{
									$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
									$evn44++;
								}
							}
						}
						$evn4++;
					}
					$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$evn5 = 0;
					foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
					{
						if(!empty($clte5_val['BookAppointment']))
						{
							$evn55 = 1;
							foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
							{
								if($app_clte5_val['status'] == 1)
								{
									$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
									$evn55++;
								}
							}
						}
						$evn5++;
					}
					$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$evn6 = 0;
					foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
					{
						if(!empty($clte6_val['BookAppointment']))
						{
							$evn66 = 1;
							foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
							{
								if($app_clte6_val['status'] == 1)
								{
									$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
									$evn66++;
								}
							}
						}
						$evn6++;
					}
					$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$evn7 = 0;
					foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
					{
						if(!empty($clte7_val['BookAppointment']))
						{
							$evn77 = 1;
							foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
							{
								if($app_clte7_val['status'] == 1)
								{
									$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
									$evn77++;
								}
							}
						}
						$evn7++;
					}
					
					$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt1 = 0;
					foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
					{
						if(!empty($cltn1_val['BookAppointment']))
						{
							$ngt11 = 1;
							foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
							{
								if($app_cltn1_val['status'] == 1)
								{
									$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
									$ngt11++;
								}
							}
						}
						$ngt1++;
					}
					$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt2 = 0;
					foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
					{
						if(!empty($cltn2_val['BookAppointment']))
						{
							$ngt22 = 1;
							foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
							{
								if($app_cltn2_val['status'] == 1)
								{
									$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
									$ngt22++;
								}
							}
						}
						$ngt2++;
					}
					$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt3 = 0;
					foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
					{
						if(!empty($cltn3_val['BookAppointment']))
						{
							$ngt33 = 1;
							foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
							{
								if($app_cltn3_val['status'] == 1)
								{
									$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
									$ngt33++;
								}
							}
						}
						$ngt3++;
					}
					$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt4 = 0;
					foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
					{
						if(!empty($cltn4_val['BookAppointment']))
						{
							$ngt44 = 1;
							foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
							{
								if($app_cltn4_val['status'] == 1)
								{
									$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
									$ngt44++;
								}
							}
						}
						$ngt4++;
					}
					$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt5 = 0;
					foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
					{
						if(!empty($cltn5_val['BookAppointment']))
						{
							$ngt55 = 1;
							foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
							{
								if($app_cltn5_val['status'] == 1)
								{
									$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
									$ngt55++;
								}
							}
						}
						$ngt5++;
					}
					$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt6 = 0;
					foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
					{
						if(!empty($cltn6_val['BookAppointment']))
						{
							$ngt66 = 1;
							foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
							{
								if($app_cltn6_val['status'] == 1)
								{
									$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
									$ngt66++;
								}
							}
						}
						$ngt6++;
					}
					$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt7 = 0;
					foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
					{
						if(!empty($cltn7_val['BookAppointment']))
						{
							$ngt77 = 1;
							foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
							{
								if($app_cltn7_val['status'] == 1)
								{
									$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
									$ngt77++;
								}
							}
						}
						$ngt7++;
					}
					
					$expl_clinic_address = explode('*',$vl['DoctorClinic']['clinic_address']);
					$search_doctor[$g]['DoctorClinic']['clinic_id'] = $vl['DoctorClinic']['id'];
					$search_doctor[$g]['DoctorClinic']['clinic_name'] = $vl['DoctorClinic']['clinic_name'];
					$search_doctor[$g]['DoctorClinic']['clinic_add1'] = $expl_clinic_address[0];
					$search_doctor[$g]['DoctorClinic']['clinic_add2'] = $expl_clinic_address[1];
					
					$search_doctor[$g]['DoctorClinic']['doctor_id'] = $doc_detail['Doctor']['id'];
					$search_doctor[$g]['DoctorClinic']['doctor_title'] = $doc_detail['Doctor']['title'];
					$search_doctor[$g]['DoctorClinic']['doctor_f_name'] = $doc_detail['Doctor']['first_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_l_name'] = $doc_detail['Doctor']['last_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_gender'] = $doc_detail['Doctor']['gender'];
					$search_doctor[$g]['DoctorClinic']['doctor_image'] = $doc_detail['Doctor']['image'];
					$search_doctor[$g]['DoctorClinic']['doctor_locality'] = $doc_detail['Doctor']['locality'];
					$search_doctor[$g]['DoctorClinic']['doctor_cons_fee'] = $doc_detail['Doctor']['cons_fee'];
					$search_doctor[$g]['DoctorClinic']['doctor_home_fee'] = $doc_detail['Doctor']['home_fee'];
					
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
						
					//$search_doctor[$g]['Doctor']['clinic_count'] = $count_cl;
					$search_doctor[$g]['DoctorClinic']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
					
					$state_name = $this->State->find('first',array('conditions'=>array('State.id'=>$vl['DoctorClinic']['state'])));
					$city_name = $this->StateCity->find('first',array('conditions'=>array('StateCity.id'=>$vl['DoctorClinic']['city'])));
					$search_doctor[$g]['DoctorClinic']['state_name'] = $state_name['State']['name'];
					$search_doctor[$g]['DoctorClinic']['city_name'] = $city_name['StateCity']['city_name'];
					$g++;
				}
				if($count == 2)
				{
					$clinic_count = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['DoctorClinic']['doctor_id'])));
					$search_doctor[$g]['DoctorClinic']['clinic_count'] = $clinic_count;
					
					$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
					$special_2 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[1]."'");
					$search_doctor[$g]['DoctorClinic']['speciality'] = $special_1[0]['specializations']['display_name'].' , '.$special_2[0]['specializations']['display_name'];
					$doc_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$vl['DoctorClinic']['doctor_id'])));
					//$find_clinic = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					
					//$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					$search_doctor[$g]['DoctorClinic']['appoint_activate'] = $doc_detail['Doctor']['appointment_activation'];
					
					$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					
					
					if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$search_doctor[$g]['DoctorClinic']['day1'] = 'Mo'; $search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$search_doctor[$g]['DoctorClinic']['day2'] = 'Tu'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$search_doctor[$g]['DoctorClinic']['day3'] = 'We'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$search_doctor[$g]['DoctorClinic']['day4'] = 'Th'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$search_doctor[$g]['DoctorClinic']['day5'] = 'Fr'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$search_doctor[$g]['DoctorClinic']['day6'] = 'Sa'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$search_doctor[$g]['DoctorClinic']['day7'] = 'Su'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
					
					
					$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$mor1 = 0;
					foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
					{
						if(!empty($cltm1_val['BookAppointment']))
						{
							$mor11 = 1;
							foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
							{
								if($app_cltm1_val['status'] == 1)
								{
									$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
									$mor11++;
								}
							}
						}
						$mor1++;
					}
					$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$mor2 = 0;
					foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
					{
						if(!empty($cltm2_val['BookAppointment']))
						{
							$mor22 = 1;
							foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
							{
								if($app_cltm2_val['status'] == 1)
								{
									$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
									$mor22++;
								}
							}
						}
						$mor2++;
					}
					$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$mor3 = 0;
					foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
					{
						if(!empty($cltm3_val['BookAppointment']))
						{
							$mor33 = 1;
							foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
							{
								if($app_cltm3_val['status'] == 1)
								{
									$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
									$mor33++;
								}
							}
						}
						$mor3++;
					}
					$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$mor4 = 0;
					foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
					{
						if(!empty($cltm4_val['BookAppointment']))
						{
							$mor44 = 1;
							foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
							{
								if($app_cltm4_val['status'] == 1)
								{
									$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
									$mor44++;
								}
							}
						}
						$mor4++;
					}
					$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$mor5 = 0;
					foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
					{
						if(!empty($cltm5_val['BookAppointment']))
						{
							$mor55 = 1;
							foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
							{
								if($app_cltm5_val['status'] == 1)
								{
									$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
									$mor55++;
								}
							}
						}
						$mor5++;
					}
					$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$mor6 = 0;
					foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
					{
						if(!empty($cltm6_val['BookAppointment']))
						{
							$mor66 = 1;
							foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
							{
								if($app_cltm6_val['status'] == 1)
								{
									$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
									$mor66++;
								}
							}
						}
						$mor6++;
					}
					$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$mor7 = 0;
					foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
					{
						if(!empty($cltm7_val['BookAppointment']))
						{
							$mor77 = 1;
							foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
							{
								if($app_cltm7_val['status'] == 1)
								{
									$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
									$mor77++;
								}
							}
						}
						$mor7++;
					}
					
					$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$aft1 = 0;
					foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
					{
						if(!empty($clta1_val['BookAppointment']))
						{
							$aft11 = 1;
							foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
							{
								if($app_clta1_val['status'] == 1)
								{
									$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
									$aft11++;
								}
							}
						}
						$aft1++;
					}
					$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$aft2 = 0;
					foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
					{
						if(!empty($clta2_val['BookAppointment']))
						{
							$aft22 = 1;
							foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
							{
								if($app_clta2_val['status'] == 1)
								{
									$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
									$aft22++;
								}
							}
						}
						$aft2++;
					}
					$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$aft3 = 0;
					foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
					{
						if(!empty($clta3_val['BookAppointment']))
						{
							$aft33 = 1;
							foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
							{
								if($app_clta3_val['status'] == 1)
								{
									$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
									$aft33++;
								}
							}
						}
						$aft3++;
					}
					$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$aft4 = 0;
					foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
					{
						if(!empty($clta4_val['BookAppointment']))
						{
							$aft44 = 1;
							foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
							{
								if($app_clta4_val['status'] == 1)
								{
									$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
									$aft44++;
								}
							}
						}
						$aft4++;
					}
					$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$aft5 = 0;
					foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
					{
						if(!empty($clta5_val['BookAppointment']))
						{
							$aft55 = 1;
							foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
							{
								if($app_clta5_val['status'] == 1)
								{
									$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
									$aft55++;
								}
							}
						}
						$aft5++;
					}
					$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$aft6 = 0;
					foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
					{
						if(!empty($clta6_val['BookAppointment']))
						{
							$aft66 = 1;
							foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
							{
								if($app_clta6_val['status'] == 1)
								{
									$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
									$aft66++;
								}
							}
						}
						$aft6++;
					}
					$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$aft7 = 0;
					foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
					{
						if(!empty($clta7_val['BookAppointment']))
						{
							$aft77 = 1;
							foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
							{
								if($app_clta7_val['status'] == 1)
								{
									$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
									$aft77++;
								}
							}
						}
						$aft7++;
					}
					
					$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$evn1 = 0;
					foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
					{
						if(!empty($clte1_val['BookAppointment']))
						{
							$evn11 = 1;
							foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
							{
								if($app_clte1_val['status'] == 1)
								{
									$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
									$evn11++;
								}
							}
						}
						$evn1++;
					}
					$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$evn2 = 0;
					foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
					{
						if(!empty($clte2_val['BookAppointment']))
						{
							$evn22 = 1;
							foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
							{
								if($app_clte2_val['status'] == 1)
								{
									$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
									$evn22++;
								}
							}
						}
						$evn2++;
					}
					$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$evn3 = 0;
					foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
					{
						if(!empty($clte3_val['BookAppointment']))
						{
							$evn33 = 1;
							foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
							{
								if($app_clte3_val['status'] == 1)
								{
									$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
									$evn33++;
								}
							}
						}
						$evn3++;
					}
					$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$evn4 = 0;
					foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
					{
						if(!empty($clte4_val['BookAppointment']))
						{
							$evn44 = 1;
							foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
							{
								if($app_clte4_val['status'] == 1)
								{
									$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
									$evn44++;
								}
							}
						}
						$evn4++;
					}
					$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$evn5 = 0;
					foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
					{
						if(!empty($clte5_val['BookAppointment']))
						{
							$evn55 = 1;
							foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
							{
								if($app_clte5_val['status'] == 1)
								{
									$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
									$evn55++;
								}
							}
						}
						$evn5++;
					}
					$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$evn6 = 0;
					foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
					{
						if(!empty($clte6_val['BookAppointment']))
						{
							$evn66 = 1;
							foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
							{
								if($app_clte6_val['status'] == 1)
								{
									$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
									$evn66++;
								}
							}
						}
						$evn6++;
					}
					$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$evn7 = 0;
					foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
					{
						if(!empty($clte7_val['BookAppointment']))
						{
							$evn77 = 1;
							foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
							{
								if($app_clte7_val['status'] == 1)
								{
									$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
									$evn77++;
								}
							}
						}
						$evn7++;
					}
					
					$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt1 = 0;
					foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
					{
						if(!empty($cltn1_val['BookAppointment']))
						{
							$ngt11 = 1;
							foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
							{
								if($app_cltn1_val['status'] == 1)
								{
									$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
									$ngt11++;
								}
							}
						}
						$ngt1++;
					}
					$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt2 = 0;
					foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
					{
						if(!empty($cltn2_val['BookAppointment']))
						{
							$ngt22 = 1;
							foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
							{
								if($app_cltn2_val['status'] == 1)
								{
									$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
									$ngt22++;
								}
							}
						}
						$ngt2++;
					}
					$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt3 = 0;
					foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
					{
						if(!empty($cltn3_val['BookAppointment']))
						{
							$ngt33 = 1;
							foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
							{
								if($app_cltn3_val['status'] == 1)
								{
									$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
									$ngt33++;
								}
							}
						}
						$ngt3++;
					}
					$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt4 = 0;
					foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
					{
						if(!empty($cltn4_val['BookAppointment']))
						{
							$ngt44 = 1;
							foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
							{
								if($app_cltn4_val['status'] == 1)
								{
									$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
									$ngt44++;
								}
							}
						}
						$ngt4++;
					}
					$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt5 = 0;
					foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
					{
						if(!empty($cltn5_val['BookAppointment']))
						{
							$ngt55 = 1;
							foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
							{
								if($app_cltn5_val['status'] == 1)
								{
									$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
									$ngt55++;
								}
							}
						}
						$ngt5++;
					}
					$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt6 = 0;
					foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
					{
						if(!empty($cltn6_val['BookAppointment']))
						{
							$ngt66 = 1;
							foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
							{
								if($app_cltn6_val['status'] == 1)
								{
									$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
									$ngt66++;
								}
							}
						}
						$ngt6++;
					}
					$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt7 = 0;
					foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
					{
						if(!empty($cltn7_val['BookAppointment']))
						{
							$ngt77 = 1;
							foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
							{
								if($app_cltn7_val['status'] == 1)
								{
									$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
									$ngt77++;
								}
							}
						}
						$ngt7++;
					}
					
					$expl_clinic_address = explode('*',$vl['DoctorClinic']['clinic_address']);
					$search_doctor[$g]['DoctorClinic']['clinic_id'] = $vl['DoctorClinic']['id'];
					$search_doctor[$g]['DoctorClinic']['clinic_name'] = $vl['DoctorClinic']['clinic_name'];
					$search_doctor[$g]['DoctorClinic']['clinic_add1'] = $expl_clinic_address[0];
					$search_doctor[$g]['DoctorClinic']['clinic_add2'] = $expl_clinic_address[1];
					
					$search_doctor[$g]['DoctorClinic']['doctor_id'] = $doc_detail['Doctor']['id'];
					$search_doctor[$g]['DoctorClinic']['doctor_title'] = $doc_detail['Doctor']['title'];
					$search_doctor[$g]['DoctorClinic']['doctor_f_name'] = $doc_detail['Doctor']['first_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_l_name'] = $doc_detail['Doctor']['last_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_gender'] = $doc_detail['Doctor']['gender'];
					$search_doctor[$g]['DoctorClinic']['doctor_image'] = $doc_detail['Doctor']['image'];
					$search_doctor[$g]['DoctorClinic']['doctor_locality'] = $doc_detail['Doctor']['locality'];
					$search_doctor[$g]['DoctorClinic']['doctor_cons_fee'] = $doc_detail['Doctor']['cons_fee'];
					$search_doctor[$g]['DoctorClinic']['doctor_home_fee'] = $doc_detail['Doctor']['home_fee'];
					
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
						
					//$search_doctor[$g]['Doctor']['clinic_count'] = $count_cl;
					$search_doctor[$g]['DoctorClinic']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
					
					$state_name = $this->State->find('first',array('conditions'=>array('State.id'=>$vl['DoctorClinic']['state'])));
					$city_name = $this->StateCity->find('first',array('conditions'=>array('StateCity.id'=>$vl['DoctorClinic']['city'])));
					$search_doctor[$g]['DoctorClinic']['state_name'] = $state_name['State']['name'];
					$search_doctor[$g]['DoctorClinic']['city_name'] = $city_name['StateCity']['city_name'];
					
					$search_doctor[$g]['DoctorClinic']['id'] = $vl['DoctorClinic']['id'];
					$g++;
				}
				if($count == 3)
				{
					$clinic_count = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['DoctorClinic']['doctor_id'])));
					$search_doctor[$g]['DoctorClinic']['clinic_count'] = $clinic_count;
					
					$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
					$special_2 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[1]."'");
					$special_3 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[2]."'");
					$search_doctor[$g]['DoctorClinic']['speciality'] = $special_1[0]['specializations']['display_name'].' , '.$special_2[0]['specializations']['display_name'].' , '.$special_3[0]['specializations']['display_name'];
					$doc_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$vl['DoctorClinic']['doctor_id'])));
					//$find_clinic = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					
					//$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					$search_doctor[$g]['DoctorClinic']['appoint_activate'] = $doc_detail['Doctor']['appointment_activation'];
					
					$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					
					
					if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$search_doctor[$g]['DoctorClinic']['day1'] = 'Mo'; $search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$search_doctor[$g]['DoctorClinic']['day2'] = 'Tu'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$search_doctor[$g]['DoctorClinic']['day3'] = 'We'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$search_doctor[$g]['DoctorClinic']['day4'] = 'Th'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$search_doctor[$g]['DoctorClinic']['day5'] = 'Fr'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$search_doctor[$g]['DoctorClinic']['day6'] = 'Sa'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$search_doctor[$g]['DoctorClinic']['day7'] = 'Su'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
					
					
					$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$mor1 = 0;
					foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
					{
						if(!empty($cltm1_val['BookAppointment']))
						{
							$mor11 = 1;
							foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
							{
								if($app_cltm1_val['status'] == 1)
								{
									$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
									$mor11++;
								}
							}
						}
						$mor1++;
					}
					$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$mor2 = 0;
					foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
					{
						if(!empty($cltm2_val['BookAppointment']))
						{
							$mor22 = 1;
							foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
							{
								if($app_cltm2_val['status'] == 1)
								{
									$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
									$mor22++;
								}
							}
						}
						$mor2++;
					}
					$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$mor3 = 0;
					foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
					{
						if(!empty($cltm3_val['BookAppointment']))
						{
							$mor33 = 1;
							foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
							{
								if($app_cltm3_val['status'] == 1)
								{
									$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
									$mor33++;
								}
							}
						}
						$mor3++;
					}
					$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$mor4 = 0;
					foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
					{
						if(!empty($cltm4_val['BookAppointment']))
						{
							$mor44 = 1;
							foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
							{
								if($app_cltm4_val['status'] == 1)
								{
									$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
									$mor44++;
								}
							}
						}
						$mor4++;
					}
					$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$mor5 = 0;
					foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
					{
						if(!empty($cltm5_val['BookAppointment']))
						{
							$mor55 = 1;
							foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
							{
								if($app_cltm5_val['status'] == 1)
								{
									$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
									$mor55++;
								}
							}
						}
						$mor5++;
					}
					$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$mor6 = 0;
					foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
					{
						if(!empty($cltm6_val['BookAppointment']))
						{
							$mor66 = 1;
							foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
							{
								if($app_cltm6_val['status'] == 1)
								{
									$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
									$mor66++;
								}
							}
						}
						$mor6++;
					}
					$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$mor7 = 0;
					foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
					{
						if(!empty($cltm7_val['BookAppointment']))
						{
							$mor77 = 1;
							foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
							{
								if($app_cltm7_val['status'] == 1)
								{
									$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
									$mor77++;
								}
							}
						}
						$mor7++;
					}
					
					$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$aft1 = 0;
					foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
					{
						if(!empty($clta1_val['BookAppointment']))
						{
							$aft11 = 1;
							foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
							{
								if($app_clta1_val['status'] == 1)
								{
									$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
									$aft11++;
								}
							}
						}
						$aft1++;
					}
					$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$aft2 = 0;
					foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
					{
						if(!empty($clta2_val['BookAppointment']))
						{
							$aft22 = 1;
							foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
							{
								if($app_clta2_val['status'] == 1)
								{
									$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
									$aft22++;
								}
							}
						}
						$aft2++;
					}
					$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$aft3 = 0;
					foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
					{
						if(!empty($clta3_val['BookAppointment']))
						{
							$aft33 = 1;
							foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
							{
								if($app_clta3_val['status'] == 1)
								{
									$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
									$aft33++;
								}
							}
						}
						$aft3++;
					}
					$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$aft4 = 0;
					foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
					{
						if(!empty($clta4_val['BookAppointment']))
						{
							$aft44 = 1;
							foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
							{
								if($app_clta4_val['status'] == 1)
								{
									$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
									$aft44++;
								}
							}
						}
						$aft4++;
					}
					$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$aft5 = 0;
					foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
					{
						if(!empty($clta5_val['BookAppointment']))
						{
							$aft55 = 1;
							foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
							{
								if($app_clta5_val['status'] == 1)
								{
									$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
									$aft55++;
								}
							}

						}
						$aft5++;
					}
					$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$aft6 = 0;
					foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
					{
						if(!empty($clta6_val['BookAppointment']))
						{
							$aft66 = 1;
							foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
							{
								if($app_clta6_val['status'] == 1)
								{
									$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
									$aft66++;
								}
							}
						}
						$aft6++;
					}
					$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$aft7 = 0;
					foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
					{
						if(!empty($clta7_val['BookAppointment']))
						{
							$aft77 = 1;
							foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
							{
								if($app_clta7_val['status'] == 1)
								{
									$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
									$aft77++;
								}
							}
						}
						$aft7++;
					}
					
					$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$evn1 = 0;
					foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
					{
						if(!empty($clte1_val['BookAppointment']))
						{
							$evn11 = 1;
							foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
							{
								if($app_clte1_val['status'] == 1)
								{
									$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
									$evn11++;
								}
							}
						}
						$evn1++;
					}
					$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$evn2 = 0;
					foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
					{
						if(!empty($clte2_val['BookAppointment']))
						{
							$evn22 = 1;
							foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
							{
								if($app_clte2_val['status'] == 1)
								{
									$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
									$evn22++;
								}
							}
						}
						$evn2++;
					}

					$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$evn3 = 0;
					foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
					{
						if(!empty($clte3_val['BookAppointment']))
						{
							$evn33 = 1;
							foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
							{
								if($app_clte3_val['status'] == 1)
								{
									$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
									$evn33++;
								}
							}
						}
						$evn3++;
					}
					$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$evn4 = 0;
					foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
					{
						if(!empty($clte4_val['BookAppointment']))
						{
							$evn44 = 1;
							foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
							{
								if($app_clte4_val['status'] == 1)
								{
									$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
									$evn44++;
								}
							}
						}
						$evn4++;
					}
					$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$evn5 = 0;
					foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
					{
						if(!empty($clte5_val['BookAppointment']))
						{
							$evn55 = 1;
							foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
							{
								if($app_clte5_val['status'] == 1)
								{
									$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
									$evn55++;
								}
							}
						}
						$evn5++;
					}
					$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$evn6 = 0;
					foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
					{
						if(!empty($clte6_val['BookAppointment']))
						{
							$evn66 = 1;
							foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
							{
								if($app_clte6_val['status'] == 1)
								{
									$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
									$evn66++;
								}
							}
						}
						$evn6++;
					}
					$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$evn7 = 0;
					foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
					{
						if(!empty($clte7_val['BookAppointment']))
						{
							$evn77 = 1;
							foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
							{
								if($app_clte7_val['status'] == 1)
								{
									$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
									$evn77++;
								}
							}
						}
						$evn7++;
					}
					
					$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt1 = 0;
					foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
					{
						if(!empty($cltn1_val['BookAppointment']))
						{
							$ngt11 = 1;
							foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
							{
								if($app_cltn1_val['status'] == 1)
								{
									$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
									$ngt11++;
								}
							}
						}
						$ngt1++;
					}
					$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt2 = 0;
					foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
					{
						if(!empty($cltn2_val['BookAppointment']))
						{
							$ngt22 = 1;
							foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
							{
								if($app_cltn2_val['status'] == 1)
								{
									$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
									$ngt22++;
								}
							}
						}
						$ngt2++;
					}
					$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt3 = 0;
					foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
					{
						if(!empty($cltn3_val['BookAppointment']))
						{
							$ngt33 = 1;
							foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
							{
								if($app_cltn3_val['status'] == 1)
								{
									$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
									$ngt33++;
								}
							}
						}
						$ngt3++;
					}
					$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt4 = 0;
					foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
					{
						if(!empty($cltn4_val['BookAppointment']))
						{
							$ngt44 = 1;
							foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
							{
								if($app_cltn4_val['status'] == 1)
								{
									$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
									$ngt44++;
								}
							}
						}
						$ngt4++;
					}
					$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt5 = 0;
					foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
					{
						if(!empty($cltn5_val['BookAppointment']))
						{
							$ngt55 = 1;
							foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
							{
								if($app_cltn5_val['status'] == 1)
								{
									$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
									$ngt55++;
								}
							}
						}
						$ngt5++;
					}
					$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt6 = 0;
					foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
					{
						if(!empty($cltn6_val['BookAppointment']))
						{
							$ngt66 = 1;
							foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
							{
								if($app_cltn6_val['status'] == 1)
								{
									$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
									$ngt66++;
								}
							}
						}
						$ngt6++;
					}
					$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt7 = 0;
					foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
					{
						if(!empty($cltn7_val['BookAppointment']))
						{
							$ngt77 = 1;
							foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
							{
								if($app_cltn7_val['status'] == 1)
								{
									$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
									$ngt77++;
								}
							}
						}
						$ngt7++;
					}
					
					$expl_clinic_address = explode('*',$vl['DoctorClinic']['clinic_address']);
					$search_doctor[$g]['DoctorClinic']['clinic_id'] = $vl['DoctorClinic']['id'];
					$search_doctor[$g]['DoctorClinic']['clinic_name'] = $vl['DoctorClinic']['clinic_name'];
					$search_doctor[$g]['DoctorClinic']['clinic_add1'] = $expl_clinic_address[0];
					$search_doctor[$g]['DoctorClinic']['clinic_add2'] = $expl_clinic_address[1];
					
					$search_doctor[$g]['DoctorClinic']['doctor_id'] = $doc_detail['Doctor']['id'];
					$search_doctor[$g]['DoctorClinic']['doctor_title'] = $doc_detail['Doctor']['title'];
					$search_doctor[$g]['DoctorClinic']['doctor_f_name'] = $doc_detail['Doctor']['first_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_l_name'] = $doc_detail['Doctor']['last_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_gender'] = $doc_detail['Doctor']['gender'];
					$search_doctor[$g]['DoctorClinic']['doctor_image'] = $doc_detail['Doctor']['image'];
					$search_doctor[$g]['DoctorClinic']['doctor_locality'] = $doc_detail['Doctor']['locality'];
					$search_doctor[$g]['DoctorClinic']['doctor_cons_fee'] = $doc_detail['Doctor']['cons_fee'];
					$search_doctor[$g]['DoctorClinic']['doctor_home_fee'] = $doc_detail['Doctor']['home_fee'];
					
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
						
					//$search_doctor[$g]['Doctor']['clinic_count'] = $count_cl;
					$search_doctor[$g]['DoctorClinic']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
					
					$state_name = $this->State->find('first',array('conditions'=>array('State.id'=>$vl['DoctorClinic']['state'])));
					$city_name = $this->StateCity->find('first',array('conditions'=>array('StateCity.id'=>$vl['DoctorClinic']['city'])));
					$search_doctor[$g]['DoctorClinic']['state_name'] = $state_name['State']['name'];
					$search_doctor[$g]['DoctorClinic']['city_name'] = $city_name['StateCity']['city_name'];
					
					$search_doctor[$g]['DoctorClinic']['id'] = $vl['DoctorClinic']['id'];
					$g++;
				}
				if($count == 4)
				{
					$clinic_count = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['DoctorClinic']['doctor_id'])));
					$search_doctor[$g]['DoctorClinic']['clinic_count'] = $clinic_count;
					
					$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
					$special_2 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[1]."'");
					$special_3 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[2]."'");
					$special_4 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[3]."'");
					$search_doctor[$g]['DoctorClinic']['speciality'] = $special_1[0]['specializations']['display_name'].' , '.$special_2[0]['specializations']['display_name'].' , '.$special_3[0]['specializations']['display_name'].' , '.$special_4[0]['specializations']['display_name'];
					$doc_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$vl['DoctorClinic']['doctor_id'])));
					//$find_clinic = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					
					//$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					$search_doctor[$g]['DoctorClinic']['appoint_activate'] = $doc_detail['Doctor']['appointment_activation'];
					
					$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					
					
					if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$search_doctor[$g]['DoctorClinic']['day1'] = 'Mo'; $search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$search_doctor[$g]['DoctorClinic']['day2'] = 'Tu'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$search_doctor[$g]['DoctorClinic']['day3'] = 'We'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$search_doctor[$g]['DoctorClinic']['day4'] = 'Th'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$search_doctor[$g]['DoctorClinic']['day5'] = 'Fr'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$search_doctor[$g]['DoctorClinic']['day6'] = 'Sa'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$search_doctor[$g]['DoctorClinic']['day7'] = 'Su'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
					
					
					$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$mor1 = 0;
					foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
					{
						if(!empty($cltm1_val['BookAppointment']))
						{
							$mor11 = 1;
							foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
							{
								if($app_cltm1_val['status'] == 1)
								{
									$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
									$mor11++;
								}
							}
						}
						$mor1++;
					}
					$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$mor2 = 0;
					foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
					{
						if(!empty($cltm2_val['BookAppointment']))
						{
							$mor22 = 1;
							foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
							{
								if($app_cltm2_val['status'] == 1)
								{
									$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
									$mor22++;
								}
							}
						}
						$mor2++;
					}
					$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$mor3 = 0;
					foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
					{
						if(!empty($cltm3_val['BookAppointment']))
						{
							$mor33 = 1;
							foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
							{
								if($app_cltm3_val['status'] == 1)
								{
									$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
									$mor33++;
								}
							}
						}
						$mor3++;
					}
					$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$mor4 = 0;
					foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
					{
						if(!empty($cltm4_val['BookAppointment']))
						{
							$mor44 = 1;
							foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
							{
								if($app_cltm4_val['status'] == 1)
								{
									$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
									$mor44++;
								}
							}
						}
						$mor4++;
					}
					$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$mor5 = 0;
					foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
					{
						if(!empty($cltm5_val['BookAppointment']))
						{
							$mor55 = 1;
							foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
							{
								if($app_cltm5_val['status'] == 1)
								{
									$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
									$mor55++;
								}
							}
						}
						$mor5++;
					}
					$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$mor6 = 0;
					foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
					{
						if(!empty($cltm6_val['BookAppointment']))
						{
							$mor66 = 1;
							foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
							{
								if($app_cltm6_val['status'] == 1)
								{
									$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
									$mor66++;
								}
							}
						}
						$mor6++;
					}
					$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$mor7 = 0;
					foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
					{
						if(!empty($cltm7_val['BookAppointment']))
						{
							$mor77 = 1;
							foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
							{
								if($app_cltm7_val['status'] == 1)
								{
									$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
									$mor77++;
								}
							}
						}
						$mor7++;
					}
					
					$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$aft1 = 0;
					foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
					{
						if(!empty($clta1_val['BookAppointment']))
						{
							$aft11 = 1;
							foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
							{
								if($app_clta1_val['status'] == 1)
								{
									$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
									$aft11++;
								}
							}
						}
						$aft1++;
					}
					$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$aft2 = 0;
					foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
					{
						if(!empty($clta2_val['BookAppointment']))
						{
							$aft22 = 1;
							foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
							{
								if($app_clta2_val['status'] == 1)
								{
									$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
									$aft22++;
								}
							}
						}
						$aft2++;
					}
					$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$aft3 = 0;
					foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
					{
						if(!empty($clta3_val['BookAppointment']))
						{
							$aft33 = 1;
							foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
							{
								if($app_clta3_val['status'] == 1)
								{
									$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
									$aft33++;
								}
							}
						}
						$aft3++;
					}
					$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$aft4 = 0;
					foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
					{
						if(!empty($clta4_val['BookAppointment']))
						{
							$aft44 = 1;
							foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
							{
								if($app_clta4_val['status'] == 1)
								{
									$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
									$aft44++;
								}
							}
						}
						$aft4++;
					}
					$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$aft5 = 0;
					foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
					{
						if(!empty($clta5_val['BookAppointment']))
						{
							$aft55 = 1;
							foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
							{
								if($app_clta5_val['status'] == 1)
								{
									$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
									$aft55++;
								}
							}
						}
						$aft5++;
					}
					$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$aft6 = 0;
					foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
					{
						if(!empty($clta6_val['BookAppointment']))
						{
							$aft66 = 1;
							foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
							{
								if($app_clta6_val['status'] == 1)
								{
									$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
									$aft66++;
								}
							}
						}
						$aft6++;
					}
					$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$aft7 = 0;
					foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
					{
						if(!empty($clta7_val['BookAppointment']))
						{
							$aft77 = 1;
							foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
							{
								if($app_clta7_val['status'] == 1)
								{
									$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
									$aft77++;
								}
							}
						}
						$aft7++;
					}
					
					$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$evn1 = 0;
					foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
					{
						if(!empty($clte1_val['BookAppointment']))
						{
							$evn11 = 1;
							foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
							{
								if($app_clte1_val['status'] == 1)
								{
									$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
									$evn11++;
								}
							}
						}
						$evn1++;
					}
					$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$evn2 = 0;
					foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
					{
						if(!empty($clte2_val['BookAppointment']))
						{
							$evn22 = 1;
							foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
							{
								if($app_clte2_val['status'] == 1)
								{
									$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
									$evn22++;
								}
							}
						}
						$evn2++;
					}
					$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$evn3 = 0;
					foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
					{
						if(!empty($clte3_val['BookAppointment']))
						{
							$evn33 = 1;
							foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
							{
								if($app_clte3_val['status'] == 1)
								{
									$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
									$evn33++;
								}
							}
						}
						$evn3++;
					}
					$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$evn4 = 0;
					foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
					{
						if(!empty($clte4_val['BookAppointment']))
						{
							$evn44 = 1;
							foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
							{
								if($app_clte4_val['status'] == 1)
								{
									$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
									$evn44++;
								}
							}
						}
						$evn4++;
					}
					$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$evn5 = 0;
					foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
					{
						if(!empty($clte5_val['BookAppointment']))
						{
							$evn55 = 1;
							foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
							{
								if($app_clte5_val['status'] == 1)
								{
									$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
									$evn55++;
								}
							}
						}
						$evn5++;
					}
					$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$evn6 = 0;
					foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
					{
						if(!empty($clte6_val['BookAppointment']))
						{
							$evn66 = 1;
							foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
							{
								if($app_clte6_val['status'] == 1)
								{
									$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
									$evn66++;
								}
							}
						}
						$evn6++;
					}
					$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$evn7 = 0;
					foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
					{
						if(!empty($clte7_val['BookAppointment']))
						{
							$evn77 = 1;
							foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
							{
								if($app_clte7_val['status'] == 1)
								{
									$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
									$evn77++;
								}
							}
						}
						$evn7++;
					}
					
					$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt1 = 0;
					foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
					{
						if(!empty($cltn1_val['BookAppointment']))
						{
							$ngt11 = 1;
							foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
							{
								if($app_cltn1_val['status'] == 1)
								{
									$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
									$ngt11++;
								}
							}
						}
						$ngt1++;
					}
					$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt2 = 0;
					foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
					{
						if(!empty($cltn2_val['BookAppointment']))
						{
							$ngt22 = 1;
							foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
							{
								if($app_cltn2_val['status'] == 1)
								{
									$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
									$ngt22++;
								}
							}
						}
						$ngt2++;
					}
					$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt3 = 0;
					foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
					{
						if(!empty($cltn3_val['BookAppointment']))
						{
							$ngt33 = 1;
							foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
							{
								if($app_cltn3_val['status'] == 1)
								{
									$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
									$ngt33++;
								}
							}
						}
						$ngt3++;
					}
					$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt4 = 0;
					foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
					{
						if(!empty($cltn4_val['BookAppointment']))
						{
							$ngt44 = 1;
							foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
							{
								if($app_cltn4_val['status'] == 1)
								{
									$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
									$ngt44++;
								}
							}
						}
						$ngt4++;
					}
					$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt5 = 0;
					foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
					{
						if(!empty($cltn5_val['BookAppointment']))
						{
							$ngt55 = 1;
							foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
							{
								if($app_cltn5_val['status'] == 1)
								{
									$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
									$ngt55++;
								}
							}
						}
						$ngt5++;
					}
					$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt6 = 0;
					foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
					{
						if(!empty($cltn6_val['BookAppointment']))
						{
							$ngt66 = 1;
							foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
							{
								if($app_cltn6_val['status'] == 1)
								{
									$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
									$ngt66++;
								}
							}
						}
						$ngt6++;
					}
					$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt7 = 0;
					foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
					{
						if(!empty($cltn7_val['BookAppointment']))
						{
							$ngt77 = 1;
							foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
							{
								if($app_cltn7_val['status'] == 1)
								{
									$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
									$ngt77++;
								}
							}
						}
						$ngt7++;
					}
					
					$expl_clinic_address = explode('*',$vl['DoctorClinic']['clinic_address']);
					$search_doctor[$g]['DoctorClinic']['clinic_id'] = $vl['DoctorClinic']['id'];
					$search_doctor[$g]['DoctorClinic']['clinic_name'] = $vl['DoctorClinic']['clinic_name'];
					$search_doctor[$g]['DoctorClinic']['clinic_add1'] = $expl_clinic_address[0];
					$search_doctor[$g]['DoctorClinic']['clinic_add2'] = $expl_clinic_address[1];
					
					$search_doctor[$g]['DoctorClinic']['doctor_id'] = $doc_detail['Doctor']['id'];
					$search_doctor[$g]['DoctorClinic']['doctor_title'] = $doc_detail['Doctor']['title'];
					$search_doctor[$g]['DoctorClinic']['doctor_f_name'] = $doc_detail['Doctor']['first_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_l_name'] = $doc_detail['Doctor']['last_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_gender'] = $doc_detail['Doctor']['gender'];
					$search_doctor[$g]['DoctorClinic']['doctor_image'] = $doc_detail['Doctor']['image'];
					$search_doctor[$g]['DoctorClinic']['doctor_locality'] = $doc_detail['Doctor']['locality'];
					$search_doctor[$g]['DoctorClinic']['doctor_cons_fee'] = $doc_detail['Doctor']['cons_fee'];
					$search_doctor[$g]['DoctorClinic']['doctor_home_fee'] = $doc_detail['Doctor']['home_fee'];
					
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;

					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
						
					//$search_doctor[$g]['Doctor']['clinic_count'] = $count_cl;
					$search_doctor[$g]['DoctorClinic']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
					
					$state_name = $this->State->find('first',array('conditions'=>array('State.id'=>$vl['DoctorClinic']['state'])));
					$city_name = $this->StateCity->find('first',array('conditions'=>array('StateCity.id'=>$vl['DoctorClinic']['city'])));
					$search_doctor[$g]['DoctorClinic']['state_name'] = $state_name['State']['name'];
					$search_doctor[$g]['DoctorClinic']['city_name'] = $city_name['StateCity']['city_name'];
					
					$search_doctor[$g]['DoctorClinic']['id'] = $vl['DoctorClinic']['id'];
					$g++;
				}
				if($count == 5)
				{
					$clinic_count = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['DoctorClinic']['doctor_id'])));
					$search_doctor[$g]['DoctorClinic']['clinic_count'] = $clinic_count;
					
					$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
					$special_2 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[1]."'");
					$special_3 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[2]."'");
					$special_4 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[3]."'");
					$special_5 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[4]."'");
					$search_doctor[$g]['DoctorClinic']['speciality'] = $special_1[0]['specializations']['display_name'].' , '.$special_2[0]['specializations']['display_name'].' , '.$special_3[0]['specializations']['display_name'].' , '.$special_4[0]['specializations']['display_name'].' , '.$special_5[0]['specializations']['display_name'];
					$doc_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$vl['DoctorClinic']['doctor_id'])));
					//$find_clinic = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					
					//$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$vl['Doctor']['id'])));
					$search_doctor[$g]['DoctorClinic']['appoint_activate'] = $doc_detail['Doctor']['appointment_activation'];
					
					$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
					$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
					
					
					if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$search_doctor[$g]['DoctorClinic']['day1'] = 'Mo'; $search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$search_doctor[$g]['DoctorClinic']['day2'] = 'Tu'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$search_doctor[$g]['DoctorClinic']['day3'] = 'We'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$search_doctor[$g]['DoctorClinic']['day4'] = 'Th'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$search_doctor[$g]['DoctorClinic']['day5'] = 'Fr'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$search_doctor[$g]['DoctorClinic']['day6'] = 'Sa'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
					
					if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$search_doctor[$g]['DoctorClinic']['day7'] = 'Su'; if(empty($search_doctor[$g]['DoctorClinic']['clinic_s_time'])){$search_doctor[$g]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$search_doctor[$g]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
					
					
					$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$mor1 = 0;
					foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
					{
						if(!empty($cltm1_val['BookAppointment']))
						{
							$mor11 = 1;
							foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
							{
								if($app_cltm1_val['status'] == 1)
								{
									$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
									$mor11++;
								}
							}
						}
						$mor1++;
					}
					$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$mor2 = 0;
					foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
					{
						if(!empty($cltm2_val['BookAppointment']))
						{
							$mor22 = 1;
							foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
							{
								if($app_cltm2_val['status'] == 1)
								{
									$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
									$mor22++;
								}
							}
						}
						$mor2++;
					}
					$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$mor3 = 0;
					foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
					{
						if(!empty($cltm3_val['BookAppointment']))
						{
							$mor33 = 1;
							foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
							{
								if($app_cltm3_val['status'] == 1)
								{
									$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
									$mor33++;
								}
							}
						}
						$mor3++;
					}
					$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$mor4 = 0;
					foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
					{
						if(!empty($cltm4_val['BookAppointment']))
						{
							$mor44 = 1;
							foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
							{
								if($app_cltm4_val['status'] == 1)
								{
									$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
									$mor44++;
								}
							}
						}
						$mor4++;
					}
					$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$mor5 = 0;
					foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
					{
						if(!empty($cltm5_val['BookAppointment']))
						{
							$mor55 = 1;
							foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
							{
								if($app_cltm5_val['status'] == 1)
								{
									$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
									$mor55++;
								}
							}
						}
						$mor5++;
					}
					$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$mor6 = 0;
					foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
					{
						if(!empty($cltm6_val['BookAppointment']))
						{
							$mor66 = 1;
							foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
							{
								if($app_cltm6_val['status'] == 1)
								{
									$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
									$mor66++;
								}
							}
						}
						$mor6++;
					}
					$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$mor7 = 0;
					foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
					{
						if(!empty($cltm7_val['BookAppointment']))
						{
							$mor77 = 1;
							foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
							{
								if($app_cltm7_val['status'] == 1)
								{
									$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
									$mor77++;
								}
							}
						}
						$mor7++;
					}
					
					$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$aft1 = 0;
					foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
					{
						if(!empty($clta1_val['BookAppointment']))
						{
							$aft11 = 1;
							foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
							{
								if($app_clta1_val['status'] == 1)
								{
									$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
									$aft11++;
								}
							}
						}
						$aft1++;
					}
					$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$aft2 = 0;
					foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
					{
						if(!empty($clta2_val['BookAppointment']))
						{
							$aft22 = 1;
							foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
							{
								if($app_clta2_val['status'] == 1)
								{
									$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
									$aft22++;
								}
							}
						}
						$aft2++;
					}
					$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$aft3 = 0;
					foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
					{
						if(!empty($clta3_val['BookAppointment']))
						{
							$aft33 = 1;
							foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
							{
								if($app_clta3_val['status'] == 1)
								{
									$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
									$aft33++;
								}
							}
						}
						$aft3++;
					}
					$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$aft4 = 0;
					foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
					{
						if(!empty($clta4_val['BookAppointment']))
						{
							$aft44 = 1;
							foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
							{
								if($app_clta4_val['status'] == 1)
								{
									$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
									$aft44++;
								}
							}
						}
						$aft4++;
					}
					$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$aft5 = 0;
					foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
					{
						if(!empty($clta5_val['BookAppointment']))
						{
							$aft55 = 1;
							foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
							{
								if($app_clta5_val['status'] == 1)
								{
									$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
									$aft55++;
								}
							}
						}
						$aft5++;
					}
					$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$aft6 = 0;
					foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
					{
						if(!empty($clta6_val['BookAppointment']))
						{
							$aft66 = 1;
							foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
							{
								if($app_clta6_val['status'] == 1)
								{
									$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
									$aft66++;
								}
							}
						}
						$aft6++;
					}
					$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$aft7 = 0;
					foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
					{
						if(!empty($clta7_val['BookAppointment']))
						{
							$aft77 = 1;
							foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
							{
								if($app_clta7_val['status'] == 1)
								{
									$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
									$aft77++;
								}
							}
						}
						$aft7++;
					}
					
					$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$evn1 = 0;
					foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
					{
						if(!empty($clte1_val['BookAppointment']))
						{
							$evn11 = 1;
							foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
							{
								if($app_clte1_val['status'] == 1)
								{
									$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
									$evn11++;
								}
							}
						}
						$evn1++;
					}
					$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$evn2 = 0;
					foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
					{
						if(!empty($clte2_val['BookAppointment']))
						{
							$evn22 = 1;
							foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
							{
								if($app_clte2_val['status'] == 1)
								{
									$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
									$evn22++;
								}
							}
						}
						$evn2++;
					}
					$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$evn3 = 0;
					foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
					{
						if(!empty($clte3_val['BookAppointment']))
						{
							$evn33 = 1;
							foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
							{
								if($app_clte3_val['status'] == 1)
								{
									$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
									$evn33++;
								}
							}
						}
						$evn3++;
					}
					$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$evn4 = 0;
					foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
					{
						if(!empty($clte4_val['BookAppointment']))
						{
							$evn44 = 1;
							foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
							{
								if($app_clte4_val['status'] == 1)
								{
									$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
									$evn44++;
								}
							}
						}
						$evn4++;
					}
					$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$evn5 = 0;
					foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
					{
						if(!empty($clte5_val['BookAppointment']))
						{
							$evn55 = 1;
							foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
							{
								if($app_clte5_val['status'] == 1)
								{
									$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
									$evn55++;
								}
							}
						}
						$evn5++;
					}
					$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$evn6 = 0;
					foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
					{
						if(!empty($clte6_val['BookAppointment']))
						{
							$evn66 = 1;
							foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
							{
								if($app_clte6_val['status'] == 1)
								{
									$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
									$evn66++;
								}
							}
						}
						$evn6++;
					}
					$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$evn7 = 0;
					foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
					{
						if(!empty($clte7_val['BookAppointment']))
						{
							$evn77 = 1;
							foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
							{
								if($app_clte7_val['status'] == 1)
								{
									$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
									$evn77++;
								}
							}
						}
						$evn7++;
					}
					
					$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt1 = 0;
					foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
					{
						if(!empty($cltn1_val['BookAppointment']))
						{
							$ngt11 = 1;
							foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
							{
								if($app_cltn1_val['status'] == 1)
								{
									$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
									$ngt11++;
								}
							}
						}
						$ngt1++;
					}
					$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt2 = 0;
					foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
					{
						if(!empty($cltn2_val['BookAppointment']))
						{
							$ngt22 = 1;
							foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
							{
								if($app_cltn2_val['status'] == 1)
								{
									$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
									$ngt22++;
								}
							}
						}
						$ngt2++;
					}
					$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt3 = 0;
					foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
					{
						if(!empty($cltn3_val['BookAppointment']))
						{
							$ngt33 = 1;
							foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
							{
								if($app_cltn3_val['status'] == 1)
								{
									$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
									$ngt33++;
								}
							}
						}
						$ngt3++;
					}
					$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt4 = 0;
					foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
					{
						if(!empty($cltn4_val['BookAppointment']))
						{
							$ngt44 = 1;
							foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
							{
								if($app_cltn4_val['status'] == 1)
								{
									$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
									$ngt44++;
								}
							}
						}
						$ngt4++;
					}
					$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt5 = 0;
					foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
					{
						if(!empty($cltn5_val['BookAppointment']))
						{
							$ngt55 = 1;
							foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
							{
								if($app_cltn5_val['status'] == 1)
								{
									$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
									$ngt55++;
								}
							}
						}
						$ngt5++;
					}
					$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt6 = 0;
					foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
					{
						if(!empty($cltn6_val['BookAppointment']))
						{
							$ngt66 = 1;
							foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
							{
								if($app_cltn6_val['status'] == 1)
								{
									$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
									$ngt66++;
								}
							}
						}
						$ngt6++;
					}
					$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$vl['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$vl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
					$ngt7 = 0;
					foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
					{
						if(!empty($cltn7_val['BookAppointment']))
						{
							$ngt77 = 1;
							foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
							{
								if($app_cltn7_val['status'] == 1)
								{
									$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
									$ngt77++;
								}
							}
						}
						$ngt7++;
					}
					
					$expl_clinic_address = explode('*',$vl['DoctorClinic']['clinic_address']);
					$search_doctor[$g]['DoctorClinic']['clinic_id'] = $vl['DoctorClinic']['id'];
					$search_doctor[$g]['DoctorClinic']['clinic_name'] = $vl['DoctorClinic']['clinic_name'];
					$search_doctor[$g]['DoctorClinic']['clinic_add1'] = $expl_clinic_address[0];
					$search_doctor[$g]['DoctorClinic']['clinic_add2'] = $expl_clinic_address[1];
					
					$search_doctor[$g]['DoctorClinic']['doctor_id'] = $doc_detail['Doctor']['id'];
					$search_doctor[$g]['DoctorClinic']['doctor_title'] = $doc_detail['Doctor']['title'];
					$search_doctor[$g]['DoctorClinic']['doctor_f_name'] = $doc_detail['Doctor']['first_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_l_name'] = $doc_detail['Doctor']['last_name'];
					$search_doctor[$g]['DoctorClinic']['doctor_gender'] = $doc_detail['Doctor']['gender'];
					$search_doctor[$g]['DoctorClinic']['doctor_image'] = $doc_detail['Doctor']['image'];
					$search_doctor[$g]['DoctorClinic']['doctor_locality'] = $doc_detail['Doctor']['locality'];
					$search_doctor[$g]['DoctorClinic']['doctor_cons_fee'] = $doc_detail['Doctor']['cons_fee'];
					$search_doctor[$g]['DoctorClinic']['doctor_home_fee'] = $doc_detail['Doctor']['home_fee'];
					$search_doctor[$g]['DoctorClinic']['own_desc'] = $doc_detail['Doctor']['own_desc'];
					if($doc_detail['Doctor']['admin_featured'] == 1)
					{
						$search_doctor[$g]['DoctorClinic']['admin_featured'] = 1;
					}
					else
					{
						$search_doctor[$g]['DoctorClinic']['admin_featured'] = 0;
					}
					
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
					
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
					$search_doctor[$g]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
						
					//$search_doctor[$g]['Doctor']['clinic_count'] = $count_cl;
					$search_doctor[$g]['DoctorClinic']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
					
					$state_name = $this->State->find('first',array('conditions'=>array('State.id'=>$vl['DoctorClinic']['state'])));
					$city_name = $this->StateCity->find('first',array('conditions'=>array('StateCity.id'=>$vl['DoctorClinic']['city'])));
					$search_doctor[$g]['DoctorClinic']['state_name'] = $state_name['State']['name'];
					$search_doctor[$g]['DoctorClinic']['city_name'] = $city_name['StateCity']['city_name'];
					
					$search_doctor[$g]['DoctorClinic']['id'] = $vl['DoctorClinic']['id'];
					$g++;
				}
				
				if(!empty($this->data['SearchDoctor']['state']))
				{
					$state_city = $this->StateCity->find('all',array('conditions'=>array('StateCity.state_id'=>$this->data['SearchDoctor']['state'])));
				}
				
				$this->set('filter_feature',$this->data['Filter']['doctor_feature']);
				$this->set('filter_day_avail',$this->data['Filter']['day_avail']);
				$this->set('filter_fee',$this->data['Filter']['cons_fee']);
				/*$this->set('search_name',$clinic_name);
				$this->set('search_speciality',$doc_speciality);
				$this->set('search_speciality_id',$doc_speciality_id);
				$this->set('search_state',$doc_state_name);
				$this->set('search_state_id',$doc_state_id);
				$this->set('search_city',$doc_city_name);
				$this->set('search_city_id',$doc_city_id);*/
				
			}
			$this->set('user_temp_id',$this->data['Filter']['user_temp_id']);
			$this->set('options',$options);
			$this->set('search_doctor',$search_doctor);
			$user_detail = $this->Session->read('UserDetail');
			$this->set('user_detail',$user_detail);
			$this->set('result_count',$count_result);
		}
	}
	
	function doctor_detail($doc_id=NULL,$book_stat=NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Doctor Profile');
		$dec_doc = base64_decode($doc_id);
		$doc_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$dec_doc)));
		$expl_special = explode(',',$doc_detail['Doctor']['specialization']);
		$count = count($expl_special);
		if($count == 1)
		{
			$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
			$doc_detail['Doctor']['spec1'] = $special_1[0]['specializations']['display_name'];
			$doc_detail['Doctor']['special_name'] = $special_1[0]['specializations']['display_name'];
			$find_clinic = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_detail['Doctor']['id'])));
			
			$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_detail['Doctor']['id'])));
			$g = 0;
			foreach($find_clinic as $k_cl => $v_cl)
			{
				$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				
				
				if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day1'] = 'Mo'; $doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day2'] = 'Tu'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day3'] = 'We'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day4'] = 'Th'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day5'] = 'Fr'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day6'] = 'Sa'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day7'] = 'Su'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
				
				
				$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$mor1 = 0;
				foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
				{
					if(!empty($cltm1_val['BookAppointment']))
					{
						$mor11 = 1;
						foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
						{
							if($app_cltm1_val['status'] == 1)
							{
								$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
								$mor11++;
							}
						}
					}
					$mor1++;
				}
				$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$mor2 = 0;
				foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
				{
					if(!empty($cltm2_val['BookAppointment']))
					{
						$mor22 = 1;
						foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
						{
							if($app_cltm2_val['status'] == 1)
							{
								$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
								$mor22++;
							}
						}
					}
					$mor2++;
				}
				$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$mor3 = 0;
				foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
				{
					if(!empty($cltm3_val['BookAppointment']))
					{
						$mor33 = 1;
						foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
						{
							if($app_cltm3_val['status'] == 1)
							{
								$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
								$mor33++;
							}
						}
					}
					$mor3++;
				}
				$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$mor4 = 0;
				foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
				{
					if(!empty($cltm4_val['BookAppointment']))
					{
						$mor44 = 1;
						foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
						{
							if($app_cltm4_val['status'] == 1)
							{
								$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
								$mor44++;
							}
						}
					}
					$mor4++;
				}
				$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$mor5 = 0;
				foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
				{
					if(!empty($cltm5_val['BookAppointment']))
					{
						$mor55 = 1;
						foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
						{
							if($app_cltm5_val['status'] == 1)
							{
								$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
								$mor55++;
							}
						}
					}
					$mor5++;
				}
				$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$mor6 = 0;
				foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
				{
					if(!empty($cltm6_val['BookAppointment']))
					{
						$mor66 = 1;
						foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
						{
							if($app_cltm6_val['status'] == 1)
							{
								$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
								$mor66++;
							}
						}
					}
					$mor6++;
				}
				$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$mor7 = 0;
				foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
				{
					if(!empty($cltm7_val['BookAppointment']))
					{
						$mor77 = 1;
						foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
						{
							if($app_cltm7_val['status'] == 1)
							{
								$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
								$mor77++;
							}
						}
					}
					$mor7++;
				}
				
				$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$aft1 = 0;
				foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
				{
					if(!empty($clta1_val['BookAppointment']))
					{
						$aft11 = 1;
						foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
						{
							if($app_clta1_val['status'] == 1)
							{
								$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
								$aft11++;
							}
						}
					}
					$aft1++;
				}
				$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$aft2 = 0;
				foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
				{
					if(!empty($clta2_val['BookAppointment']))
					{
						$aft22 = 1;
						foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
						{
							if($app_clta2_val['status'] == 1)
							{
								$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
								$aft22++;
							}
						}
					}
					$aft2++;
				}
				$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$aft3 = 0;
				foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
				{
					if(!empty($clta3_val['BookAppointment']))
					{
						$aft33 = 1;
						foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
						{
							if($app_clta3_val['status'] == 1)
							{
								$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
								$aft33++;
							}
						}
					}
					$aft3++;
				}
				$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$aft4 = 0;
				foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
				{
					if(!empty($clta4_val['BookAppointment']))
					{
						$aft44 = 1;
						foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
						{
							if($app_clta4_val['status'] == 1)
							{
								$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
								$aft44++;
							}
						}
					}
					$aft4++;
				}
				$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$aft5 = 0;
				foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
				{
					if(!empty($clta5_val['BookAppointment']))
					{
						$aft55 = 1;
						foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
						{
							if($app_clta5_val['status'] == 1)
							{
								$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
								$aft55++;
							}
						}
					}
					$aft5++;
				}
				$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$aft6 = 0;
				foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
				{
					if(!empty($clta6_val['BookAppointment']))
					{
						$aft66 = 1;
						foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
						{
							if($app_clta6_val['status'] == 1)
							{
								$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
								$aft66++;
							}
						}
					}
					$aft6++;
				}
				$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$aft7 = 0;
				foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
				{
					if(!empty($clta7_val['BookAppointment']))
					{
						$aft77 = 1;
						foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
						{
							if($app_clta7_val['status'] == 1)
							{
								$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
								$aft77++;
							}
						}
					}
					$aft7++;
				}
				
				$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$evn1 = 0;
				foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
				{
					if(!empty($clte1_val['BookAppointment']))
					{
						$evn11 = 1;
						foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
						{
							if($app_clte1_val['status'] == 1)
							{
								$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
								$evn11++;
							}
						}
					}
					$evn1++;
				}
				$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$evn2 = 0;
				foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
				{
					if(!empty($clte2_val['BookAppointment']))
					{
						$evn22 = 1;
						foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
						{
							if($app_clte2_val['status'] == 1)
							{
								$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
								$evn22++;
							}
						}
					}
					$evn2++;
				}
				$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$evn3 = 0;
				foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
				{
					if(!empty($clte3_val['BookAppointment']))
					{
						$evn33 = 1;
						foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
						{
							if($app_clte3_val['status'] == 1)
							{
								$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
								$evn33++;
							}
						}
					}
					$evn3++;
				}
				$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$evn4 = 0;
				foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
				{
					if(!empty($clte4_val['BookAppointment']))
					{
						$evn44 = 1;
						foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
						{
							if($app_clte4_val['status'] == 1)
							{
								$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
								$evn44++;
							}
						}
					}
					$evn4++;
				}
				$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$evn5 = 0;
				foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
				{
					if(!empty($clte5_val['BookAppointment']))
					{
						$evn55 = 1;
						foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
						{
							if($app_clte5_val['status'] == 1)
							{
								$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
								$evn55++;
							}
						}
					}
					$evn5++;
				}
				$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$evn6 = 0;
				foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
				{
					if(!empty($clte6_val['BookAppointment']))
					{
						$evn66 = 1;
						foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
						{
							if($app_clte6_val['status'] == 1)
							{
								$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
								$evn66++;
							}
						}
					}
					$evn6++;
				}
				$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$evn7 = 0;
				foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
				{
					if(!empty($clte7_val['BookAppointment']))
					{
						$evn77 = 1;
						foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
						{
							if($app_clte7_val['status'] == 1)
							{
								$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
								$evn77++;
							}
						}
					}
					$evn7++;
				}
				
				$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt1 = 0;
				foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
				{
					if(!empty($cltn1_val['BookAppointment']))
					{
						$ngt11 = 1;
						foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
						{
							if($app_cltn1_val['status'] == 1)
							{
								$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
								$ngt11++;
							}
						}
					}
					$ngt1++;
				}
				$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt2 = 0;
				foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
				{
					if(!empty($cltn2_val['BookAppointment']))
					{
						$ngt22 = 1;
						foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
						{
							if($app_cltn2_val['status'] == 1)
							{
								$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
								$ngt22++;
							}
						}
					}
					$ngt2++;
				}
				$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt3 = 0;
				foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
				{
					if(!empty($cltn3_val['BookAppointment']))
					{
						$ngt33 = 1;
						foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
						{
							if($app_cltn3_val['status'] == 1)
							{
								$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
								$ngt33++;
							}
						}
					}
					$ngt3++;
				}
				$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt4 = 0;
				foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
				{
					if(!empty($cltn4_val['BookAppointment']))
					{
						$ngt44 = 1;
						foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
						{
							if($app_cltn4_val['status'] == 1)
							{
								$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
								$ngt44++;
							}
						}
					}
					$ngt4++;
				}
				$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt5 = 0;
				foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
				{
					if(!empty($cltn5_val['BookAppointment']))
					{
						$ngt55 = 1;
						foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
						{
							if($app_cltn5_val['status'] == 1)
							{
								$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
								$ngt55++;
							}
						}
					}
					$ngt5++;
				}
				$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt6 = 0;
				foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
				{
					if(!empty($cltn6_val['BookAppointment']))
					{
						$ngt66 = 1;
						foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
						{
							if($app_cltn6_val['status'] == 1)
							{
								$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
								$ngt66++;
							}
						}
					}
					$ngt6++;
				}
				$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt7 = 0;
				foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
				{
					if(!empty($cltn7_val['BookAppointment']))
					{
						$ngt77 = 1;
						foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
						{
							if($app_cltn7_val['status'] == 1)
							{
								$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
								$ngt77++;
							}
						}
					}
					$ngt7++;
				}
				
				$expl_clinic_address = explode('*',$v_cl['DoctorClinic']['clinic_address']);
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_id'] = $v_cl['DoctorClinic']['id'];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_name'] = $v_cl['DoctorClinic']['clinic_name'];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_address1'] = $expl_clinic_address[0];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_address2'] = $expl_clinic_address[1];
				
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor1'] = $clinic_timing_mor1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor2'] = $clinic_timing_mor2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor3'] = $clinic_timing_mor3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor4'] = $clinic_timing_mor4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor5'] = $clinic_timing_mor5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor6'] = $clinic_timing_mor6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor7'] = $clinic_timing_mor7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft1'] = $clinic_timing_aft1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft2'] = $clinic_timing_aft2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft3'] = $clinic_timing_aft3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft4'] = $clinic_timing_aft4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft5'] = $clinic_timing_aft5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft6'] = $clinic_timing_aft6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft7'] = $clinic_timing_aft7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn1'] = $clinic_timing_evn1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn2'] = $clinic_timing_evn2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn3'] = $clinic_timing_evn3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn4'] = $clinic_timing_evn4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn5'] = $clinic_timing_evn5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn6'] = $clinic_timing_evn6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn7'] = $clinic_timing_evn7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt1'] = $clinic_timing_ngt1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt2'] = $clinic_timing_ngt2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt3'] = $clinic_timing_ngt3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt4'] = $clinic_timing_ngt4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt5'] = $clinic_timing_ngt5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt6'] = $clinic_timing_ngt6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt7'] = $clinic_timing_ngt7;
				$g++;
			}
			$doc_detail['Doctor']['clinic_count'] = $count_cl;
			$doc_detail['Doctor']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
		}
		if($count == 2)
		{
			$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
			$special_2 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[1]."'");
			$doc_detail['Doctor']['spec1'] = $special_1[0]['specializations']['display_name'];
			$doc_detail['Doctor']['spec2'] = $special_2[0]['specializations']['display_name'];
			$doc_detail['Doctor']['special_name'] = $special_1[0]['specializations']['display_name'].','.$special_2[0]['specializations']['display_name'];
			$find_clinic = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_detail['Doctor']['id'])));
			$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_detail['Doctor']['id'])));
			$g = 0;
			foreach($find_clinic as $k_cl => $v_cl)
			{
				$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				
				
				if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day1'] = 'Mo'; $doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day2'] = 'Tu'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day3'] = 'We'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day4'] = 'Th'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day5'] = 'Fr'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day6'] = 'Sa'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day7'] = 'Su'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
				
				
				$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$mor1 = 0;
				foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
				{
					if(!empty($cltm1_val['BookAppointment']))
					{
						$mor11 = 1;
						foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
						{
							if($app_cltm1_val['status'] == 1)
							{
								$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
								$mor11++;
							}
						}
					}
					$mor1++;
				}
				$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$mor2 = 0;
				foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
				{
					if(!empty($cltm2_val['BookAppointment']))
					{
						$mor22 = 1;
						foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
						{
							if($app_cltm2_val['status'] == 1)
							{
								$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
								$mor22++;
							}
						}
					}
					$mor2++;
				}
				$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$mor3 = 0;
				foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
				{
					if(!empty($cltm3_val['BookAppointment']))
					{
						$mor33 = 1;
						foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
						{
							if($app_cltm3_val['status'] == 1)
							{
								$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
								$mor33++;
							}
						}
					}
					$mor3++;
				}
				$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$mor4 = 0;
				foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
				{
					if(!empty($cltm4_val['BookAppointment']))
					{
						$mor44 = 1;
						foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
						{
							if($app_cltm4_val['status'] == 1)
							{
								$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
								$mor44++;
							}
						}
					}
					$mor4++;
				}
				$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$mor5 = 0;
				foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
				{
					if(!empty($cltm5_val['BookAppointment']))
					{
						$mor55 = 1;
						foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
						{
							if($app_cltm5_val['status'] == 1)
							{
								$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
								$mor55++;
							}
						}
					}
					$mor5++;
				}
				$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$mor6 = 0;
				foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
				{
					if(!empty($cltm6_val['BookAppointment']))
					{
						$mor66 = 1;
						foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
						{
							if($app_cltm6_val['status'] == 1)
							{
								$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
								$mor66++;
							}
						}
					}
					$mor6++;
				}
				$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$mor7 = 0;
				foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
				{
					if(!empty($cltm7_val['BookAppointment']))
					{
						$mor77 = 1;
						foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
						{
							if($app_cltm7_val['status'] == 1)
							{
								$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
								$mor77++;
							}
						}
					}
					$mor7++;
				}
				
				$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$aft1 = 0;
				foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
				{
					if(!empty($clta1_val['BookAppointment']))
					{
						$aft11 = 1;
						foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
						{
							if($app_clta1_val['status'] == 1)
							{
								$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
								$aft11++;
							}
						}
					}
					$aft1++;
				}
				$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$aft2 = 0;
				foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
				{
					if(!empty($clta2_val['BookAppointment']))
					{
						$aft22 = 1;
						foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
						{
							if($app_clta2_val['status'] == 1)
							{
								$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
								$aft22++;
							}
						}
					}
					$aft2++;
				}
				$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$aft3 = 0;
				foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
				{
					if(!empty($clta3_val['BookAppointment']))
					{
						$aft33 = 1;
						foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
						{
							if($app_clta3_val['status'] == 1)
							{
								$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
								$aft33++;
							}
						}
					}
					$aft3++;
				}
				$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$aft4 = 0;
				foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
				{
					if(!empty($clta4_val['BookAppointment']))
					{
						$aft44 = 1;
						foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
						{
							if($app_clta4_val['status'] == 1)
							{
								$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
								$aft44++;
							}
						}
					}
					$aft4++;
				}
				$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$aft5 = 0;
				foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
				{
					if(!empty($clta5_val['BookAppointment']))
					{
						$aft55 = 1;
						foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
						{
							if($app_clta5_val['status'] == 1)
							{
								$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
								$aft55++;
							}
						}
					}
					$aft5++;
				}
				$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$aft6 = 0;
				foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
				{
					if(!empty($clta6_val['BookAppointment']))
					{
						$aft66 = 1;
						foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
						{
							if($app_clta6_val['status'] == 1)
							{
								$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
								$aft66++;
							}
						}
					}
					$aft6++;
				}
				$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$aft7 = 0;
				foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
				{
					if(!empty($clta7_val['BookAppointment']))
					{
						$aft77 = 1;
						foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
						{
							if($app_clta7_val['status'] == 1)
							{
								$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
								$aft77++;
							}
						}
					}
					$aft7++;
				}
				
				$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$evn1 = 0;
				foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
				{
					if(!empty($clte1_val['BookAppointment']))
					{
						$evn11 = 1;
						foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
						{
							if($app_clte1_val['status'] == 1)
							{
								$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
								$evn11++;
							}
						}
					}
					$evn1++;
				}
				$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$evn2 = 0;
				foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
				{
					if(!empty($clte2_val['BookAppointment']))
					{
						$evn22 = 1;
						foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
						{
							if($app_clte2_val['status'] == 1)
							{
								$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
								$evn22++;
							}
						}
					}
					$evn2++;
				}
				$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$evn3 = 0;
				foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
				{
					if(!empty($clte3_val['BookAppointment']))
					{
						$evn33 = 1;
						foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
						{
							if($app_clte3_val['status'] == 1)
							{
								$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
								$evn33++;
							}
						}
					}
					$evn3++;
				}
				$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$evn4 = 0;
				foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
				{
					if(!empty($clte4_val['BookAppointment']))
					{
						$evn44 = 1;
						foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
						{
							if($app_clte4_val['status'] == 1)
							{
								$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
								$evn44++;
							}
						}
					}
					$evn4++;
				}
				$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$evn5 = 0;
				foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
				{
					if(!empty($clte5_val['BookAppointment']))
					{
						$evn55 = 1;
						foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
						{
							if($app_clte5_val['status'] == 1)
							{
								$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
								$evn55++;
							}
						}
					}
					$evn5++;
				}
				$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$evn6 = 0;
				foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
				{
					if(!empty($clte6_val['BookAppointment']))
					{
						$evn66 = 1;
						foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
						{
							if($app_clte6_val['status'] == 1)
							{
								$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
								$evn66++;
							}
						}
					}
					$evn6++;
				}
				$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$evn7 = 0;
				foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
				{
					if(!empty($clte7_val['BookAppointment']))
					{
						$evn77 = 1;
						foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
						{
							if($app_clte7_val['status'] == 1)
							{
								$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
								$evn77++;
							}
						}
					}
					$evn7++;
				}
				
				$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt1 = 0;
				foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
				{
					if(!empty($cltn1_val['BookAppointment']))
					{
						$ngt11 = 1;
						foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
						{
							if($app_cltn1_val['status'] == 1)
							{
								$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
								$ngt11++;
							}
						}
					}
					$ngt1++;
				}
				$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt2 = 0;
				foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
				{
					if(!empty($cltn2_val['BookAppointment']))
					{
						$ngt22 = 1;
						foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
						{
							if($app_cltn2_val['status'] == 1)
							{
								$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
								$ngt22++;
							}
						}
					}
					$ngt2++;
				}
				$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt3 = 0;
				foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
				{
					if(!empty($cltn3_val['BookAppointment']))
					{
						$ngt33 = 1;
						foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
						{
							if($app_cltn3_val['status'] == 1)
							{
								$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
								$ngt33++;
							}
						}
					}
					$ngt3++;
				}
				$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt4 = 0;
				foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
				{
					if(!empty($cltn4_val['BookAppointment']))
					{
						$ngt44 = 1;
						foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
						{
							if($app_cltn4_val['status'] == 1)
							{
								$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
								$ngt44++;
							}
						}
					}
					$ngt4++;
				}
				$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt5 = 0;
				foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
				{
					if(!empty($cltn5_val['BookAppointment']))
					{
						$ngt55 = 1;
						foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
						{
							if($app_cltn5_val['status'] == 1)
							{
								$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
								$ngt55++;
							}
						}
					}
					$ngt5++;
				}
				$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt6 = 0;
				foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
				{
					if(!empty($cltn6_val['BookAppointment']))
					{
						$ngt66 = 1;
						foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
						{
							if($app_cltn6_val['status'] == 1)
							{
								$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
								$ngt66++;
							}
						}
					}
					$ngt6++;
				}
				$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt7 = 0;
				foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
				{
					if(!empty($cltn7_val['BookAppointment']))
					{
						$ngt77 = 1;
						foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
						{
							if($app_cltn7_val['status'] == 1)
							{
								$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
								$ngt77++;
							}
						}
					}
					$ngt7++;
				}
				
				$expl_clinic_address = explode('*',$v_cl['DoctorClinic']['clinic_address']);
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_id'] = $v_cl['DoctorClinic']['id'];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_name'] = $v_cl['DoctorClinic']['clinic_name'];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_address1'] = $expl_clinic_address[0];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_address2'] = $expl_clinic_address[1];
				
				
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor1'] = $clinic_timing_mor1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor2'] = $clinic_timing_mor2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor3'] = $clinic_timing_mor3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor4'] = $clinic_timing_mor4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor5'] = $clinic_timing_mor5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor6'] = $clinic_timing_mor6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor7'] = $clinic_timing_mor7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft1'] = $clinic_timing_aft1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft2'] = $clinic_timing_aft2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft3'] = $clinic_timing_aft3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft4'] = $clinic_timing_aft4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft5'] = $clinic_timing_aft5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft6'] = $clinic_timing_aft6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft7'] = $clinic_timing_aft7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn1'] = $clinic_timing_evn1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn2'] = $clinic_timing_evn2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn3'] = $clinic_timing_evn3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn4'] = $clinic_timing_evn4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn5'] = $clinic_timing_evn5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn6'] = $clinic_timing_evn6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn7'] = $clinic_timing_evn7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt1'] = $clinic_timing_ngt1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt2'] = $clinic_timing_ngt2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt3'] = $clinic_timing_ngt3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt4'] = $clinic_timing_ngt4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt5'] = $clinic_timing_ngt5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt6'] = $clinic_timing_ngt6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt7'] = $clinic_timing_ngt7;
				$g++;
			}
			$doc_detail['Doctor']['clinic_count'] = $count_cl;
			$doc_detail['Doctor']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
		}
		if($count == 3)
		{
			$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
			$special_2 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[1]."'");
			$special_3 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[2]."'");
			$doc_detail['Doctor']['spec1'] = $special_1[0]['specializations']['display_name'];
			$doc_detail['Doctor']['spec2'] = $special_2[0]['specializations']['display_name'];
			$doc_detail['Doctor']['spec3'] = $special_3[0]['specializations']['display_name'];
			$doc_detail['Doctor']['special_name'] = $special_1[0]['specializations']['display_name'].','.$special_2[0]['specializations']['display_name'].','.$special_3[0]['specializations']['display_name'];
			$find_clinic = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_detail['Doctor']['id'])));
			$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_detail['Doctor']['id'])));
			$g = 0;
			foreach($find_clinic as $k_cl => $v_cl)
			{
				$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				
				
				if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day1'] = 'Mo'; $doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day2'] = 'Tu'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day3'] = 'We'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day4'] = 'Th'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day5'] = 'Fr'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day6'] = 'Sa'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day7'] = 'Su'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
				
				
				$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$mor1 = 0;
				foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
				{
					if(!empty($cltm1_val['BookAppointment']))
					{
						$mor11 = 1;
						foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
						{
							if($app_cltm1_val['status'] == 1)
							{
								$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
								$mor11++;
							}
						}
					}
					$mor1++;
				}
				$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$mor2 = 0;
				foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
				{
					if(!empty($cltm2_val['BookAppointment']))
					{
						$mor22 = 1;
						foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
						{
							if($app_cltm2_val['status'] == 1)
							{
								$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
								$mor22++;
							}
						}
					}
					$mor2++;
				}
				$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$mor3 = 0;
				foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
				{
					if(!empty($cltm3_val['BookAppointment']))
					{
						$mor33 = 1;
						foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
						{
							if($app_cltm3_val['status'] == 1)
							{
								$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
								$mor33++;
							}
						}
					}
					$mor3++;
				}
				$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$mor4 = 0;
				foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
				{
					if(!empty($cltm4_val['BookAppointment']))
					{
						$mor44 = 1;
						foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
						{
							if($app_cltm4_val['status'] == 1)
							{
								$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
								$mor44++;
							}
						}
					}
					$mor4++;
				}
				$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$mor5 = 0;
				foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
				{
					if(!empty($cltm5_val['BookAppointment']))
					{
						$mor55 = 1;
						foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
						{
							if($app_cltm5_val['status'] == 1)
							{
								$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
								$mor55++;
							}
						}
					}
					$mor5++;
				}
				$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$mor6 = 0;
				foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
				{
					if(!empty($cltm6_val['BookAppointment']))
					{
						$mor66 = 1;
						foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
						{
							if($app_cltm6_val['status'] == 1)
							{
								$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
								$mor66++;
							}
						}
					}
					$mor6++;
				}
				$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$mor7 = 0;
				foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
				{
					if(!empty($cltm7_val['BookAppointment']))
					{
						$mor77 = 1;
						foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
						{
							if($app_cltm7_val['status'] == 1)
							{
								$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
								$mor77++;
							}
						}
					}
					$mor7++;
				}
				
				$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$aft1 = 0;
				foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
				{
					if(!empty($clta1_val['BookAppointment']))
					{
						$aft11 = 1;
						foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
						{
							if($app_clta1_val['status'] == 1)
							{
								$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
								$aft11++;
							}
						}
					}
					$aft1++;
				}
				$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$aft2 = 0;
				foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
				{
					if(!empty($clta2_val['BookAppointment']))
					{
						$aft22 = 1;
						foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
						{
							if($app_clta2_val['status'] == 1)
							{
								$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
								$aft22++;
							}
						}
					}
					$aft2++;
				}
				$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$aft3 = 0;
				foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
				{
					if(!empty($clta3_val['BookAppointment']))
					{
						$aft33 = 1;
						foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
						{
							if($app_clta3_val['status'] == 1)
							{
								$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
								$aft33++;
							}
						}
					}
					$aft3++;
				}
				$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$aft4 = 0;
				foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
				{
					if(!empty($clta4_val['BookAppointment']))
					{
						$aft44 = 1;
						foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
						{
							if($app_clta4_val['status'] == 1)
							{
								$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
								$aft44++;
							}
						}
					}
					$aft4++;
				}
				$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$aft5 = 0;
				foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
				{
					if(!empty($clta5_val['BookAppointment']))
					{
						$aft55 = 1;
						foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
						{
							if($app_clta5_val['status'] == 1)
							{
								$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
								$aft55++;
							}
						}
					}
					$aft5++;
				}
				$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$aft6 = 0;
				foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
				{
					if(!empty($clta6_val['BookAppointment']))
					{
						$aft66 = 1;
						foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
						{
							if($app_clta6_val['status'] == 1)
							{
								$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
								$aft66++;
							}
						}
					}
					$aft6++;
				}
				$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$aft7 = 0;
				foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
				{
					if(!empty($clta7_val['BookAppointment']))
					{
						$aft77 = 1;
						foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
						{
							if($app_clta7_val['status'] == 1)
							{
								$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
								$aft77++;
							}
						}
					}
					$aft7++;
				}
				
				$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$evn1 = 0;
				foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
				{
					if(!empty($clte1_val['BookAppointment']))
					{
						$evn11 = 1;
						foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
						{
							if($app_clte1_val['status'] == 1)
							{
								$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
								$evn11++;
							}
						}
					}
					$evn1++;
				}
				$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$evn2 = 0;
				foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
				{
					if(!empty($clte2_val['BookAppointment']))
					{
						$evn22 = 1;
						foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
						{
							if($app_clte2_val['status'] == 1)
							{
								$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
								$evn22++;
							}
						}
					}
					$evn2++;
				}
				$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$evn3 = 0;
				foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
				{
					if(!empty($clte3_val['BookAppointment']))
					{
						$evn33 = 1;
						foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
						{
							if($app_clte3_val['status'] == 1)
							{
								$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
								$evn33++;
							}
						}
					}
					$evn3++;
				}
				$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$evn4 = 0;
				foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
				{
					if(!empty($clte4_val['BookAppointment']))
					{
						$evn44 = 1;
						foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
						{
							if($app_clte4_val['status'] == 1)
							{
								$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
								$evn44++;
							}
						}
					}
					$evn4++;
				}
				$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$evn5 = 0;
				foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
				{
					if(!empty($clte5_val['BookAppointment']))
					{
						$evn55 = 1;
						foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
						{
							if($app_clte5_val['status'] == 1)
							{
								$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
								$evn55++;
							}
						}
					}
					$evn5++;
				}
				$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$evn6 = 0;
				foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
				{
					if(!empty($clte6_val['BookAppointment']))
					{
						$evn66 = 1;
						foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
						{
							if($app_clte6_val['status'] == 1)
							{
								$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
								$evn66++;
							}
						}
					}
					$evn6++;
				}
				$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$evn7 = 0;
				foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
				{
					if(!empty($clte7_val['BookAppointment']))
					{
						$evn77 = 1;
						foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
						{
							if($app_clte7_val['status'] == 1)
							{
								$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
								$evn77++;
							}
						}
					}
					$evn7++;
				}
				
				$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt1 = 0;
				foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
				{
					if(!empty($cltn1_val['BookAppointment']))
					{
						$ngt11 = 1;
						foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
						{
							if($app_cltn1_val['status'] == 1)
							{
								$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
								$ngt11++;
							}
						}
					}
					$ngt1++;
				}
				$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt2 = 0;
				foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
				{
					if(!empty($cltn2_val['BookAppointment']))
					{
						$ngt22 = 1;
						foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
						{
							if($app_cltn2_val['status'] == 1)
							{
								$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
								$ngt22++;
							}
						}
					}
					$ngt2++;
				}
				$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt3 = 0;
				foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
				{
					if(!empty($cltn3_val['BookAppointment']))
					{
						$ngt33 = 1;
						foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
						{
							if($app_cltn3_val['status'] == 1)
							{
								$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
								$ngt33++;
							}
						}
					}
					$ngt3++;
				}
				$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt4 = 0;
				foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
				{
					if(!empty($cltn4_val['BookAppointment']))
					{
						$ngt44 = 1;
						foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
						{
							if($app_cltn4_val['status'] == 1)
							{
								$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
								$ngt44++;
							}
						}
					}
					$ngt4++;
				}
				$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt5 = 0;
				foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
				{
					if(!empty($cltn5_val['BookAppointment']))
					{
						$ngt55 = 1;
						foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
						{
							if($app_cltn5_val['status'] == 1)
							{
								$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
								$ngt55++;
							}
						}
					}
					$ngt5++;
				}
				$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt6 = 0;
				foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
				{
					if(!empty($cltn6_val['BookAppointment']))
					{
						$ngt66 = 1;
						foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
						{
							if($app_cltn6_val['status'] == 1)
							{
								$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
								$ngt66++;
							}
						}
					}
					$ngt6++;
				}
				$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt7 = 0;
				foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
				{
					if(!empty($cltn7_val['BookAppointment']))
					{
						$ngt77 = 1;
						foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
						{
							if($app_cltn7_val['status'] == 1)
							{
								$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
								$ngt77++;
							}
						}
					}
					$ngt7++;
				}
				
				$expl_clinic_address = explode('*',$v_cl['DoctorClinic']['clinic_address']);
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_id'] = $v_cl['DoctorClinic']['id'];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_name'] = $v_cl['DoctorClinic']['clinic_name'];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_address1'] = $expl_clinic_address[0];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_address2'] = $expl_clinic_address[1];
				
				
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor1'] = $clinic_timing_mor1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor2'] = $clinic_timing_mor2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor3'] = $clinic_timing_mor3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor4'] = $clinic_timing_mor4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor5'] = $clinic_timing_mor5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor6'] = $clinic_timing_mor6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor7'] = $clinic_timing_mor7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft1'] = $clinic_timing_aft1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft2'] = $clinic_timing_aft2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft3'] = $clinic_timing_aft3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft4'] = $clinic_timing_aft4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft5'] = $clinic_timing_aft5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft6'] = $clinic_timing_aft6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft7'] = $clinic_timing_aft7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn1'] = $clinic_timing_evn1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn2'] = $clinic_timing_evn2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn3'] = $clinic_timing_evn3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn4'] = $clinic_timing_evn4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn5'] = $clinic_timing_evn5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn6'] = $clinic_timing_evn6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn7'] = $clinic_timing_evn7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt1'] = $clinic_timing_ngt1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt2'] = $clinic_timing_ngt2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt3'] = $clinic_timing_ngt3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt4'] = $clinic_timing_ngt4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt5'] = $clinic_timing_ngt5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt6'] = $clinic_timing_ngt6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt7'] = $clinic_timing_ngt7;
				$g++;
			}
			$doc_detail['Doctor']['clinic_count'] = $count_cl;
			$doc_detail['Doctor']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
		}
		if($count == 4)
		{
			$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
			$special_2 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[1]."'");
			$special_3 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[2]."'");
			$special_4 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[3]."'");
			$doc_detail['Doctor']['spec1'] = $special_1[0]['specializations']['display_name'];
			$doc_detail['Doctor']['spec2'] = $special_2[0]['specializations']['display_name'];
			$doc_detail['Doctor']['spec3'] = $special_3[0]['specializations']['display_name'];
			$doc_detail['Doctor']['spec4'] = $special_4[0]['specializations']['display_name'];
			$doc_detail['Doctor']['special_name'] = $special_1[0]['specializations']['display_name'].','.$special_2[0]['specializations']['display_name'].','.$special_3[0]['specializations']['display_name'].','.$special_4[0]['specializations']['display_name'];
			$find_clinic = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_detail['Doctor']['id'])));
			$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_detail['Doctor']['id'])));
			$g = 0;
			foreach($find_clinic as $k_cl => $v_cl)
			{
				$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				
				
				if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day1'] = 'Mo'; $doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day2'] = 'Tu'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day3'] = 'We'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day4'] = 'Th'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day5'] = 'Fr'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day6'] = 'Sa'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day7'] = 'Su'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
				
				
				$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$mor1 = 0;
				foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
				{
					if(!empty($cltm1_val['BookAppointment']))
					{
						$mor11 = 1;
						foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
						{
							if($app_cltm1_val['status'] == 1)
							{
								$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
								$mor11++;
							}
						}
					}
					$mor1++;
				}
				$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$mor2 = 0;
				foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
				{
					if(!empty($cltm2_val['BookAppointment']))
					{
						$mor22 = 1;
						foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
						{
							if($app_cltm2_val['status'] == 1)
							{
								$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
								$mor22++;
							}
						}
					}
					$mor2++;
				}
				$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$mor3 = 0;
				foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
				{
					if(!empty($cltm3_val['BookAppointment']))
					{
						$mor33 = 1;
						foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
						{
							if($app_cltm3_val['status'] == 1)
							{
								$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
								$mor33++;
							}
						}
					}
					$mor3++;
				}
				$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$mor4 = 0;
				foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
				{
					if(!empty($cltm4_val['BookAppointment']))
					{
						$mor44 = 1;
						foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
						{
							if($app_cltm4_val['status'] == 1)
							{
								$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
								$mor44++;
							}
						}
					}
					$mor4++;
				}
				$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$mor5 = 0;
				foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
				{
					if(!empty($cltm5_val['BookAppointment']))
					{
						$mor55 = 1;
						foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
						{
							if($app_cltm5_val['status'] == 1)
							{
								$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
								$mor55++;
							}
						}
					}
					$mor5++;
				}
				$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$mor6 = 0;
				foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
				{
					if(!empty($cltm6_val['BookAppointment']))
					{
						$mor66 = 1;
						foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
						{
							if($app_cltm6_val['status'] == 1)
							{
								$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
								$mor66++;
							}
						}
					}
					$mor6++;
				}
				$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$mor7 = 0;
				foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
				{
					if(!empty($cltm7_val['BookAppointment']))
					{
						$mor77 = 1;
						foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
						{
							if($app_cltm7_val['status'] == 1)
							{
								$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
								$mor77++;
							}
						}
					}
					$mor7++;
				}
				
				$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$aft1 = 0;
				foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
				{
					if(!empty($clta1_val['BookAppointment']))
					{
						$aft11 = 1;
						foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
						{
							if($app_clta1_val['status'] == 1)
							{
								$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
								$aft11++;
							}
						}
					}
					$aft1++;
				}
				$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$aft2 = 0;
				foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
				{
					if(!empty($clta2_val['BookAppointment']))
					{
						$aft22 = 1;
						foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
						{
							if($app_clta2_val['status'] == 1)
							{
								$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
								$aft22++;
							}
						}
					}
					$aft2++;
				}
				$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$aft3 = 0;
				foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
				{
					if(!empty($clta3_val['BookAppointment']))
					{
						$aft33 = 1;
						foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
						{
							if($app_clta3_val['status'] == 1)
							{
								$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
								$aft33++;
							}
						}
					}
					$aft3++;
				}
				$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$aft4 = 0;
				foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
				{
					if(!empty($clta4_val['BookAppointment']))
					{
						$aft44 = 1;
						foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
						{
							if($app_clta4_val['status'] == 1)
							{
								$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
								$aft44++;
							}
						}
					}
					$aft4++;
				}
				$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$aft5 = 0;
				foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
				{
					if(!empty($clta5_val['BookAppointment']))
					{
						$aft55 = 1;
						foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
						{
							if($app_clta5_val['status'] == 1)
							{
								$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
								$aft55++;
							}
						}
					}
					$aft5++;
				}
				$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$aft6 = 0;
				foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
				{
					if(!empty($clta6_val['BookAppointment']))
					{
						$aft66 = 1;
						foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
						{
							if($app_clta6_val['status'] == 1)
							{
								$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
								$aft66++;
							}
						}
					}
					$aft6++;
				}
				$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$aft7 = 0;
				foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
				{
					if(!empty($clta7_val['BookAppointment']))
					{
						$aft77 = 1;
						foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
						{
							if($app_clta7_val['status'] == 1)
							{
								$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
								$aft77++;
							}
						}
					}
					$aft7++;
				}
				
				$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$evn1 = 0;
				foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
				{
					if(!empty($clte1_val['BookAppointment']))
					{
						$evn11 = 1;
						foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
						{
							if($app_clte1_val['status'] == 1)
							{
								$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
								$evn11++;
							}
						}
					}
					$evn1++;
				}
				$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$evn2 = 0;
				foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
				{
					if(!empty($clte2_val['BookAppointment']))
					{
						$evn22 = 1;
						foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
						{
							if($app_clte2_val['status'] == 1)
							{
								$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
								$evn22++;
							}
						}
					}
					$evn2++;
				}
				$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$evn3 = 0;
				foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
				{
					if(!empty($clte3_val['BookAppointment']))
					{
						$evn33 = 1;
						foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
						{
							if($app_clte3_val['status'] == 1)
							{
								$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
								$evn33++;
							}
						}
					}
					$evn3++;
				}
				$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$evn4 = 0;
				foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
				{
					if(!empty($clte4_val['BookAppointment']))
					{
						$evn44 = 1;
						foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
						{
							if($app_clte4_val['status'] == 1)
							{
								$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
								$evn44++;
							}
						}
					}
					$evn4++;
				}
				$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$evn5 = 0;
				foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
				{
					if(!empty($clte5_val['BookAppointment']))
					{
						$evn55 = 1;
						foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
						{
							if($app_clte5_val['status'] == 1)
							{
								$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
								$evn55++;
							}
						}
					}
					$evn5++;
				}
				$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$evn6 = 0;
				foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
				{
					if(!empty($clte6_val['BookAppointment']))
					{
						$evn66 = 1;
						foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
						{
							if($app_clte6_val['status'] == 1)
							{
								$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
								$evn66++;
							}
						}
					}
					$evn6++;
				}
				$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$evn7 = 0;
				foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
				{
					if(!empty($clte7_val['BookAppointment']))
					{
						$evn77 = 1;
						foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
						{
							if($app_clte7_val['status'] == 1)
							{
								$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
								$evn77++;
							}
						}
					}
					$evn7++;
				}
				
				$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt1 = 0;
				foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
				{
					if(!empty($cltn1_val['BookAppointment']))
					{
						$ngt11 = 1;
						foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
						{
							if($app_cltn1_val['status'] == 1)
							{
								$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
								$ngt11++;
							}
						}
					}
					$ngt1++;
				}
				$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt2 = 0;
				foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
				{
					if(!empty($cltn2_val['BookAppointment']))
					{
						$ngt22 = 1;
						foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
						{
							if($app_cltn2_val['status'] == 1)
							{
								$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
								$ngt22++;
							}
						}
					}
					$ngt2++;
				}
				$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt3 = 0;
				foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
				{
					if(!empty($cltn3_val['BookAppointment']))
					{
						$ngt33 = 1;
						foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
						{
							if($app_cltn3_val['status'] == 1)
							{
								$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
								$ngt33++;
							}
						}
					}
					$ngt3++;
				}
				$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt4 = 0;
				foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
				{
					if(!empty($cltn4_val['BookAppointment']))
					{
						$ngt44 = 1;
						foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
						{
							if($app_cltn4_val['status'] == 1)
							{
								$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
								$ngt44++;
							}
						}
					}
					$ngt4++;
				}
				$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt5 = 0;
				foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
				{
					if(!empty($cltn5_val['BookAppointment']))
					{
						$ngt55 = 1;
						foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
						{
							if($app_cltn5_val['status'] == 1)
							{
								$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
								$ngt55++;
							}
						}
					}
					$ngt5++;
				}
				$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt6 = 0;
				foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
				{
					if(!empty($cltn6_val['BookAppointment']))
					{
						$ngt66 = 1;
						foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
						{
							if($app_cltn6_val['status'] == 1)
							{
								$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
								$ngt66++;
							}
						}
					}
					$ngt6++;
				}
				$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt7 = 0;
				foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
				{
					if(!empty($cltn7_val['BookAppointment']))
					{
						$ngt77 = 1;
						foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
						{
							if($app_cltn7_val['status'] == 1)
							{
								$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
								$ngt77++;
							}
						}
					}
					$ngt7++;
				}
				
				$expl_clinic_address = explode('*',$v_cl['DoctorClinic']['clinic_address']);
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_id'] = $v_cl['DoctorClinic']['id'];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_name'] = $v_cl['DoctorClinic']['clinic_name'];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_address1'] = $expl_clinic_address[0];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_address2'] = $expl_clinic_address[1];
				
				
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor1'] = $clinic_timing_mor1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor2'] = $clinic_timing_mor2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor3'] = $clinic_timing_mor3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor4'] = $clinic_timing_mor4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor5'] = $clinic_timing_mor5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor6'] = $clinic_timing_mor6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor7'] = $clinic_timing_mor7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft1'] = $clinic_timing_aft1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft2'] = $clinic_timing_aft2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft3'] = $clinic_timing_aft3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft4'] = $clinic_timing_aft4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft5'] = $clinic_timing_aft5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft6'] = $clinic_timing_aft6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft7'] = $clinic_timing_aft7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn1'] = $clinic_timing_evn1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn2'] = $clinic_timing_evn2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn3'] = $clinic_timing_evn3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn4'] = $clinic_timing_evn4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn5'] = $clinic_timing_evn5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn6'] = $clinic_timing_evn6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn7'] = $clinic_timing_evn7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt1'] = $clinic_timing_ngt1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt2'] = $clinic_timing_ngt2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt3'] = $clinic_timing_ngt3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt4'] = $clinic_timing_ngt4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt5'] = $clinic_timing_ngt5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt6'] = $clinic_timing_ngt6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt7'] = $clinic_timing_ngt7;
				$g++;
			}
			$doc_detail['Doctor']['clinic_count'] = $count_cl;
			$doc_detail['Doctor']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
		}
		if($count == 5)
		{
			$special_1 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[0]."'");
			$special_2 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[1]."'");
			$special_3 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[2]."'");
			$special_4 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[3]."'");
			$special_5 = $this->Specialization->query("SELECT * FROM specializations WHERE id='".$expl_special[4]."'");
			$doc_detail['Doctor']['spec1'] = $special_1[0]['specializations']['display_name'];
			$doc_detail['Doctor']['spec2'] = $special_2[0]['specializations']['display_name'];
			$doc_detail['Doctor']['spec3'] = $special_3[0]['specializations']['display_name'];
			$doc_detail['Doctor']['spec4'] = $special_4[0]['specializations']['display_name'];
			$doc_detail['Doctor']['spec5'] = $special_5[0]['specializations']['display_name'];
			$doc_detail['Doctor']['special_name'] = $special_1[0]['specializations']['display_name'].','.$special_2[0]['specializations']['display_name'].','.$special_3[0]['specializations']['display_name'].','.$special_4[0]['specializations']['display_name'].','.$special_5[0]['specializations']['display_name'];
			$find_clinic = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_detail['Doctor']['id'])));
			$count_cl = $this->DoctorClinic->find('count',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_detail['Doctor']['id'])));
			$g = 0;
			foreach($find_clinic as $k_cl => $v_cl)
			{
				$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				
				
				if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day1'] = 'Mo'; $doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day2'] = 'Tu'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day3'] = 'We'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day4'] = 'Th'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day5'] = 'Fr'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day6'] = 'Sa'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$doc_detail['Doctor']['clinic_info'][$g]['day7'] = 'Su'; if(empty($doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'])){$doc_detail['Doctor']['clinic_info'][$g]['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$doc_detail['Doctor']['clinic_info'][$g]['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
				
				
				$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$mor1 = 0;
				foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
				{
					if(!empty($cltm1_val['BookAppointment']))
					{
						$mor11 = 1;
						foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
						{
							if($app_cltm1_val['status'] == 1)
							{
								$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
								$mor11++;
							}
						}
					}
					$mor1++;
				}
				$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$mor2 = 0;
				foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
				{
					if(!empty($cltm2_val['BookAppointment']))
					{
						$mor22 = 1;
						foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
						{
							if($app_cltm2_val['status'] == 1)
							{
								$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
								$mor22++;
							}
						}
					}
					$mor2++;
				}
				$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$mor3 = 0;
				foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
				{
					if(!empty($cltm3_val['BookAppointment']))
					{
						$mor33 = 1;
						foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
						{
							if($app_cltm3_val['status'] == 1)
							{
								$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
								$mor33++;
							}
						}
					}
					$mor3++;
				}
				$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$mor4 = 0;
				foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
				{
					if(!empty($cltm4_val['BookAppointment']))
					{
						$mor44 = 1;
						foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
						{
							if($app_cltm4_val['status'] == 1)
							{
								$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
								$mor44++;
							}
						}
					}
					$mor4++;
				}
				$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$mor5 = 0;
				foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
				{
					if(!empty($cltm5_val['BookAppointment']))
					{
						$mor55 = 1;
						foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
						{
							if($app_cltm5_val['status'] == 1)
							{
								$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
								$mor55++;
							}
						}
					}
					$mor5++;
				}
				$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$mor6 = 0;
				foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
				{
					if(!empty($cltm6_val['BookAppointment']))
					{
						$mor66 = 1;
						foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
						{
							if($app_cltm6_val['status'] == 1)
							{
								$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
								$mor66++;
							}
						}
					}
					$mor6++;
				}
				$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$mor7 = 0;
				foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
				{
					if(!empty($cltm7_val['BookAppointment']))
					{
						$mor77 = 1;
						foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
						{
							if($app_cltm7_val['status'] == 1)
							{
								$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
								$mor77++;
							}
						}
					}
					$mor7++;
				}
				
				$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$aft1 = 0;
				foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
				{
					if(!empty($clta1_val['BookAppointment']))
					{
						$aft11 = 1;
						foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
						{
							if($app_clta1_val['status'] == 1)
							{
								$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
								$aft11++;
							}
						}
					}
					$aft1++;
				}
				$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$aft2 = 0;
				foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
				{
					if(!empty($clta2_val['BookAppointment']))
					{
						$aft22 = 1;
						foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
						{
							if($app_clta2_val['status'] == 1)
							{
								$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
								$aft22++;
							}
						}
					}
					$aft2++;
				}
				$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$aft3 = 0;
				foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
				{
					if(!empty($clta3_val['BookAppointment']))
					{
						$aft33 = 1;
						foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
						{
							if($app_clta3_val['status'] == 1)
							{
								$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
								$aft33++;
							}
						}
					}
					$aft3++;
				}
				$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$aft4 = 0;
				foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
				{
					if(!empty($clta4_val['BookAppointment']))
					{
						$aft44 = 1;
						foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
						{
							if($app_clta4_val['status'] == 1)
							{
								$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
								$aft44++;
							}
						}
					}
					$aft4++;
				}
				$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$aft5 = 0;
				foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
				{
					if(!empty($clta5_val['BookAppointment']))
					{
						$aft55 = 1;
						foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
						{
							if($app_clta5_val['status'] == 1)
							{
								$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
								$aft55++;
							}
						}
					}
					$aft5++;
				}
				$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$aft6 = 0;
				foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
				{
					if(!empty($clta6_val['BookAppointment']))
					{
						$aft66 = 1;
						foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
						{
							if($app_clta6_val['status'] == 1)
							{
								$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
								$aft66++;
							}
						}
					}
					$aft6++;
				}
				$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$aft7 = 0;
				foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
				{
					if(!empty($clta7_val['BookAppointment']))
					{
						$aft77 = 1;
						foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
						{
							if($app_clta7_val['status'] == 1)
							{
								$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
								$aft77++;
							}
						}
					}
					$aft7++;
				}
				
				$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$evn1 = 0;
				foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
				{
					if(!empty($clte1_val['BookAppointment']))
					{
						$evn11 = 1;
						foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
						{
							if($app_clte1_val['status'] == 1)
							{
								$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
								$evn11++;
							}
						}
					}
					$evn1++;
				}
				$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$evn2 = 0;
				foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
				{
					if(!empty($clte2_val['BookAppointment']))
					{
						$evn22 = 1;
						foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
						{
							if($app_clte2_val['status'] == 1)
							{
								$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
								$evn22++;
							}
						}
					}
					$evn2++;
				}
				$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$evn3 = 0;
				foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
				{
					if(!empty($clte3_val['BookAppointment']))
					{
						$evn33 = 1;
						foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
						{
							if($app_clte3_val['status'] == 1)
							{
								$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
								$evn33++;
							}
						}
					}
					$evn3++;
				}
				$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$evn4 = 0;
				foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
				{
					if(!empty($clte4_val['BookAppointment']))
					{
						$evn44 = 1;
						foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
						{
							if($app_clte4_val['status'] == 1)
							{
								$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
								$evn44++;
							}
						}
					}
					$evn4++;
				}
				$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$evn5 = 0;
				foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
				{
					if(!empty($clte5_val['BookAppointment']))
					{
						$evn55 = 1;
						foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
						{
							if($app_clte5_val['status'] == 1)
							{
								$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
								$evn55++;
							}
						}
					}
					$evn5++;
				}
				$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$evn6 = 0;
				foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
				{
					if(!empty($clte6_val['BookAppointment']))
					{
						$evn66 = 1;
						foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
						{
							if($app_clte6_val['status'] == 1)
							{
								$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
								$evn66++;
							}
						}
					}
					$evn6++;
				}
				$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$evn7 = 0;
				foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
				{
					if(!empty($clte7_val['BookAppointment']))
					{
						$evn77 = 1;
						foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
						{
							if($app_clte7_val['status'] == 1)
							{
								$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
								$evn77++;
							}
						}
					}
					$evn7++;
				}
				
				$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt1 = 0;
				foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
				{
					if(!empty($cltn1_val['BookAppointment']))
					{
						$ngt11 = 1;
						foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
						{
							if($app_cltn1_val['status'] == 1)
							{
								$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
								$ngt11++;
							}
						}
					}
					$ngt1++;
				}
				$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt2 = 0;
				foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
				{
					if(!empty($cltn2_val['BookAppointment']))
					{
						$ngt22 = 1;
						foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
						{
							if($app_cltn2_val['status'] == 1)
							{
								$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
								$ngt22++;
							}
						}
					}
					$ngt2++;
				}
				$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt3 = 0;
				foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
				{
					if(!empty($cltn3_val['BookAppointment']))
					{
						$ngt33 = 1;
						foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
						{
							if($app_cltn3_val['status'] == 1)
							{
								$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
								$ngt33++;
							}
						}
					}
					$ngt3++;
				}
				$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt4 = 0;
				foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
				{
					if(!empty($cltn4_val['BookAppointment']))
					{
						$ngt44 = 1;
						foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
						{
							if($app_cltn4_val['status'] == 1)
							{
								$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
								$ngt44++;
							}
						}
					}
					$ngt4++;
				}
				$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt5 = 0;
				foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
				{
					if(!empty($cltn5_val['BookAppointment']))
					{
						$ngt55 = 1;
						foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
						{
							if($app_cltn5_val['status'] == 1)
							{
								$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
								$ngt55++;
							}
						}
					}
					$ngt5++;
				}
				$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt6 = 0;
				foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
				{
					if(!empty($cltn6_val['BookAppointment']))
					{
						$ngt66 = 1;
						foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
						{
							if($app_cltn6_val['status'] == 1)
							{
								$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
								$ngt66++;
							}
						}
					}
					$ngt6++;
				}
				$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
				$ngt7 = 0;
				foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
				{
					if(!empty($cltn7_val['BookAppointment']))
					{
						$ngt77 = 1;
						foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
						{
							if($app_cltn7_val['status'] == 1)
							{
								$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
								$ngt77++;
							}
						}
					}
					$ngt7++;
				}
				
				$expl_clinic_address = explode('*',$v_cl['DoctorClinic']['clinic_address']);
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_id'] = $v_cl['DoctorClinic']['id'];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_name'] = $v_cl['DoctorClinic']['clinic_name'];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_address1'] = $expl_clinic_address[0];
				$doc_detail['Doctor']['clinic_info'][$g]['Clinic_address2'] = $expl_clinic_address[1];
				
				
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor1'] = $clinic_timing_mor1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor2'] = $clinic_timing_mor2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor3'] = $clinic_timing_mor3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor4'] = $clinic_timing_mor4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor5'] = $clinic_timing_mor5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor6'] = $clinic_timing_mor6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_mor7'] = $clinic_timing_mor7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft1'] = $clinic_timing_aft1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft2'] = $clinic_timing_aft2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft3'] = $clinic_timing_aft3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft4'] = $clinic_timing_aft4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft5'] = $clinic_timing_aft5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft6'] = $clinic_timing_aft6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_aft7'] = $clinic_timing_aft7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn1'] = $clinic_timing_evn1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn2'] = $clinic_timing_evn2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn3'] = $clinic_timing_evn3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn4'] = $clinic_timing_evn4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn5'] = $clinic_timing_evn5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn6'] = $clinic_timing_evn6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_evn7'] = $clinic_timing_evn7;
				
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt1'] = $clinic_timing_ngt1;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt2'] = $clinic_timing_ngt2;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt3'] = $clinic_timing_ngt3;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt4'] = $clinic_timing_ngt4;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt5'] = $clinic_timing_ngt5;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt6'] = $clinic_timing_ngt6;
				$doc_detail['Doctor']['clinic_info'][$g]['clinic_timing_ngt7'] = $clinic_timing_ngt7;
				$g++;
			}
			$doc_detail['Doctor']['clinic_count'] = $count_cl;
			$doc_detail['Doctor']['doc_desc_count'] = strlen($doc_detail['Doctor']['own_desc']);
		}
		$user_detail = $this->Session->read('UserDetail');
		$this->set('user_detail',$user_detail);
		$this->set('doc_detail',$doc_detail);
		/*if(!empty($book_stat) && $book_stat=='booked')
		{
			$this->set('book_stat',$book_stat);
			$this->set('form_id',base64_decode($form_id));
			$this->set('name',base64_decode($name));
			$this->set('date',base64_decode($date));
			$this->set('time',base64_decode($time));
			$this->set('appoint',base64_decode($appoint_for));
		}
		if(!empty($book_stat) && $book_stat=='not_booked')
		{
			$this->set('book_stat',$book_stat);
			$this->set('form_id',base64_decode($form_id));
			$this->set('name',base64_decode($name));
			$this->set('date',base64_decode($date));
			$this->set('time',base64_decode($time));
			$this->set('appoint',base64_decode($appoint_for));
		}*/
		if(!empty($book_stat))
		{
			$this->set('book_appoint','Request sent for home visit');
		}
	}
	
	function login_book_appointment($doc_id=NULL)
	{
		if(!empty($this->data))
		{
			$find_user = $this->User->find('first',array('conditions'=>array('User.email'=>$this->data['Login']['username'],'User.passwd'=>$this->data['Login']['pass'])));
			if(!empty($find_user))
			{
				$this->Session->write('UserDetail',$find_user);
				$this->redirect('/pages/doctor_detail/'.$doc_id);
			}
			else
			{
				$find_user = $this->User->find('first',array('conditions'=>array('User.contact'=>$this->data['Login']['username'],'User.passwd'=>$this->data['Login']['pass'])));
				if(!empty($find_user))
				{
					$this->Session->write('UserDetail',$find_user);
					$this->redirect('/pages/doctor_detail/'.$doc_id);
				}
				else
				{
					$this->redirect('/pages/login_page/'.$doc_id);
				}
			}
		}
	}
	
	function book_appointment($doc_id=NULL,$clinic_id=NULL,$clinic_time=NULL,$day=NULL,$date=NULL,$clinitime_id=NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Book Appointment');
		$dec_doc_id = base64_decode($doc_id);
		$dec_clinic_id = base64_decode($clinic_id);
		$dec_clinic_time = base64_decode($clinic_time);
		$dec_day = base64_decode($day);
		$dec_date = base64_decode($date);
		$dec_clinictime_id = base64_decode($clinitime_id);
		
		
		
		$user_detail = $this->Session->read('UserDetail');
		$doctor = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$dec_doc_id)));
		$doc_clinic = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.id'=>$dec_clinic_id)));
		
		
		$all_doc_clinic = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$dec_doc_id)));
		if(!empty($this->data))
		{
			
			$check_time_slot = $this->BookAppointment->find('first',array('conditions'=>array('BookAppointment.clinic_time_id'=>$this->data['BookAppointment']['clinictime_id'],'BookAppointment.status'=>1,'BookAppointment.appoint_date'=>$dec_date)));
			
			if($this->data['BookAppointment']['user_id'] != 0)
			{
				$get_user_name = $this->User->find('first',array('conditions'=>array('User.id'=>$this->data['BookAppointment']['user_id'])));
			}
			
			if(empty($check_time_slot))
			{
				
				$check_last_appoint = $this->BookAppointment->find('first',array('order'=>array('BookAppointment.id DESC'),'limit'=>1));
				if(empty($check_last_appoint))
				{
					$this->data['BookAppointment']['appointment_id'] = '10000';
				}
				else
				{
					$this->data['BookAppointment']['appointment_id'] = ($check_last_appoint['BookAppointment']['appointment_id']+1);
				}
				$this->data['BookAppointment']['clinic_time_id'] = $this->data['BookAppointment']['clinictime_id'];
				$this->data['BookAppointment']['doctor_id'] = $this->data['BookAppointment']['doctor_id'];
				$this->data['BookAppointment']['user_id'] = $this->data['BookAppointment']['user_id'];
				$this->data['BookAppointment']['clinic_id'] = $this->data['BookAppointment']['doctor_clinic_id'];
				$this->data['BookAppointment']['doctor_name'] = $doctor['Doctor']['first_name'].' '.$doctor['Doctor']['last_name'];
				if($this->data['BookAppointment']['user_id'] != 0)
				{
					$this->data['BookAppointment']['user_name'] = $user_detail['User']['first_name'].' '.$user_detail['User']['last_name'];
					$this->data['BookAppointment']['user_contact'] = $user_detail['User']['contact'];
				}
				else
				{
					$this->data['BookAppointment']['user_name'] = $this->data['BookAppointment']['pat_name'];
					$this->data['BookAppointment']['user_contact'] = $this->data['BookAppointment']['pat_contact'];
				}
				$this->data['BookAppointment']['time_slot'] = $this->data['BookAppointment']['clinic_time'];
				$this->data['BookAppointment']['appointment_for'] = 'CL';
				$this->data['BookAppointment']['reason'] = $this->data['BookAppointment']['reason'];
				$this->data['BookAppointment']['home_address'] = '';
				$this->data['BookAppointment']['appoint_day'] = $this->data['BookAppointment']['day'];
				$this->data['BookAppointment']['appoint_date'] = $this->data['BookAppointment']['date'];
				$mt_rand = mt_rand(1111,9999);
				$this->data['BookAppointment']['otp'] = $mt_rand;
				$this->data['BookAppointment']['status'] = 4;
				
				if($this->BookAppointment->create($this->data))
				{
					
					if($this->BookAppointment->save($this->data))
					{
						$get_lat_insert_id = $this->BookAppointment->getLastInsertId();
						
						if(!empty($get_lat_insert_id))
						{
							$num_user = $this->data['BookAppointment']['pat_contact'];
							$mess = 'Please use '.$mt_rand.' code to verify your Appointment Booking request.';
							$this->__sms_message($num_user,$mess); 
						}
						
						$doctor_name = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$this->data['BookAppointment']['doctor_id'])));
						$name = $doctor_name['Doctor']['title'].'. '.$doctor_name['Doctor']['first_name'].' '.$doctor_name['Doctor']['last_name'];
						$date_display = date('d-M-Y',strtotime(base64_decode($date)));
						
						//$update_row = $this->ClinicTime->query("UPDATE clinic_time SET user_book='1',user_book_date='".date('Y-m-d',strtotime($this->data['BookAppointment']['date']))."' WHERE id='".$this->data['BookAppointment']['clinictime_id']."'");
						$this->set('set_mess','Appointment booked');
						$this->set('last_id',$get_lat_insert_id);
						if($this->data['BookAppointment']['user_id'] != 0)
						{
							$this->set('p_appoint_id',$this->data['BookAppointment']['appointment_id']);
							$this->set('p_name_booked',$get_user_name['User']['first_name'].' '.$get_user_name['User']['last_name']);
							$this->set('p_contact_booked',$get_user_name['User']['contact']);
						}
						else
						{
							$this->set('p_appoint_id',$this->data['BookAppointment']['appointment_id']);
							$this->set('p_name_booked',$this->data['BookAppointment']['pat_name']);
							$this->set('p_contact_booked',$this->data['BookAppointment']['pat_contact']);
						}
						$this->set('p_reason_booked',$this->data['BookAppointment']['reason']);
					}
				}
			}
			else
			{
				$doctor_name = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$dec_doc_id)));
				$name = $doctor_name['Doctor']['title'].'. '.$doctor_name['Doctor']['first_name'].' '.$doctor_name['Doctor']['last_name'];
				$date_display = date('d-M-Y',strtotime(base64_decode($date)));
			
				$this->set('set_mess','Time Slot Booked');
				//$this->redirect('/pages/doctor_detail/'.$doc_id.'/not_booked/'.$clinitime_id.'/'.base64_encode($name).'/'.base64_encode($date_display).'/'.$clinic_time.'/'.base64_encode($appoint_for));
				
			}
		}
		
		$this->set('doctor',$doctor);
		$this->set('doc_clinic',$doc_clinic);
		$this->set('app_time',$dec_clinic_time);
		$this->set('app_day',$dec_day);
		$this->set('app_date',$dec_date);
		$this->set('user_detail',$user_detail);
		$this->set('doc_id',$doc_id);
		$this->set('clinic_id',$clinic_id);
		$this->set('clinic_time',$clinic_time);
		$this->set('day',$day);
		$this->set('date',$date);
		$this->set('clinitime_id',$clinitime_id);
		$this->set('all_doc_clinic',$all_doc_clinic);
	}
	
	function login_book_appointment_find($name=NULL,$speciality=NULL,$state=NULL)
	{
		if(!empty($this->data))
		{
			$name = $this->data['Login']['name'];
			$speciality = $this->data['Login']['speciality'];
			$state = $this->data['Login']['state'];
			$find_user = $this->User->find('first',array('conditions'=>array('User.email'=>$this->data['Login']['username'],'User.passwd'=>$this->data['Login']['pass'])));
			if(!empty($find_user))
			{
				$this->Session->write('UserDetail',$find_user);
				if($name != 'novalue' && $speciality == 'novalue' && $state == 'novalue')
				{
					$this->redirect('/pages/find_doctor/page:1/name:'.$name);
				}
				if($name == 'novalue' && $speciality != 'novalue' && $state == 'novalue')
				{
					$this->redirect('/pages/find_doctor/page:1/specialization:'.$speciality);
				}
				if($name == 'novalue' && $speciality == 'novalue' && $state != 'novalue')
				{
					$this->redirect('/pages/find_doctor/page:1/state:'.$state);
				}
				if($name != 'novalue' && $speciality != 'novalue' && $state == 'novalue')
				{
					$this->redirect('/pages/find_doctor/page:1/name:'.$name.'/specialization:'.$speciality);
				}
				if($name != 'novalue' && $speciality == 'novalue' && $state != 'novalue')
				{
					$this->redirect('/pages/find_doctor/page:1/name:'.$name.'/state:'.$state);
				}
				if($name == 'novalue' && $speciality != 'novalue' && $state != 'novalue')
				{
					$this->redirect('/pages/find_doctor/page:1/specialization:'.$speciality.'/state:'.$state);
				}
				if($name != 'novalue' && $speciality != 'novalue' && $state != 'novalue')
				{
					$this->redirect('/pages/find_doctor/page:1/name:'.$name.'/specialization:'.$speciality.'/state:'.$state);
				}
			}
			else
			{
				$find_user = $this->User->find('first',array('conditions'=>array('User.contact'=>$this->data['Login']['username'],'User.passwd'=>$this->data['Login']['pass'])));
				if(!empty($find_user))
				{
					$this->Session->write('UserDetail',$find_user);
					if($name != 'novalue' && $speciality == 'novalue' && $state == 'novalue')
					{
						$this->redirect('/pages/find_doctor/page:1/name:'.$name);
					}
					if($name == 'novalue' && $speciality != 'novalue' && $state == 'novalue')
					{
						$this->redirect('/pages/find_doctor/page:1/specialization:'.$speciality);
					}
					if($name == 'novalue' && $speciality == 'novalue' && $state != 'novalue')
					{
						$this->redirect('/pages/find_doctor/page:1/state:'.$state);
					}
					if($name != 'novalue' && $speciality != 'novalue' && $state == 'novalue')
					{
						$this->redirect('/pages/find_doctor/page:1/name:'.$name.'/specialization:'.$speciality);
					}
					if($name != 'novalue' && $speciality == 'novalue' && $state != 'novalue')
					{
						$this->redirect('/pages/find_doctor/page:1/name:'.$name.'/state:'.$state);
					}
					if($name == 'novalue' && $speciality != 'novalue' && $state != 'novalue')
					{
						$this->redirect('/pages/find_doctor/page:1/specialization:'.$speciality.'/state:'.$state);
					}
					if($name != 'novalue' && $speciality != 'novalue' && $state != 'novalue')
					{
						$this->redirect('/pages/find_doctor/page:1/name:'.$name.'/specialization:'.$speciality.'/state:'.$state);
					}
				}
				else
				{
					if($name != 'novalue' && $speciality == 'novalue' && $state == 'novalue')
					{
						$this->redirect('/pages/login_page/'.$name.'/'.$speciality.'/'.$state);
					}
					if($name == 'novalue' && $speciality != 'novalue' && $state == 'novalue')
					{
						$this->redirect('/pages/login_page/'.$name.'/'.$speciality.'/'.$state);
					}
					if($name == 'novalue' && $speciality == 'novalue' && $state != 'novalue')
					{
						$this->redirect('/pages/login_page/'.$name.'/'.$speciality.'/'.$state);
					}
					if($name != 'novalue' && $speciality != 'novalue' && $state == 'novalue')
					{
						$this->redirect('/pages/login_page/'.$name.'/'.$speciality.'/'.$state);
					}
					if($name != 'novalue' && $speciality == 'novalue' && $state != 'novalue')
					{
						$this->redirect('/pages/login_page/'.$name.'/'.$speciality.'/'.$state);
					}
					if($name == 'novalue' && $speciality != 'novalue' && $state != 'novalue')
					{
						$this->redirect('/pages/login_page/'.$name.'/'.$speciality.'/'.$state);
					}
					if($name != 'novalue' && $speciality != 'novalue' && $state != 'novalue')
					{
						$this->redirect('/pages/login_page/'.$name.'/'.$speciality.'/'.$state);
					}
				}
			}
		}
	}
	
	function book_appointment_home()
	{
		if(!empty($this->data))
		{
			$user_detail = $this->Session->read('UserDetail');
			$doctor = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$this->data['BookAppointment']['doctor_id'])));
			$find_last_appoint_id = $this->BookAppointment->find('first',array('order'=>array('BookAppointment.id DESC')));
			if(!empty($find_last_appoint_id))
			{
				$this->data['BookAppointment']['appointment_id'] = ($find_last_appoint_id['BookAppointment']['appointment_id']+1);
			}
			else
			{
				$this->data['BookAppointment']['appointment_id'] = '10000';
			}
			
			$this->data['BookAppointment']['doctor_id'] = $this->data['BookAppointment']['doctor_id'];
			if(empty($this->data['BookAppointment']['user_id']))
			{
				$this->data['BookAppointment']['user_id'] = 0;
			}
			else
			{
				$this->data['BookAppointment']['user_id'] = $this->data['BookAppointment']['user_id'];
			}
			$this->data['BookAppointment']['clinic_id'] = 0;
			$this->data['BookAppointment']['doctor_name'] = $doctor['Doctor']['first_name'].' '.$doctor['Doctor']['last_name'];
			$this->data['BookAppointment']['user_name'] = $this->data['BookAppointment']['pat_name'];
			$this->data['BookAppointment']['user_contact'] = $this->data['BookAppointment']['pat_contact'];
			$this->data['BookAppointment']['time_slot'] = $this->data['BookAppointment']['time_slot'];
			$this->data['BookAppointment']['appointment_for'] = 'HV';
			$this->data['BookAppointment']['reason'] = $this->data['BookAppointment']['reason'];
			if(!empty($this->data['BookAppointment']['add2']))
			{
				$this->data['BookAppointment']['home_address'] = $this->data['BookAppointment']['add1'].'*'.$this->data['BookAppointment']['add2'];
			}
			else
			{
				$this->data['BookAppointment']['home_address'] = $this->data['BookAppointment']['add1'];
			}
			$this->data['BookAppointment']['appoint_day'] = '';
			$this->data['BookAppointment']['appoint_date'] = date('Y-m-d',strtotime($this->data['BookAppointment']['appoint_date']));
			$this->data['BookAppointment']['otp'] = '';
			$this->data['BookAppointment']['status'] = 1;
			if($this->BookAppointment->create($this->data))
			{
				if($this->BookAppointment->save($this->data))
				{
					$this->redirect('/pages/doctor_detail/'.base64_encode($this->data['BookAppointment']['doctor_id']).'/booked');
				}
			}
		}
	}
	
	function landing_page()
	{
		$this->layout = 'landing_page';
		$this->set('title_for_layout','Doctor Landing Page');
	}
	
	function login_doctor()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Doctor Login Panel');
		if(!empty($this->data))
		{
			$find_doctor = $this->Doctor->find('first',array('conditions'=>array('Doctor.email'=>$this->data['LoginDoctor']['username'],'Doctor.password'=>md5($this->data['LoginDoctor']['pass']))));
			if(!empty($find_doctor))
			{
				$this->Session->write('DoctorDetail',$find_doctor);
				$this->redirect('/pages/appointment');
			}
			else
			{
				$find_doctor = $this->Doctor->find('first',array('conditions'=>array('Doctor.contact'=>$this->data['LoginDoctor']['username'],'Doctor.password'=>md5($this->data['LoginDoctor']['pass']))));
				if(!empty($find_doctor))
				{
					$this->Session->write('DoctorDetail',$find_doctor);
					$this->redirect('/pages/appointment');
				}
				else
				{
					$this->set('alert_mess','Username OR Password did not match');
				}
			}
		}
	}
	
	function doctor_logout()
	{
		$this->Session->delete('DoctorDetail');
		$this->redirect('/pages/login_doctor');
	}
	
	function doctor_account()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Doctor Account');
		$doc_detail = $this->Session->read('DoctorDetail');
		if(!empty($doc_detail))
		{
			$get_state = $this->State->find('first',array('conditions'=>array('State.id'=>$doc_detail['Doctor']['state'])));
			$doc_detail['Doctor']['state'] = $get_state['State']['name'];
			$this->set('DoctorDetail',$doc_detail);
		}
		else
		{
			$this->redirect('/pages/login_doctor');
		}
	}
	
	function edit_personal_doctor()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Edit Doctor Personal Details');
		$doc_detail = $this->Session->read('DoctorDetail');
		if(!empty($doc_detail))
		{
			if(!empty($this->data))
			{
				
				if(!empty($this->data['Doctor']['photo']['name']))
				{
					$file = $this->File->uploadFile($this->data['Doctor']['photo'], DOCTOR_IMAGE_STORE_PATH, true,array('jpg','gif','jpeg','png','JPG','GIF','JPEG','PNG','bmp','BMP'));
				
					$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
					$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_WIDTH);
					$this->Image->save(DOCTOR_IMAGE_THUMB_PATH.$file['name']);
					
					$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
					$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_MEDIUM_WIDTH);
					$this->Image->save(DOCTOR_IMAGE_MEDIUM_PATH.$file['name']);
					
					$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
					$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_SMALL_WIDTH);
					$this->Image->save(DOCTOR_IMAGE_SMALL_PATH.$file['name']);
					
					$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
					$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_VERYSMALL_WIDTH);
					$this->Image->save(DOCTOR_IMAGE_VERYSMALL_PATH.$file['name']);
					
					$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
					$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_BIGSMALL_WIDTH);
					$this->Image->save(DOCTOR_IMAGE_BIGSMALL_PATH.$file['name']);
					
					$this->File->deleteFile(DOCTOR_IMAGE_STORE_PATH.$this->data['Doctor']['old_image']);
					$this->File->deleteFile(DOCTOR_IMAGE_THUMB_PATH.$this->data['Doctor']['old_image']);
					$this->File->deleteFile(DOCTOR_IMAGE_MEDIUM_PATH.$this->data['Doctor']['old_image']);
					$this->File->deleteFile(DOCTOR_IMAGE_SMALL_PATH.$this->data['Doctor']['old_image']);
					$this->File->deleteFile(DOCTOR_IMAGE_VERYSMALL_PATH.$this->data['Doctor']['old_image']);
					$this->File->deleteFile(DOCTOR_IMAGE_BIGSMALL_PATH.$this->data['Doctor']['old_image']);
					
					$this->data['Doctor']['image'] = $file['name'];
				}
				$this->data['Doctor']['dob'] = $this->data['Doctor']['day'].'-'.$this->data['Doctor']['month'].'-'.$this->data['Doctor']['year'];
				if(!empty($this->data['Doctor']['address1']) && empty($this->data['Doctor']['address2']))
				{
					$this->data['Doctor']['address'] = $this->data['Doctor']['address1'];
				}
				if(!empty($this->data['Doctor']['address1']) && !empty($this->data['Doctor']['address2']))
				{
					$this->data['Doctor']['address'] = $this->data['Doctor']['address1'].'*'.$this->data['Doctor']['address2'];
				}
			
				if($this->Doctor->create($this->data))
				{
					if($this->Doctor->save($this->data))
					{
						$this->Session->delete('DoctorDetail');
						$doc_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$this->data['Doctor']['id'])));
						$this->Session->write('DoctorDetail',$doc_detail);
						$this->redirect('/pages/doctor_account');
					}
				}
			}
			$state = $this->State->find('all',array('conditions'=>array('State.status'=>1)));
			$this->set('state',$state);
			$this->set('DoctorDetail',$doc_detail);
		}
		else
		{
			$this->redirect('/pages/login_doctor');
		}
	}
	
	function prof_detail()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Edit Doctor Proffessional Details');
		$doc_detail = $this->Session->read('DoctorDetail');
		if(!empty($doc_detail))
		{
			if(!empty($this->data))
			{
				$impl_special = implode(',',$this->data['Doctor']['specialization']);
				$this->data['Doctor']['specialization'] = $impl_special;
				$this->data['Doctor']['status'] = 0;
				if($this->Doctor->create($this->data))
				{
					if($this->Doctor->save($this->data))
					{
						$this->redirect('/pages/proffessional_detail');
					}
				}
			}
			$expl_spec = explode(',',$doc_detail['Doctor']['specialization']);
			$f = 0;
			foreach($expl_spec as $spec_k => $spec_v)
			{
				$doc_detail['Doctor']['special'][$f] = $spec_v;
				$f++;
			}
			$this->data = $doc_detail;
			$specialization = $this->Specialization->find('all',array('conditions'=>array('Specialization.status'=>1)));
			$this->set('specialization',$specialization);
		}
		else
		{
			$this->redirect('/pages/login_doctor');
		}
	}
	
	function proffessional_detail()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Doctor Proffessional Details');
		$doc_detail = $this->Session->read('DoctorDetail');
		if(!empty($doc_detail))
		{
			$expl_spec = explode(',',$doc_detail['Doctor']['specialization']);
			$count = count($expl_spec);
			if($count == 1)
			{
				$spec1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[0])));
				$doc_detail['Doctor']['special_1'] = $spec1['Specialization']['display_name'];
				$this->set('doc_detail',$doc_detail);
			}
			if($count == 2)
			{
				$spec1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[0])));
				$spec2 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[1])));
				$doc_detail['Doctor']['special_1'] = $spec1['Specialization']['display_name'];
				$doc_detail['Doctor']['special_2'] = $spec2['Specialization']['display_name'];
				$this->set('doc_detail',$doc_detail);
			}
			if($count == 3)
			{
				$spec1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[0])));
				$spec2 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[1])));
				$spec3 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[2])));
				$doc_detail['Doctor']['special_1'] = $spec1['Specialization']['display_name'];
				$doc_detail['Doctor']['special_2'] = $spec2['Specialization']['display_name'];
				$doc_detail['Doctor']['special_3'] = $spec3['Specialization']['display_name'];
				$this->set('doc_detail',$doc_detail);
			}
			if($count == 4)
			{
				$spec1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[0])));
				$spec2 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[1])));
				$spec3 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[2])));
				$spec4 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[3])));
				$doc_detail['Doctor']['special_1'] = $spec1['Specialization']['display_name'];
				$doc_detail['Doctor']['special_2'] = $spec2['Specialization']['display_name'];
				$doc_detail['Doctor']['special_3'] = $spec3['Specialization']['display_name'];
				$doc_detail['Doctor']['special_4'] = $spec4['Specialization']['display_name'];
				$this->set('doc_detail',$doc_detail);
			}
			if($count == 5)
			{
				$spec1 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[0])));
				$spec2 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[1])));
				$spec3 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[2])));
				$spec4 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[3])));
				$spec5 = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$expl_spec[4])));
				$doc_detail['Doctor']['special_1'] = $spec1['Specialization']['display_name'];
				$doc_detail['Doctor']['special_2'] = $spec2['Specialization']['display_name'];
				$doc_detail['Doctor']['special_3'] = $spec3['Specialization']['display_name'];
				$doc_detail['Doctor']['special_4'] = $spec4['Specialization']['display_name'];
				$doc_detail['Doctor']['special_5'] = $spec5['Specialization']['display_name'];
				$this->set('doc_detail',$doc_detail);
			}
		}
		else
		{
			$this->redirect('/pages/login_doctor');
		}
	}
	
	function clinic($del=NULL)
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Doctor Clinics');
		$doc_detail = $this->Session->read('DoctorDetail');
		if(!empty($doc_detail))
		{
			$find_clinics = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_detail['Doctor']['id'])));
			$v = 0;
			foreach($find_clinics as $k_cl => $v_cl)
			{
				$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
				$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
				
				
				if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$find_clinics[$v]['DoctorClinic']['day1'] = 'Mo'; $find_clinics[$v]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $find_clinics[$v]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$find_clinics[$v]['DoctorClinic']['day2'] = 'Tu'; if(empty($find_clinics[$v]['DoctorClinic']['clinic_s_time'])){$find_clinics[$v]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$find_clinics[$v]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$find_clinics[$v]['DoctorClinic']['day3'] = 'We'; if(empty($find_clinics[$v]['DoctorClinic']['clinic_s_time'])){$find_clinics[$v]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$find_clinics[$v]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$find_clinics[$v]['DoctorClinic']['day4'] = 'Th'; if(empty($find_clinics[$v]['DoctorClinic']['clinic_s_time'])){$find_clinics[$v]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$find_clinics[$v]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$find_clinics[$v]['DoctorClinic']['day5'] = 'Fr'; if(empty($find_clinics[$v]['DoctorClinic']['clinic_s_time'])){$find_clinics[$v]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$find_clinics[$v]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$find_clinics[$v]['DoctorClinic']['day6'] = 'Sa'; if(empty($find_clinics[$v]['DoctorClinic']['clinic_s_time'])){$find_clinics[$v]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$find_clinics[$v]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
				
				if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$find_clinics[$v]['DoctorClinic']['day7'] = 'Su'; if(empty($find_clinics[$v]['DoctorClinic']['clinic_s_time'])){$find_clinics[$v]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$find_clinics[$v]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
				
				
				$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				
				$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				
				$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				
				$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$v_cl['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.time_slot ASC')));
				
				$expl_clinic_address = explode('*',$v_cl['DoctorClinic']['clinic_address']);
				$find_clinics[$v]['DoctorClinic']['clinic_address1'] = $expl_clinic_address[0];
				$find_clinics[$v]['DoctorClinic']['clinic_address2'] = $expl_clinic_address[1];
				$find_clinics[$v]['DoctorClinic']['doctor_id'] = $doc_detail['Doctor']['id'];
				$find_clinics[$v]['DoctorClinic']['doctor_title'] = $doc_detail['Doctor']['title'];
				$find_clinics[$v]['DoctorClinic']['doctor_first_name'] = $doc_detail['Doctor']['first_name'];
				$find_clinics[$v]['DoctorClinic']['doctor_last_name'] = $doc_detail['Doctor']['last_name'];
				
				
				
				$find_clinics[$v]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
				
				$find_clinics[$v]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
				
				$find_clinics[$v]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
				
				$find_clinics[$v]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
				$find_clinics[$v]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
				$v++;
			}
			$this->set('clinic_info',$find_clinics);
			if(!empty($del) && $del == 'deleted')
			{
				$this->set('alert_mess','Clinic Information Deleted Successfully');
			}
			if(!empty($del) && $del == 'appoint')
			{
				$this->set('alert_mess','You cannot delete clinic information because someone booked their appointment for this clinic and it is in pending state.');
			}
		}
		else
		{
			$this->redirect('/pages/login_doctor');
		}
	}
	
	function delete_clinic($clinic_id=NULL)
	{
		$doc_detail = $this->Session->read('DoctorDetail');
		if(!empty($doc_detail))
		{
			$dec_clinic = base64_decode($clinic_id);
			$check_appoint = $this->BookAppointment->find('first',array('conditions'=>array('BookAppointment.status'=>1,'BookAppointment.clinic_id'=>$dec_clinic,'BookAppointment.appointment_for'=>'CL')));
			if(empty($check_appoint))
			{
				$delete_clinic_info = $this->ClinicTime->query("DELETE FROM clinic_time WHERE doctor_id='".$doc_detail['Doctor']['id']."' AND clinic_id='".$dec_clinic."'");
				$delete_clinic = $this->DoctorClinic->query("DELETE FROM doctor_clinic WHERE doctor_id='".$doc_detail['Doctor']['id']."' AND id='".$dec_clinic."'");
				$this->redirect('/pages/clinic/deleted');
			}
			else
			{
				$this->redirect('/pages/clinic/appoint');
			}
		}
		else
		{
			$this->redirect('/pages/login_doctor');
		}
	}
	
	function add_clinic_new()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Doctor Clinics');
		$doc_detail = $this->Session->read('DoctorDetail');
		if(!empty($doc_detail))
		{
			if(!empty($this->data))
			{
				$this->data['DoctorClinic']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
				$this->data['DoctorClinic']['special'] = $doc_detail['Doctor']['specialization'];
				if($doc_detail['Doctor']['admin_featured'] == 1)
				{
					$this->data['DoctorClinic']['featured'] = 1;
				}
				else
				{
					$this->data['DoctorClinic']['featured'] = 0;
				}
				if($doc_detail['Doctor']['status'] == 1)
				{
					$this->data['DoctorClinic']['verify'] = 1;
				}
				else
				{
					$this->data['DoctorClinic']['verify'] = 0;
				}
				
				$this->data['DoctorClinic']['cons_fee'] = $doc_detail['Doctor']['cons_fee'];
				
				$this->data['DoctorClinic']['clinic_name'] = $this->data['DoctorClinic']['clinic_name'];
				if(!empty($this->data['DoctorClinic']['address1']) && empty($this->data['DoctorClinic']['address2']))
				{
					$this->data['DoctorClinic']['clinic_address'] = $this->data['DoctorClinic']['address1'];
				}
				if(!empty($this->data['DoctorClinic']['address1']) && !empty($this->data['DoctorClinic']['address2']))
				{
					$this->data['DoctorClinic']['clinic_address'] = $this->data['DoctorClinic']['address1'].'*'.$this->data['DoctorClinic']['address2'];
				}
				$this->data['DoctorClinic']['status'] = 1;
				$this->data['DoctorClinic']['created'] = date('Y-m-d H:i:s');
				if($this->DoctorClinic->create($this->data))
				{
					if($this->DoctorClinic->save($this->data))
					{
						$last_insert_id = $this->DoctorClinic->getLastInsertId();
						for($i=1;$i<=189;$i++)
						{
							if($i <= 27)
							{
								$this->data['ClinicTime']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
								$this->data['ClinicTime']['clinic_id'] = $last_insert_id;
								$this->data['ClinicTime']['day'] = 1;
								if(($i > 0) && ($i <= 6))
								{
									$this->data['ClinicTime']['day_slot'] = 1;
								}
								if(($i > 6) && ($i <= 15))
								{
									$this->data['ClinicTime']['day_slot'] = 2;
								}
								if(($i > 15) && ($i <= 22))
								{
									$this->data['ClinicTime']['day_slot'] = 3;
								}
								if(($i > 22) && ($i <= 27))
								{
									$this->data['ClinicTime']['day_slot'] = 4;
								}
								
								if($this->data['DoctorClinic']['val_'.$i] != '')
								{
									$this->data['ClinicTime']['time_slot'] = $this->data['DoctorClinic']['val_'.$i];
									$this->data['ClinicTime']['doctor_choose'] = 1;
									$this->data['ClinicTime']['availability'] = 1;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								else
								{
									if($i == 1)
									{
										$this->data['ClinicTime']['time_slot'] = '09:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;	
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 2)
									{
										$this->data['ClinicTime']['time_slot'] = '09:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 3)
									{
										$this->data['ClinicTime']['time_slot'] = '10:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 4)
									{
										$this->data['ClinicTime']['time_slot'] = '10:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 5)
									{
										$this->data['ClinicTime']['time_slot'] = '11:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 6)
									{
										$this->data['ClinicTime']['time_slot'] = '11:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 7)
									{
										$this->data['ClinicTime']['time_slot'] = '12:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 8)
									{
										$this->data['ClinicTime']['time_slot'] = '12:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 9)
									{
										$this->data['ClinicTime']['time_slot'] = '01:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 10)
									{
										$this->data['ClinicTime']['time_slot'] = '01:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 11)
									{
										$this->data['ClinicTime']['time_slot'] = '02:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 12)
									{
										$this->data['ClinicTime']['time_slot'] = '02:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 13)
									{
										$this->data['ClinicTime']['time_slot'] = '03:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 14)
									{
										$this->data['ClinicTime']['time_slot'] = '03:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 15)
									{
										$this->data['ClinicTime']['time_slot'] = '04:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 16)
									{
										$this->data['ClinicTime']['time_slot'] = '04:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 17)
									{
										$this->data['ClinicTime']['time_slot'] = '05:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 18)
									{
										$this->data['ClinicTime']['time_slot'] = '05:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 19)
									{
										$this->data['ClinicTime']['time_slot'] = '06:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 20)
									{
										$this->data['ClinicTime']['time_slot'] = '06:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 21)
									{
										$this->data['ClinicTime']['time_slot'] = '07:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 22)
									{
										$this->data['ClinicTime']['time_slot'] = '07:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 23)
									{
										$this->data['ClinicTime']['time_slot'] = '08:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 24)
									{
										$this->data['ClinicTime']['time_slot'] = '08:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 25)
									{
										$this->data['ClinicTime']['time_slot'] = '09:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 26)
									{
										$this->data['ClinicTime']['time_slot'] = '09:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 27)
									{
										$this->data['ClinicTime']['time_slot'] = '10:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
								}
								if($this->ClinicTime->create($this->data))
								{
									$this->ClinicTime->save($this->data);
								}
							}
							if(($i > 27) && ($i <= 54))
							{
								$this->data['ClinicTime']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
								$this->data['ClinicTime']['clinic_id'] = $last_insert_id;
								$this->data['ClinicTime']['day'] = 2;
								if(($i > 27) && ($i <= 33))
								{
									$this->data['ClinicTime']['day_slot'] = 1;
								}
								if(($i > 33) && ($i <= 42))
								{
									$this->data['ClinicTime']['day_slot'] = 2;
								}
								if(($i > 42) && ($i <= 49))
								{
									$this->data['ClinicTime']['day_slot'] = 3;
								}
								if(($i > 49) && ($i <= 54))
								{
									$this->data['ClinicTime']['day_slot'] = 4;
								}
								
								if($this->data['DoctorClinic']['val_'.$i] != '')
								{
									$this->data['ClinicTime']['time_slot'] = $this->data['DoctorClinic']['val_'.$i];
									$this->data['ClinicTime']['doctor_choose'] = 1;
									$this->data['ClinicTime']['availability'] = 1;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								else
								{
									if($i == 28)
									{
										$this->data['ClinicTime']['time_slot'] = '09:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;	
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 29)
									{
										$this->data['ClinicTime']['time_slot'] = '09:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 30)
									{
										$this->data['ClinicTime']['time_slot'] = '10:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 31)
									{
										$this->data['ClinicTime']['time_slot'] = '10:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 32)
									{
										$this->data['ClinicTime']['time_slot'] = '11:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 33)
									{
										$this->data['ClinicTime']['time_slot'] = '11:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 34)
									{
										$this->data['ClinicTime']['time_slot'] = '12:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 35)
									{
										$this->data['ClinicTime']['time_slot'] = '12:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 36)
									{
										$this->data['ClinicTime']['time_slot'] = '01:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 37)
									{
										$this->data['ClinicTime']['time_slot'] = '01:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 38)
									{
										$this->data['ClinicTime']['time_slot'] = '02:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 39)
									{
										$this->data['ClinicTime']['time_slot'] = '02:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 40)
									{
										$this->data['ClinicTime']['time_slot'] = '03:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 41)
									{
										$this->data['ClinicTime']['time_slot'] = '03:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 42)
									{
										$this->data['ClinicTime']['time_slot'] = '04:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 43)
									{
										$this->data['ClinicTime']['time_slot'] = '04:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 44)
									{
										$this->data['ClinicTime']['time_slot'] = '05:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 45)
									{
										$this->data['ClinicTime']['time_slot'] = '05:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 46)
									{
										$this->data['ClinicTime']['time_slot'] = '06:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 47)
									{
										$this->data['ClinicTime']['time_slot'] = '06:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 48)
									{
										$this->data['ClinicTime']['time_slot'] = '07:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 49)
									{
										$this->data['ClinicTime']['time_slot'] = '07:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 50)
									{
										$this->data['ClinicTime']['time_slot'] = '08:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 51)
									{
										$this->data['ClinicTime']['time_slot'] = '08:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 52)
									{
										$this->data['ClinicTime']['time_slot'] = '09:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 53)
									{
										$this->data['ClinicTime']['time_slot'] = '09:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 54)
									{
										$this->data['ClinicTime']['time_slot'] = '10:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
								}
								if($this->ClinicTime->create($this->data))
								{
									$this->ClinicTime->save($this->data);
								}
							}
							if(($i > 54) && ($i <= 81))
							{
								$this->data['ClinicTime']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
								$this->data['ClinicTime']['clinic_id'] = $last_insert_id;
								$this->data['ClinicTime']['day'] = 3;
								if(($i > 54) && ($i <= 60))
								{
									$this->data['ClinicTime']['day_slot'] = 1;
								}
								if(($i > 60) && ($i <= 69))
								{
									$this->data['ClinicTime']['day_slot'] = 2;
								}
								if(($i > 69) && ($i <= 76))
								{
									$this->data['ClinicTime']['day_slot'] = 3;
								}
								if(($i > 76) && ($i <= 81))
								{
									$this->data['ClinicTime']['day_slot'] = 4;
								}
								
								if($this->data['DoctorClinic']['val_'.$i] != '')
								{
									$this->data['ClinicTime']['time_slot'] = $this->data['DoctorClinic']['val_'.$i];
									$this->data['ClinicTime']['doctor_choose'] = 1;
									$this->data['ClinicTime']['availability'] = 1;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								else
								{
									if($i == 55)
									{
										$this->data['ClinicTime']['time_slot'] = '09:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;	
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 56)
									{
										$this->data['ClinicTime']['time_slot'] = '09:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 57)
									{
										$this->data['ClinicTime']['time_slot'] = '10:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 58)
									{
										$this->data['ClinicTime']['time_slot'] = '10:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 59)
									{
										$this->data['ClinicTime']['time_slot'] = '11:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 60)
									{
										$this->data['ClinicTime']['time_slot'] = '11:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 61)
									{
										$this->data['ClinicTime']['time_slot'] = '12:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 62)
									{
										$this->data['ClinicTime']['time_slot'] = '12:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 63)
									{
										$this->data['ClinicTime']['time_slot'] = '01:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 64)
									{
										$this->data['ClinicTime']['time_slot'] = '01:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 65)
									{
										$this->data['ClinicTime']['time_slot'] = '02:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 66)
									{
										$this->data['ClinicTime']['time_slot'] = '02:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 67)
									{
										$this->data['ClinicTime']['time_slot'] = '03:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 68)
									{
										$this->data['ClinicTime']['time_slot'] = '03:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 69)
									{
										$this->data['ClinicTime']['time_slot'] = '04:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 70)
									{
										$this->data['ClinicTime']['time_slot'] = '04:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 71)
									{
										$this->data['ClinicTime']['time_slot'] = '05:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 72)
									{
										$this->data['ClinicTime']['time_slot'] = '05:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 73)
									{
										$this->data['ClinicTime']['time_slot'] = '06:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 74)
									{
										$this->data['ClinicTime']['time_slot'] = '06:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 75)
									{
										$this->data['ClinicTime']['time_slot'] = '07:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 76)
									{
										$this->data['ClinicTime']['time_slot'] = '07:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 77)
									{
										$this->data['ClinicTime']['time_slot'] = '08:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 78)
									{
										$this->data['ClinicTime']['time_slot'] = '08:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 79)
									{
										$this->data['ClinicTime']['time_slot'] = '09:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 80)
									{
										$this->data['ClinicTime']['time_slot'] = '09:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 81)
									{
										$this->data['ClinicTime']['time_slot'] = '10:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
								}
								if($this->ClinicTime->create($this->data))
								{
									$this->ClinicTime->save($this->data);
								}
							}
							if(($i > 81) && ($i <= 108))
							{
								$this->data['ClinicTime']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
								$this->data['ClinicTime']['clinic_id'] = $last_insert_id;
								$this->data['ClinicTime']['day'] = 4;
								if(($i > 81) && ($i <= 87))
								{
									$this->data['ClinicTime']['day_slot'] = 1;
								}
								if(($i > 87) && ($i <= 96))
								{
									$this->data['ClinicTime']['day_slot'] = 2;
								}
								if(($i > 96) && ($i <= 103))
								{
									$this->data['ClinicTime']['day_slot'] = 3;
								}
								if(($i > 103) && ($i <= 108))
								{
									$this->data['ClinicTime']['day_slot'] = 4;
								}
								
								if($this->data['DoctorClinic']['val_'.$i] != '')
								{
									$this->data['ClinicTime']['time_slot'] = $this->data['DoctorClinic']['val_'.$i];
									$this->data['ClinicTime']['doctor_choose'] = 1;
									$this->data['ClinicTime']['availability'] = 1;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								else
								{
									if($i == 82)
									{
										$this->data['ClinicTime']['time_slot'] = '09:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;	
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 83)
									{
										$this->data['ClinicTime']['time_slot'] = '09:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 84)
									{
										$this->data['ClinicTime']['time_slot'] = '10:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 85)
									{
										$this->data['ClinicTime']['time_slot'] = '10:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 86)
									{
										$this->data['ClinicTime']['time_slot'] = '11:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 87)
									{
										$this->data['ClinicTime']['time_slot'] = '11:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 88)
									{
										$this->data['ClinicTime']['time_slot'] = '12:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 89)
									{
										$this->data['ClinicTime']['time_slot'] = '12:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 90)
									{
										$this->data['ClinicTime']['time_slot'] = '01:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 91)
									{
										$this->data['ClinicTime']['time_slot'] = '01:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 92)
									{
										$this->data['ClinicTime']['time_slot'] = '02:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 93)
									{
										$this->data['ClinicTime']['time_slot'] = '02:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 94)
									{
										$this->data['ClinicTime']['time_slot'] = '03:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 95)
									{
										$this->data['ClinicTime']['time_slot'] = '03:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 96)
									{
										$this->data['ClinicTime']['time_slot'] = '04:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 97)
									{
										$this->data['ClinicTime']['time_slot'] = '04:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 98)
									{
										$this->data['ClinicTime']['time_slot'] = '05:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 99)
									{
										$this->data['ClinicTime']['time_slot'] = '05:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 100)
									{
										$this->data['ClinicTime']['time_slot'] = '06:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 101)
									{
										$this->data['ClinicTime']['time_slot'] = '06:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 102)
									{
										$this->data['ClinicTime']['time_slot'] = '07:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 103)
									{
										$this->data['ClinicTime']['time_slot'] = '07:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 104)
									{
										$this->data['ClinicTime']['time_slot'] = '08:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 105)
									{
										$this->data['ClinicTime']['time_slot'] = '08:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 106)
									{
										$this->data['ClinicTime']['time_slot'] = '09:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 107)
									{
										$this->data['ClinicTime']['time_slot'] = '09:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 108)
									{
										$this->data['ClinicTime']['time_slot'] = '10:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
								}
								if($this->ClinicTime->create($this->data))
								{
									$this->ClinicTime->save($this->data);
								}
							}
							if(($i > 108) && ($i <= 135))
							{
								$this->data['ClinicTime']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
								$this->data['ClinicTime']['clinic_id'] = $last_insert_id;
								$this->data['ClinicTime']['day'] = 5;
								if(($i > 108) && ($i <= 114))
								{
									$this->data['ClinicTime']['day_slot'] = 1;
								}
								if(($i > 114) && ($i <= 123))
								{
									$this->data['ClinicTime']['day_slot'] = 2;
								}
								if(($i > 123) && ($i <= 130))
								{
									$this->data['ClinicTime']['day_slot'] = 3;
								}
								if(($i > 130) && ($i <= 135))
								{
									$this->data['ClinicTime']['day_slot'] = 4;
								}
								
								if($this->data['DoctorClinic']['val_'.$i] != '')
								{
									$this->data['ClinicTime']['time_slot'] = $this->data['DoctorClinic']['val_'.$i];
									$this->data['ClinicTime']['doctor_choose'] = 1;
									$this->data['ClinicTime']['availability'] = 1;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								else
								{
									if($i == 109)
									{
										$this->data['ClinicTime']['time_slot'] = '09:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;	
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 110)
									{
										$this->data['ClinicTime']['time_slot'] = '09:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 111)
									{
										$this->data['ClinicTime']['time_slot'] = '10:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 112)
									{
										$this->data['ClinicTime']['time_slot'] = '10:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 113)
									{
										$this->data['ClinicTime']['time_slot'] = '11:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 114)
									{
										$this->data['ClinicTime']['time_slot'] = '11:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 115)
									{
										$this->data['ClinicTime']['time_slot'] = '12:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 116)
									{
										$this->data['ClinicTime']['time_slot'] = '12:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 117)
									{
										$this->data['ClinicTime']['time_slot'] = '01:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 118)
									{
										$this->data['ClinicTime']['time_slot'] = '01:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 119)
									{
										$this->data['ClinicTime']['time_slot'] = '02:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 120)
									{
										$this->data['ClinicTime']['time_slot'] = '02:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 121)
									{
										$this->data['ClinicTime']['time_slot'] = '03:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 122)
									{
										$this->data['ClinicTime']['time_slot'] = '03:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 123)
									{
										$this->data['ClinicTime']['time_slot'] = '04:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 124)
									{
										$this->data['ClinicTime']['time_slot'] = '04:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 125)
									{
										$this->data['ClinicTime']['time_slot'] = '05:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 126)
									{
										$this->data['ClinicTime']['time_slot'] = '05:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 127)
									{
										$this->data['ClinicTime']['time_slot'] = '06:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 128)
									{
										$this->data['ClinicTime']['time_slot'] = '06:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 129)
									{
										$this->data['ClinicTime']['time_slot'] = '07:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 130)
									{
										$this->data['ClinicTime']['time_slot'] = '07:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 131)
									{
										$this->data['ClinicTime']['time_slot'] = '08:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 132)
									{
										$this->data['ClinicTime']['time_slot'] = '08:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 133)
									{
										$this->data['ClinicTime']['time_slot'] = '09:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 134)
									{
										$this->data['ClinicTime']['time_slot'] = '09:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 135)
									{
										$this->data['ClinicTime']['time_slot'] = '10:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
								}
								if($this->ClinicTime->create($this->data))
								{
									$this->ClinicTime->save($this->data);
								}
							}
							if(($i > 135) && ($i <= 162))
							{
								$this->data['ClinicTime']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
								$this->data['ClinicTime']['clinic_id'] = $last_insert_id;
								$this->data['ClinicTime']['day'] = 6;
								if(($i > 135) && ($i <= 141))
								{
									$this->data['ClinicTime']['day_slot'] = 1;
								}
								if(($i > 141) && ($i <= 150))
								{
									$this->data['ClinicTime']['day_slot'] = 2;
								}
								if(($i > 150) && ($i <= 157))
								{
									$this->data['ClinicTime']['day_slot'] = 3;
								}
								if(($i > 157) && ($i <= 162))
								{
									$this->data['ClinicTime']['day_slot'] = 4;
								}
								
								if($this->data['DoctorClinic']['val_'.$i] != '')
								{
									$this->data['ClinicTime']['time_slot'] = $this->data['DoctorClinic']['val_'.$i];
									$this->data['ClinicTime']['doctor_choose'] = 1;
									$this->data['ClinicTime']['availability'] = 1;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								else
								{
									if($i == 136)
									{
										$this->data['ClinicTime']['time_slot'] = '09:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;	
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 137)
									{
										$this->data['ClinicTime']['time_slot'] = '09:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 138)
									{
										$this->data['ClinicTime']['time_slot'] = '10:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 139)
									{
										$this->data['ClinicTime']['time_slot'] = '10:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 140)
									{
										$this->data['ClinicTime']['time_slot'] = '11:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 141)
									{
										$this->data['ClinicTime']['time_slot'] = '11:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 142)
									{
										$this->data['ClinicTime']['time_slot'] = '12:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 143)
									{
										$this->data['ClinicTime']['time_slot'] = '12:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 144)
									{
										$this->data['ClinicTime']['time_slot'] = '01:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 145)
									{
										$this->data['ClinicTime']['time_slot'] = '01:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 146)
									{
										$this->data['ClinicTime']['time_slot'] = '02:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 147)
									{
										$this->data['ClinicTime']['time_slot'] = '02:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 148)
									{
										$this->data['ClinicTime']['time_slot'] = '03:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 149)
									{
										$this->data['ClinicTime']['time_slot'] = '03:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 150)
									{
										$this->data['ClinicTime']['time_slot'] = '04:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 151)
									{
										$this->data['ClinicTime']['time_slot'] = '04:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 152)
									{
										$this->data['ClinicTime']['time_slot'] = '05:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 153)
									{
										$this->data['ClinicTime']['time_slot'] = '05:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 154)
									{
										$this->data['ClinicTime']['time_slot'] = '06:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 155)
	
									{
										$this->data['ClinicTime']['time_slot'] = '06:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 156)
									{
										$this->data['ClinicTime']['time_slot'] = '07:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 157)
									{
										$this->data['ClinicTime']['time_slot'] = '07:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 158)
									{
										$this->data['ClinicTime']['time_slot'] = '08:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 159)
									{
										$this->data['ClinicTime']['time_slot'] = '08:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 160)
									{
										$this->data['ClinicTime']['time_slot'] = '09:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 161)
									{
										$this->data['ClinicTime']['time_slot'] = '09:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 162)
									{
										$this->data['ClinicTime']['time_slot'] = '10:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
								}
								if($this->ClinicTime->create($this->data))
								{
									$this->ClinicTime->save($this->data);
								}
							}
							if(($i > 162) && ($i <= 189))
							{
								$this->data['ClinicTime']['doctor_id'] = $this->data['DoctorClinic']['doctor_id'];
								$this->data['ClinicTime']['clinic_id'] = $last_insert_id;
								$this->data['ClinicTime']['day'] = 7;
								if(($i > 162) && ($i <= 168))
								{
									$this->data['ClinicTime']['day_slot'] = 1;
								}
								if(($i > 168) && ($i <= 177))
								{
									$this->data['ClinicTime']['day_slot'] = 2;
								}
								if(($i > 177) && ($i <= 184))
								{
									$this->data['ClinicTime']['day_slot'] = 3;
								}
								if(($i > 184) && ($i <= 189))
								{
									$this->data['ClinicTime']['day_slot'] = 4;
								}
								
								if($this->data['DoctorClinic']['val_'.$i] != '')
								{
									$this->data['ClinicTime']['time_slot'] = $this->data['DoctorClinic']['val_'.$i];
									$this->data['ClinicTime']['doctor_choose'] = 1;
									$this->data['ClinicTime']['availability'] = 1;
									$this->data['ClinicTime']['user_book'] = 0;
									$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
									$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
								}
								else
								{
									if($i == 163)
									{
										$this->data['ClinicTime']['time_slot'] = '09:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;	
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 164)
									{
										$this->data['ClinicTime']['time_slot'] = '09:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 165)
									{
										$this->data['ClinicTime']['time_slot'] = '10:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 166)
									{
										$this->data['ClinicTime']['time_slot'] = '10:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 167)
									{
										$this->data['ClinicTime']['time_slot'] = '11:00 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 168)
									{
										$this->data['ClinicTime']['time_slot'] = '11:30 AM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 169)
									{
										$this->data['ClinicTime']['time_slot'] = '12:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 170)
									{
										$this->data['ClinicTime']['time_slot'] = '12:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 171)
									{
										$this->data['ClinicTime']['time_slot'] = '01:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 172)
									{
										$this->data['ClinicTime']['time_slot'] = '01:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 173)
									{
										$this->data['ClinicTime']['time_slot'] = '02:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 174)
									{
										$this->data['ClinicTime']['time_slot'] = '02:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 175)
									{
										$this->data['ClinicTime']['time_slot'] = '03:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 176)
									{
										$this->data['ClinicTime']['time_slot'] = '03:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 177)
									{
										$this->data['ClinicTime']['time_slot'] = '04:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 178)
									{
										$this->data['ClinicTime']['time_slot'] = '04:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 179)
									{
										$this->data['ClinicTime']['time_slot'] = '05:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 180)
									{
										$this->data['ClinicTime']['time_slot'] = '05:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 181)
									{
										$this->data['ClinicTime']['time_slot'] = '06:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 182)
									{
										$this->data['ClinicTime']['time_slot'] = '06:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 183)
									{
										$this->data['ClinicTime']['time_slot'] = '07:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 184)
									{
										$this->data['ClinicTime']['time_slot'] = '07:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 185)
									{
										$this->data['ClinicTime']['time_slot'] = '08:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 186)
									{
										$this->data['ClinicTime']['time_slot'] = '08:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 187)
									{
										$this->data['ClinicTime']['time_slot'] = '09:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 188)
									{
										$this->data['ClinicTime']['time_slot'] = '09:30 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
									if($i == 189)
									{
										$this->data['ClinicTime']['time_slot'] = '10:00 PM';
										$this->data['ClinicTime']['doctor_choose'] = 0;
										$this->data['ClinicTime']['availability'] = 0;
										$this->data['ClinicTime']['user_book'] = 0;
										$this->data['ClinicTime']['user_book_date'] = '0000-00-00';
										$this->data['ClinicTime']['blackout_date'] = '0000-00-00';
									}
								}
								if($this->ClinicTime->create($this->data))
								{
									$this->ClinicTime->save($this->data);
								}
							}
						}
						//Availability Period Starts
						$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$last_insert_id,'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
						$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$last_insert_id,'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
						$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$last_insert_id,'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
						$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$last_insert_id,'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
						$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$last_insert_id,'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
						$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$last_insert_id,'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
						$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$doc_detail['Doctor']['id'],'ClinicTime.clinic_id'=>$last_insert_id,'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
						
						$avail_day_arr = array();
						if(!empty($get_mon_avail)){$avail_day_arr[] = 1;}
						if(!empty($get_tue_avail)){$avail_day_arr[] = 2;}
						if(!empty($get_wed_avail)){$avail_day_arr[] = 3;}
						if(!empty($get_thu_avail)){$avail_day_arr[] = 4;}
						if(!empty($get_fri_avail)){$avail_day_arr[] = 5;}
						if(!empty($get_sat_avail)){$avail_day_arr[] = 6;}
						if(!empty($get_sun_avail)){$avail_day_arr[] = 7;}
						
						$implode_day_avail = implode(',',$avail_day_arr);
						
						$update_clinic = $this->DoctorClinic->query("UPDATE doctor_clinic SET avail_day='$implode_day_avail' WHERE id='".$last_insert_id."'");
						//Avaliability Period Ends	
						$this->redirect('/pages/clinic');
					}
				}
			}
			$state = $this->State->find('all',array('conditions'=>array('State.status'=>1)));
			$this->set('state',$state);
			$this->set('doctor_id',$doc_detail['Doctor']['id']);
		}
		else
		{
			$this->redirect('/pages/login_doctor');
		}
	}
	
	function admin_view_doctor_appoint_clinic()
	{
		$this->set('title_for_layout','Clinic Appointments');
		if(isset($this->params['named']['appoint_id']) && $this->params['named']['appoint_id']!='')
		{
			$this->data['FilterAppoint']['appointment_id'] = $this->params['named']['appoint_id'];
			$options['appoint_id'] = $this->params['named']['appoint_id'];
		}
		if(isset($this->params['named']['doctor_name']) && $this->params['named']['doctor_name']!='')
		{
			$this->data['FilterAppoint']['doctor_name'] = $this->params['named']['doctor_name'];
			$options['doctor_name'] = $this->params['named']['doctor_name'];
		}
		if(isset($this->params['named']['username']) && $this->params['named']['username']!='')
		{
			$this->data['FilterAppoint']['user_name'] = $this->params['named']['username'];
			$options['username'] = $this->params['named']['username'];
		}
		if(isset($this->params['named']['contact']) && $this->params['named']['contact']!='')
		{
			$this->data['FilterAppoint']['contact'] = $this->params['named']['contact'];
			$options['contact'] = $this->params['named']['contact'];
		}
		/*if(isset($this->params['named']['day']) && $this->params['named']['day']!='')
		{
			$this->data['FilterAppoint']['appoint_day'] = $this->params['named']['day'];
			$options['day'] = $this->params['named']['day'];
		}*/
		if(isset($this->params['named']['from_date']) && $this->params['named']['from_date']!='')
		{
			$this->data['FilterAppoint']['appoint_date_from'] = $this->params['named']['from_date'];
			$options['from_date'] = $this->params['named']['from_date'];
		}
		if(isset($this->params['named']['date']) && $this->params['named']['date']!='')
		{
			$this->data['FilterAppoint']['appoint_date_to'] = $this->params['named']['date'];
			$options['date'] = $this->params['named']['date'];
		}
		if(isset($this->params['named']['status']) && $this->params['named']['status']!='')
		{
			$this->data['FilterAppoint']['status'] = $this->params['named']['status'];
			$options['status'] = $this->params['named']['status'];
		}
		if(isset($this->params['named']['appoint']) && $this->params['named']['appoint']!='')
		{
			$this->data['FilterAppoint']['appointment_for'] = $this->params['named']['appoint'];
			$options['appoint'] = $this->params['named']['appoint'];
		}
		if(!empty($this->data))
		{
			$appoint_id = $this->data['FilterAppoint']['appointment_id'];
			$doc_name = $this->data['FilterAppoint']['doctor_name'];
			$user_name = $this->data['FilterAppoint']['user_name'];
			$contact = $this->data['FilterAppoint']['contact'];
			/*$day = $this->data['FilterAppoint']['appoint_day'];*/
			$date_from = $this->data['FilterAppoint']['appoint_date_from'];
			$date = $this->data['FilterAppoint']['appoint_date_to'];
			$status = $this->data['FilterAppoint']['status'];
			$appoint_for = $this->data['FilterAppoint']['appointment_for'];
			
			if(!empty($appoint_id) && $appoint_id != '')
			{
				$conditions['BookAppointment.appointment_id'] = $appoint_id;
				$options['appoint_id'] = $appoint_id;
			}
			if(!empty($doc_name) && $doc_name != '')
			{
				$conditions['BookAppointment.doctor_name LIKE'] = '%'.$doc_name.'%';
				$options['doctor_name'] = $doc_name;
			}
			if(!empty($user_name) && $user_name != '')
			{
				$conditions['BookAppointment.user_name LIKE'] = '%'.$user_name.'%';
				$options['username'] = $user_name;
			}
			if(!empty($contact) && $contact != '')
			{
				$conditions['BookAppointment.user_contact'] = $contact;
				$options['contact'] = $contact;
			}
			/*if(!empty($day) && $day != '')
			{
				$conditions['BookAppointment.appoint_day'] = $day;
				$options['day'] = $day;
			}*/
			if(!empty($date_from) && $date_from != '')
			{
				$conditions['BookAppointment.appoint_date >='] = date('Y-m-d',strtotime($date));
				$options['from_date'] = $date;
			}
			if(!empty($date) && $date != '')
			{
				$conditions['BookAppointment.appoint_date <='] = date('Y-m-d',strtotime($date));
				$options['date'] = $date;
			}
			if(!empty($status) && $status != '')
			{
				$conditions['BookAppointment.status'] = $status;
				$options['status'] = $status;
			}
			if(!empty($appoint_for) && $appoint_for != '')
			{
				$conditions['BookAppointment.appointment_for'] = $appoint_for;
				$options['appoint'] = $appoint_for;
			}
			$conditions['BookAppointment.status <>'] = 4;
			$this->paginate = array('BookAppointment' => array('limit' =>'20','order'=>array('BookAppointment.id'=>'DESC'),'conditions'=>$conditions));
			$appointlist=$this->paginate('BookAppointment');
		}
		else
		{
			$this->paginate = array('BookAppointment' => array('limit' =>'20','order'=>array('BookAppointment.id'=>'DESC'),'conditions'=>array('BookAppointment.status <>'=>4)));
			$appointlist=$this->paginate('BookAppointment');
		}
		
		$f = 0;
		foreach($appointlist as $key => $val)
		{
			$user_name = $this->User->find('first',array('conditions'=>array('User.id'=>$val['BookAppointment']['user_id'])));
			
			$clinic_info = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.id'=>$val['BookAppointment']['clinic_id'])));
			
			$doctor = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$val['BookAppointment']['doctor_id'])));
			
			if($val['BookAppointment']['appoint_day'] == 'Mon'){$appointlist[$f]['BookAppointment']['day'] = 'Monday';}
			if($val['BookAppointment']['appoint_day'] == 'Tue'){$appointlist[$f]['BookAppointment']['day'] = 'Tuesday';}
			if($val['BookAppointment']['appoint_day'] == 'Wed'){$appointlist[$f]['BookAppointment']['day'] = 'Wednesday';}
			if($val['BookAppointment']['appoint_day'] == 'Thu'){$appointlist[$f]['BookAppointment']['day'] = 'Thursday';}
			if($val['BookAppointment']['appoint_day'] == 'Fri'){$appointlist[$f]['BookAppointment']['day'] = 'Friday';}
			if($val['BookAppointment']['appoint_day'] == 'Sat'){$appointlist[$f]['BookAppointment']['day'] = 'Saturday';}
			if($val['BookAppointment']['appoint_day'] == 'Sun'){$appointlist[$f]['BookAppointment']['day'] = 'Sunday';}
			
			if($val['BookAppointment']['status'] == 1){$appointlist[$f]['BookAppointment']['curr_status'] = 'Pending';}
			if($val['BookAppointment']['status'] == 2){$appointlist[$f]['BookAppointment']['curr_status'] = 'Done';}
			if($val['BookAppointment']['status'] == 3){$appointlist[$f]['BookAppointment']['curr_status'] = 'Cancelled';}
			
			if($val['BookAppointment']['appointment_for'] == 'CL'){$appointlist[$f]['BookAppointment']['type'] = 'Clinic';}
			if($val['BookAppointment']['appointment_for'] == 'HV'){$appointlist[$f]['BookAppointment']['type'] = 'Home Visit';}
			
			$appointlist[$f]['BookAppointment']['clinic_name'] = $clinic_info['DoctorClinic']['clinic_name'];
			
			$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$mor1 = 0;
			foreach($clinic_timing_mor1 as $cltm1_key => $cltm1_val)
			{
				if(!empty($cltm1_val['BookAppointment']))
				{
					$mor11 = 1;
					foreach($cltm1_val['BookAppointment'] as $app_cltm1_key => $app_cltm1_val)
					{
						if($app_cltm1_val['status'] == 1)
						{
							$clinic_timing_mor1[$mor1]['ClinicTime']['booked_date'][$mor11] = $app_cltm1_val['appoint_date'];
							$mor11++;
						}
					}
				}
				$mor1++;
			}
			$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
			$mor2 = 0;
			foreach($clinic_timing_mor2 as $cltm2_key => $cltm2_val)
			{
				if(!empty($cltm2_val['BookAppointment']))
				{
					$mor22 = 1;
					foreach($cltm2_val['BookAppointment'] as $app_cltm2_key => $app_cltm2_val)
					{
						if($app_cltm2_val['status'] == 1)
						{
							$clinic_timing_mor2[$mor2]['ClinicTime']['booked_date'][$mor22] = $app_cltm2_val['appoint_date'];
							$mor22++;
						}
					}
				}
				$mor2++;
			}
			$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
			$mor3 = 0;
			foreach($clinic_timing_mor3 as $cltm3_key => $cltm3_val)
			{
				if(!empty($cltm3_val['BookAppointment']))
				{
					$mor33 = 1;
					foreach($cltm3_val['BookAppointment'] as $app_cltm3_key => $app_cltm3_val)
					{
						if($app_cltm3_val['status'] == 1)
						{
							$clinic_timing_mor3[$mor3]['ClinicTime']['booked_date'][$mor33] = $app_cltm3_val['appoint_date'];
							$mor33++;
						}
					}
				}
				$mor3++;
			}
			$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
			$mor4 = 0;
			foreach($clinic_timing_mor4 as $cltm4_key => $cltm4_val)
			{
				if(!empty($cltm4_val['BookAppointment']))
				{
					$mor44 = 1;
					foreach($cltm4_val['BookAppointment'] as $app_cltm4_key => $app_cltm4_val)
					{
						if($app_cltm4_val['status'] == 1)
						{
							$clinic_timing_mor4[$mor4]['ClinicTime']['booked_date'][$mor44] = $app_cltm4_val['appoint_date'];
							$mor44++;
						}
					}
				}
				$mor4++;
			}
			$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
			$mor5 = 0;
			foreach($clinic_timing_mor5 as $cltm5_key => $cltm5_val)
			{
				if(!empty($cltm5_val['BookAppointment']))
				{
					$mor55 = 1;
					foreach($cltm5_val['BookAppointment'] as $app_cltm5_key => $app_cltm5_val)
					{
						if($app_cltm5_val['status'] == 1)
						{
							$clinic_timing_mor5[$mor5]['ClinicTime']['booked_date'][$mor55] = $app_cltm5_val['appoint_date'];
							$mor55++;
						}
					}
				}
				$mor5++;
			}
			$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
			$mor6 = 0;
			foreach($clinic_timing_mor6 as $cltm6_key => $cltm6_val)
			{
				if(!empty($cltm6_val['BookAppointment']))
				{
					$mor66 = 1;
					foreach($cltm6_val['BookAppointment'] as $app_cltm6_key => $app_cltm6_val)
					{
						if($app_cltm6_val['status'] == 1)
						{
							$clinic_timing_mor6[$mor6]['ClinicTime']['booked_date'][$mor66] = $app_cltm6_val['appoint_date'];
							$mor66++;
						}
					}
				}
				$mor6++;
			}
			$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
			$mor7 = 0;
			foreach($clinic_timing_mor7 as $cltm7_key => $cltm7_val)
			{
				if(!empty($cltm7_val['BookAppointment']))
				{
					$mor77 = 1;
					foreach($cltm7_val['BookAppointment'] as $app_cltm7_key => $app_cltm7_val)
					{
						if($app_cltm7_val['status'] == 1)
						{
							$clinic_timing_mor7[$mor7]['ClinicTime']['booked_date'][$mor77] = $app_cltm7_val['appoint_date'];
							$mor77++;
						}
					}
				}
				$mor7++;
			}
			
			$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$aft1 = 0;
			foreach($clinic_timing_aft1 as $clta1_key => $clta1_val)
			{
				if(!empty($clta1_val['BookAppointment']))
				{
					$aft11 = 1;
					foreach($clta1_val['BookAppointment'] as $app_clta1_key => $app_clta1_val)
					{
						if($app_clta1_val['status'] == 1)
						{
							$clinic_timing_aft1[$aft1]['ClinicTime']['booked_date'][$aft11] = $app_clta1_val['appoint_date'];
							$aft11++;
						}
					}
				}
				$aft1++;
			}
			$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
			$aft2 = 0;
			foreach($clinic_timing_aft2 as $clta2_key => $clta2_val)
			{
				if(!empty($clta2_val['BookAppointment']))
				{
					$aft22 = 1;
					foreach($clta2_val['BookAppointment'] as $app_clta2_key => $app_clta2_val)
					{
						if($app_clta2_val['status'] == 1)
						{
							$clinic_timing_aft2[$aft2]['ClinicTime']['booked_date'][$aft22] = $app_clta2_val['appoint_date'];
							$aft22++;
						}
					}
				}
				$aft2++;
			}
			$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
			$aft3 = 0;
			foreach($clinic_timing_aft3 as $clta3_key => $clta3_val)
			{
				if(!empty($clta3_val['BookAppointment']))
				{
					$aft33 = 1;
					foreach($clta3_val['BookAppointment'] as $app_clta3_key => $app_clta3_val)
					{
						if($app_clta3_val['status'] == 1)
						{
							$clinic_timing_aft3[$aft3]['ClinicTime']['booked_date'][$aft33] = $app_clta3_val['appoint_date'];
							$aft33++;
						}
					}
				}
				$aft3++;
			}
			$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
			$aft4 = 0;
			foreach($clinic_timing_aft4 as $clta4_key => $clta4_val)
			{
				if(!empty($clta4_val['BookAppointment']))
				{
					$aft44 = 1;
					foreach($clta4_val['BookAppointment'] as $app_clta4_key => $app_clta4_val)
					{
						if($app_clta4_val['status'] == 1)
						{
							$clinic_timing_aft4[$aft4]['ClinicTime']['booked_date'][$aft44] = $app_clta4_val['appoint_date'];
							$aft44++;
						}
					}
				}
				$aft4++;
			}
			$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
			$aft5 = 0;
			foreach($clinic_timing_aft5 as $clta5_key => $clta5_val)
			{
				if(!empty($clta5_val['BookAppointment']))
				{
					$aft55 = 1;
					foreach($clta5_val['BookAppointment'] as $app_clta5_key => $app_clta5_val)
					{
						if($app_clta5_val['status'] == 1)
						{
							$clinic_timing_aft5[$aft5]['ClinicTime']['booked_date'][$aft55] = $app_clta5_val['appoint_date'];
							$aft55++;
						}
					}
				}
				$aft5++;
			}
			$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
			$aft6 = 0;
			foreach($clinic_timing_aft6 as $clta6_key => $clta6_val)
			{
				if(!empty($clta6_val['BookAppointment']))
				{
					$aft66 = 1;
					foreach($clta6_val['BookAppointment'] as $app_clta6_key => $app_clta6_val)
					{
						if($app_clta6_val['status'] == 1)
						{
							$clinic_timing_aft6[$aft6]['ClinicTime']['booked_date'][$aft66] = $app_clta6_val['appoint_date'];
							$aft66++;
						}
					}
				}
				$aft6++;
			}
			$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
			$aft7 = 0;
			foreach($clinic_timing_aft7 as $clta7_key => $clta7_val)
			{
				if(!empty($clta7_val['BookAppointment']))
				{
					$aft77 = 1;
					foreach($clta7_val['BookAppointment'] as $app_clta7_key => $app_clta7_val)
					{
						if($app_clta7_val['status'] == 1)
						{
							$clinic_timing_aft7[$aft7]['ClinicTime']['booked_date'][$aft77] = $app_clta7_val['appoint_date'];
							$aft77++;
						}
					}
				}
				$aft7++;
			}
			
			$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$evn1 = 0;
			foreach($clinic_timing_evn1 as $clte1_key => $clte1_val)
			{
				if(!empty($clte1_val['BookAppointment']))
				{
					$evn11 = 1;
					foreach($clte1_val['BookAppointment'] as $app_clte1_key => $app_clte1_val)
					{
						if($app_clte1_val['status'] == 1)
						{
							$clinic_timing_evn1[$evn1]['ClinicTime']['booked_date'][$evn11] = $app_clte1_val['appoint_date'];
							$evn11++;
						}
					}
				}
				$evn1++;
			}
			$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
			$evn2 = 0;
			foreach($clinic_timing_evn2 as $clte2_key => $clte2_val)
			{
				if(!empty($clte2_val['BookAppointment']))
				{
					$evn22 = 1;
					foreach($clte2_val['BookAppointment'] as $app_clte2_key => $app_clte2_val)
					{
						if($app_clte2_val['status'] == 1)
						{
							$clinic_timing_evn2[$evn2]['ClinicTime']['booked_date'][$evn22] = $app_clte2_val['appoint_date'];
							$evn22++;
						}
					}
				}
				$evn2++;
			}
			$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
			$evn3 = 0;
			foreach($clinic_timing_evn3 as $clte3_key => $clte3_val)
			{
				if(!empty($clte3_val['BookAppointment']))
				{
					$evn33 = 1;
					foreach($clte3_val['BookAppointment'] as $app_clte3_key => $app_clte3_val)
					{
						if($app_clte3_val['status'] == 1)
						{
							$clinic_timing_evn3[$evn3]['ClinicTime']['booked_date'][$evn33] = $app_clte3_val['appoint_date'];
							$evn33++;
						}
					}
				}
				$evn3++;
			}
			$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
			$evn4 = 0;
			foreach($clinic_timing_evn4 as $clte4_key => $clte4_val)
			{
				if(!empty($clte4_val['BookAppointment']))
				{
					$evn44 = 1;
					foreach($clte4_val['BookAppointment'] as $app_clte4_key => $app_clte4_val)
					{
						if($app_clte4_val['status'] == 1)
						{
							$clinic_timing_evn4[$evn4]['ClinicTime']['booked_date'][$evn44] = $app_clte4_val['appoint_date'];
							$evn44++;
						}
					}
				}
				$evn4++;
			}
			$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
			$evn5 = 0;
			foreach($clinic_timing_evn5 as $clte5_key => $clte5_val)
			{
				if(!empty($clte5_val['BookAppointment']))
				{
					$evn55 = 1;
					foreach($clte5_val['BookAppointment'] as $app_clte5_key => $app_clte5_val)
					{
						if($app_clte5_val['status'] == 1)
						{
							$clinic_timing_evn5[$evn5]['ClinicTime']['booked_date'][$evn55] = $app_clte5_val['appoint_date'];
							$evn55++;
						}
					}
				}
				$evn5++;
			}
			$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
			$evn6 = 0;
			foreach($clinic_timing_evn6 as $clte6_key => $clte6_val)
			{
				if(!empty($clte6_val['BookAppointment']))
				{
					$evn66 = 1;
					foreach($clte6_val['BookAppointment'] as $app_clte6_key => $app_clte6_val)
					{
						if($app_clte6_val['status'] == 1)
						{
							$clinic_timing_evn6[$evn6]['ClinicTime']['booked_date'][$evn66] = $app_clte6_val['appoint_date'];
							$evn66++;
						}
					}
				}
				$evn6++;
			}
			$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
			$evn7 = 0;
			foreach($clinic_timing_evn7 as $clte7_key => $clte7_val)
			{
				if(!empty($clte7_val['BookAppointment']))
				{
					$evn77 = 1;
					foreach($clte7_val['BookAppointment'] as $app_clte7_key => $app_clte7_val)
					{
						if($app_clte7_val['status'] == 1)
						{
							$clinic_timing_evn7[$evn7]['ClinicTime']['booked_date'][$evn77] = $app_clte7_val['appoint_date'];
							$evn77++;
						}
					}
				}
				$evn7++;
			}
			
			$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$ngt1 = 0;
			foreach($clinic_timing_ngt1 as $cltn1_key => $cltn1_val)
			{
				if(!empty($cltn1_val['BookAppointment']))
				{
					$ngt11 = 1;
					foreach($cltn1_val['BookAppointment'] as $app_cltn1_key => $app_cltn1_val)
					{
						if($app_cltn1_val['status'] == 1)
						{
							$clinic_timing_ngt1[$ngt1]['ClinicTime']['booked_date'][$ngt11] = $app_cltn1_val['appoint_date'];
							$ngt11++;
						}
					}
				}
				$ngt1++;
			}
			$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
			$ngt2 = 0;
			foreach($clinic_timing_ngt2 as $cltn2_key => $cltn2_val)
			{
				if(!empty($cltn2_val['BookAppointment']))
				{
					$ngt22 = 1;
					foreach($cltn2_val['BookAppointment'] as $app_cltn2_key => $app_cltn2_val)
					{
						if($app_cltn2_val['status'] == 1)
						{
							$clinic_timing_ngt2[$ngt1]['ClinicTime']['booked_date'][$ngt22] = $app_cltn2_val['appoint_date'];
							$ngt22++;
						}
					}
				}
				$ngt2++;
			}
			$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
			$ngt3 = 0;
			foreach($clinic_timing_ngt3 as $cltn3_key => $cltn3_val)
			{
				if(!empty($cltn3_val['BookAppointment']))
				{
					$ngt33 = 1;
					foreach($cltn3_val['BookAppointment'] as $app_cltn3_key => $app_cltn3_val)
					{
						if($app_cltn3_val['status'] == 1)
						{
							$clinic_timing_ngt3[$ngt3]['ClinicTime']['booked_date'][$ngt33] = $app_cltn3_val['appoint_date'];
							$ngt33++;
						}
					}
				}
				$ngt3++;
			}
			$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
			$ngt4 = 0;
			foreach($clinic_timing_ngt4 as $cltn4_key => $cltn4_val)
			{
				if(!empty($cltn4_val['BookAppointment']))
				{
					$ngt44 = 1;
					foreach($cltn4_val['BookAppointment'] as $app_cltn4_key => $app_cltn4_val)
					{
						if($app_cltn4_val['status'] == 1)
						{
							$clinic_timing_ngt4[$ngt4]['ClinicTime']['booked_date'][$ngt44] = $app_cltn4_val['appoint_date'];
							$ngt44++;
						}
					}
				}
				$ngt4++;
			}
			$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
			$ngt5 = 0;
			foreach($clinic_timing_ngt5 as $cltn5_key => $cltn5_val)
			{
				if(!empty($cltn5_val['BookAppointment']))
				{
					$ngt55 = 1;
					foreach($cltn5_val['BookAppointment'] as $app_cltn5_key => $app_cltn5_val)
					{
						if($app_cltn5_val['status'] == 1)
						{
							$clinic_timing_ngt5[$ngt5]['ClinicTime']['booked_date'][$ngt55] = $app_cltn5_val['appoint_date'];
							$ngt55++;
						}
					}
				}
				$ngt5++;
			}
			$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
			$ngt6 = 0;
			foreach($clinic_timing_ngt6 as $cltn6_key => $cltn6_val)
			{
				if(!empty($cltn6_val['BookAppointment']))
				{
					$ngt66 = 1;
					foreach($cltn6_val['BookAppointment'] as $app_cltn6_key => $app_cltn6_val)
					{
						if($app_cltn6_val['status'] == 1)
						{
							$clinic_timing_ngt6[$ngt6]['ClinicTime']['booked_date'][$ngt66] = $app_cltn6_val['appoint_date'];
							$ngt66++;
						}
					}
				}
				$ngt6++;
			}
			$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$val['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
			$ngt7 = 0;
			foreach($clinic_timing_ngt7 as $cltn6_key => $cltn7_val)
			{
				if(!empty($cltn7_val['BookAppointment']))
				{
					$ngt77 = 1;
					foreach($cltn7_val['BookAppointment'] as $app_cltn7_key => $app_cltn7_val)
					{
						if($app_cltn7_val['status'] == 1)
						{
							$clinic_timing_ngt7[$ngt7]['ClinicTime']['booked_date'][$ngt77] = $app_cltn7_val['appoint_date'];
							$ngt77++;
						}
					}
				}
				$ngt7++;
			}
			
			$appointlist[$f]['BookAppointment']['clinic_timing_mor1'] = $clinic_timing_mor1;
			$appointlist[$f]['BookAppointment']['clinic_timing_mor2'] = $clinic_timing_mor2;
			$appointlist[$f]['BookAppointment']['clinic_timing_mor3'] = $clinic_timing_mor3;
			$appointlist[$f]['BookAppointment']['clinic_timing_mor4'] = $clinic_timing_mor4;
			$appointlist[$f]['BookAppointment']['clinic_timing_mor5'] = $clinic_timing_mor5;
			$appointlist[$f]['BookAppointment']['clinic_timing_mor6'] = $clinic_timing_mor6;
			$appointlist[$f]['BookAppointment']['clinic_timing_mor7'] = $clinic_timing_mor7;
			
			$appointlist[$f]['BookAppointment']['clinic_timing_aft1'] = $clinic_timing_aft1;
			$appointlist[$f]['BookAppointment']['clinic_timing_aft2'] = $clinic_timing_aft2;
			$appointlist[$f]['BookAppointment']['clinic_timing_aft3'] = $clinic_timing_aft3;
			$appointlist[$f]['BookAppointment']['clinic_timing_aft4'] = $clinic_timing_aft4;
			$appointlist[$f]['BookAppointment']['clinic_timing_aft5'] = $clinic_timing_aft5;
			$appointlist[$f]['BookAppointment']['clinic_timing_aft6'] = $clinic_timing_aft6;
			$appointlist[$f]['BookAppointment']['clinic_timing_aft7'] = $clinic_timing_aft7;
			
			$appointlist[$f]['BookAppointment']['clinic_timing_evn1'] = $clinic_timing_evn1;
			$appointlist[$f]['BookAppointment']['clinic_timing_evn2'] = $clinic_timing_evn2;
			$appointlist[$f]['BookAppointment']['clinic_timing_evn3'] = $clinic_timing_evn3;
			$appointlist[$f]['BookAppointment']['clinic_timing_evn4'] = $clinic_timing_evn4;
			$appointlist[$f]['BookAppointment']['clinic_timing_evn5'] = $clinic_timing_evn5;
			$appointlist[$f]['BookAppointment']['clinic_timing_evn6'] = $clinic_timing_evn6;
			$appointlist[$f]['BookAppointment']['clinic_timing_evn7'] = $clinic_timing_evn7;
			
			$appointlist[$f]['BookAppointment']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
			$appointlist[$f]['BookAppointment']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
			$appointlist[$f]['BookAppointment']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
			$appointlist[$f]['BookAppointment']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
			$appointlist[$f]['BookAppointment']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
			$appointlist[$f]['BookAppointment']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
			$appointlist[$f]['BookAppointment']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
			
			$f++;
		}
		$this->set('options',$options);
		$this->set('appointlist',$appointlist);
	}
	
	function cancel_appoint()
	{
		$id = $_REQUEST['id'];
		$ty = $_REQUEST['ty'];
		$appoint_detail = $this->BookAppointment->find('first',array('conditions'=>array('BookAppointment.id'=>$id)));
		if($appoint_detail['BookAppointment']['appointment_for'] == 'CL')
		{
			if($appoint_detail['BookAppointment']['appoint_day'] == 'Mon'){$day = 1;}
			if($appoint_detail['BookAppointment']['appoint_day'] == 'Tue'){$day = 2;}
			if($appoint_detail['BookAppointment']['appoint_day'] == 'Wed'){$day = 3;}
			if($appoint_detail['BookAppointment']['appoint_day'] == 'Thu'){$day = 4;}
			if($appoint_detail['BookAppointment']['appoint_day'] == 'Fri'){$day = 5;}
			if($appoint_detail['BookAppointment']['appoint_day'] == 'Sat'){$day = 6;}
			if($appoint_detail['BookAppointment']['appoint_day'] == 'Sun'){$day = 7;}
			$update_clinic_slot = $this->ClinicTime->query("UPDATE  clinic_time SET user_book='0' WHERE doctor_id='".$appoint_detail['BookAppointment']['doctor_id']."' AND clinic_id='".$appoint_detail['BookAppointment']['clinic_id']."' AND day='".$day."' AND time_slot='".$appoint_detail['BookAppointment']['time_slot']."'");
			$update = $this->BookAppointment->query("UPDATE book_appointment SET status='3' WHERE id='".$id."'");
		}
		if($appoint_detail['BookAppointment']['appointment_for'] == 'HV')
		{
			$update = $this->BookAppointment->query("UPDATE book_appointment SET status='3' WHERE id='".$id."'");
		}
		echo $id.','.$ty; exit;
	}
	
	function done_appoint()
	{
		$id = $_REQUEST['id'];
		$ty = $_REQUEST['ty'];
		$appoint_detail = $this->BookAppointment->find('first',array('conditions'=>array('BookAppointment.id'=>$id)));
		if($appoint_detail['BookAppointment']['appointment_for'] == 'CL')
		{
			if($appoint_detail['BookAppointment']['appoint_day'] == 'Mon'){$day = 1;}
			if($appoint_detail['BookAppointment']['appoint_day'] == 'Tue'){$day = 2;}
			if($appoint_detail['BookAppointment']['appoint_day'] == 'Wed'){$day = 3;}
			if($appoint_detail['BookAppointment']['appoint_day'] == 'Thu'){$day = 4;}
			if($appoint_detail['BookAppointment']['appoint_day'] == 'Fri'){$day = 5;}
			if($appoint_detail['BookAppointment']['appoint_day'] == 'Sat'){$day = 6;}
			if($appoint_detail['BookAppointment']['appoint_day'] == 'Sun'){$day = 7;}
			$update_clinic_slot = $this->ClinicTime->query("UPDATE  clinic_time SET user_book='0' WHERE doctor_id='".$appoint_detail['BookAppointment']['doctor_id']."' AND clinic_id='".$appoint_detail['BookAppointment']['clinic_id']."' AND day='".$day."' AND time_slot='".$appoint_detail['BookAppointment']['time_slot']."'");
			$update = $this->BookAppointment->query("UPDATE book_appointment SET status='2' WHERE id='".$id."'");
		}
		if($appoint_detail['BookAppointment']['appointment_for'] == 'HV')
		{
			$update = $this->BookAppointment->query("UPDATE book_appointment SET status='2' WHERE id='".$id."'");
		}
		echo $id.','.$ty; exit;
	}
	
	function change_time($appoint_id=NULL,$stat=NULL)
	{
		$this->layout = false;
		$this->set('title_for_layout','Change Time Of Appointment');
		$dec_id = base64_decode($appoint_id);
		$get_detail = $this->BookAppointment->find('first',array('conditions'=>array('BookAppointment.id'=>$dec_id)));
		
		
		$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		
		$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		
		$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		
		$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$get_detail['BookAppointment']['doctor_id'],'ClinicTime.clinic_id'=>$get_detail['BookAppointment']['clinic_id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7,'ClinicTime.user_book'=>0),'order'=>array('ClinicTime.time_slot ASC')));
		
		$get_detail['BookAppointment']['clinic_timing_mor1'] = $clinic_timing_mor1;
		$get_detail['BookAppointment']['clinic_timing_mor2'] = $clinic_timing_mor2;
		$get_detail['BookAppointment']['clinic_timing_mor3'] = $clinic_timing_mor3;
		$get_detail['BookAppointment']['clinic_timing_mor4'] = $clinic_timing_mor4;
		$get_detail['BookAppointment']['clinic_timing_mor5'] = $clinic_timing_mor5;
		$get_detail['BookAppointment']['clinic_timing_mor6'] = $clinic_timing_mor6;
		$get_detail['BookAppointment']['clinic_timing_mor7'] = $clinic_timing_mor7;
		
		$get_detail['BookAppointment']['clinic_timing_aft1'] = $clinic_timing_aft1;
		$get_detail['BookAppointment']['clinic_timing_aft2'] = $clinic_timing_aft2;
		$get_detail['BookAppointment']['clinic_timing_aft3'] = $clinic_timing_aft3;
		$get_detail['BookAppointment']['clinic_timing_aft4'] = $clinic_timing_aft4;
		$get_detail['BookAppointment']['clinic_timing_aft5'] = $clinic_timing_aft5;
		$get_detail['BookAppointment']['clinic_timing_aft6'] = $clinic_timing_aft6;
		$get_detail['BookAppointment']['clinic_timing_aft7'] = $clinic_timing_aft7;
		
		$get_detail['BookAppointment']['clinic_timing_evn1'] = $clinic_timing_evn1;
		$get_detail['BookAppointment']['clinic_timing_evn2'] = $clinic_timing_evn2;
		$get_detail['BookAppointment']['clinic_timing_evn3'] = $clinic_timing_evn3;
		$get_detail['BookAppointment']['clinic_timing_evn4'] = $clinic_timing_evn4;
		$get_detail['BookAppointment']['clinic_timing_evn5'] = $clinic_timing_evn5;
		$get_detail['BookAppointment']['clinic_timing_evn6'] = $clinic_timing_evn6;
		$get_detail['BookAppointment']['clinic_timing_evn7'] = $clinic_timing_evn7;
		
		$get_detail['BookAppointment']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
		$get_detail['BookAppointment']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
		$get_detail['BookAppointment']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
		$get_detail['BookAppointment']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
		$get_detail['BookAppointment']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
		$get_detail['BookAppointment']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
		$get_detail['BookAppointment']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
		
		$this->set('get_detail',$get_detail);
		if(!empty($stat) && $stat == 'booked')
		{
			$this->set('alert_mess','Choosen time slot is booked');
		}
	}
	
	function admin_change_user_time($appoint_id=NULL,$time_slot=NULL,$day=NULL,$date=NULL,$clinic_time_id=NULL)
	{
		$dec_id = base64_decode($appoint_id);
		$dec_time = base64_decode($time_slot);
		$dec_day = base64_decode($day);
		$dec_date = base64_decode($date);
		$dec_clinic_time_id = base64_decode($clinic_time_id);
		$get_appointment = $this->BookAppointment->find('first',array('conditions'=>array('BookAppointment.id'=>$dec_id)));
		
		$check_time_slot = $this->BookAppointment->find('first',array('conditions'=>array('BookAppointment.doctor_id'=>$get_appointment['BookAppointment']['doctor_id'],'BookAppointment.clinic_id'=>$get_appointment['BookAppointment']['clinic_id'],'BookAppointment.time_slot'=>$dec_time,'BookAppointment.appoint_date'=>$dec_date)));
		if(empty($check_time_slot))
		{
			$book_date = date('Y-m-d',strtotime($dec_date));
			$update_book_appoint = $this->BookAppointment->query("UPDATE book_appointment SET clinic_time_id='".$dec_clinic_time_id."',time_slot='".$dec_time."',appoint_day='".$dec_day."',appoint_date='".$book_date."' WHERE id='".$dec_id."'");
			$this->Session->setFlash('Appointment time changed successfully','flash_success');
			$this->redirect('/admin/pages/view_doctor_appoint_clinic');
		}
		else
		{
			$this->Session->setFlash('Appointment time already booked','flash_success');
			$this->redirect('/admin/pages/view_doctor_appoint_clinic');
		}
	}
	
	function appointment()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Doctor Appointments');
		$doc_detail = $this->Session->read('DoctorDetail');
		if(!empty($doc_detail))
		{
			if(isset($this->params['named']['appoint_id']) && $this->params['named']['appoint_id']!='')
			{
				$this->data['FilterAppointment']['appointment_id'] = $this->params['named']['appoint_id'];
				$options['appoint_id'] = $this->params['named']['appoint_id'];
			}
			if(isset($this->params['named']['appoint_day']) && $this->params['named']['appoint_day']!='')
			{
				$this->data['FilterAppointment']['day'] = $this->params['named']['appoint_day'];
				$options['appoint_day'] = $this->params['named']['appoint_day'];
			}
			if(isset($this->params['named']['appoint_date_from']) && $this->params['named']['appoint_date_from']!='')
			{
				$this->data['FilterAppointment']['date_from'] = $this->params['named']['appoint_date_from'];
				$options['appoint_date_from'] = $this->params['named']['appoint_date_from'];
			}
			if(isset($this->params['named']['appoint_date_to']) && $this->params['named']['appoint_date_to']!='')
			{
				$this->data['FilterAppointment']['date_to'] = $this->params['named']['appoint_date_to'];
				$options['appoint_date_to'] = $this->params['named']['appoint_date_to'];
			}
			if(isset($this->params['named']['status']) && $this->params['named']['status']!='')
			{
				$this->data['FilterAppointment']['status'] = $this->params['named']['status'];
				$options['status'] = $this->params['named']['status'];
			}
			if(!empty($this->data))
			{
				$appoint_id = $this->data['FilterAppointment']['appointment_id'];
				$day = $this->data['FilterAppointment']['day'];
				$from_date = $this->data['FilterAppointment']['date_from'];
				$to_date = $this->data['FilterAppointment']['date_to'];
				$status = $this->data['FilterAppointment']['status'];
				
				if(!empty($appoint_id) && $appoint_id != '')
				{
					$conditions['BookAppointment.appointment_id'] = $appoint_id;
					$options['appoint_id'] = $appoint_id;
				}
				if(!empty($day) && $day != '')
				{
					$conditions['BookAppointment.appoint_day'] = $day;
					$options['appoint_day'] = $day;
				}
				if(!empty($from_date) && $from_date != '')
				{
					$conditions['BookAppointment.appoint_date >='] = date('Y-m-d',strtotime($from_date));
					$options['appoint_date_from'] = $from_date;
				}
				if(!empty($to_date) && $to_date != '')
				{
					$conditions['BookAppointment.appoint_date <='] = date('Y-m-d',strtotime($to_date));
					$options['appoint_date_to'] = $to_date;
				}
				if(!empty($status) && $status != '')
				{
					$conditions['BookAppointment.status'] = $status;
					$options['status'] = $status;
				}
				$conditions['BookAppointment.appointment_for'] = 'CL';
				$conditions['BookAppointment.status <>'] = 4;
				$this->paginate = array('BookAppointment' => array('limit' =>'10','order'=>array('BookAppointment.id'=>'DESC'),'conditions'=>$conditions));
				$appointments=$this->paginate('BookAppointment');
			}
			else
			{
				$this->paginate = array('BookAppointment' => array('limit' =>'10','order'=>array('BookAppointment.id'=>'DESC'),'conditions'=>array('BookAppointment.doctor_id'=>$doc_detail['Doctor']['id'],'BookAppointment.appointment_for'=>'CL','BookAppointment.status <>'=>4)));
				$appointments=$this->paginate('BookAppointment');
			}
			$k = 0;
			foreach($appointments as $key => $val)
			{
				$get_clinic_detail = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.id'=>$val['BookAppointment']['clinic_id'])));
				$appointments[$k]['BookAppointment']['clinic_name'] = $get_clinic_detail['DoctorClinic']['clinic_name'];
				$expl_address = explode('*',$get_clinic_detail['DoctorClinic']['clinic_address']);
				$appointments[$k]['BookAppointment']['clinic_add1'] = $expl_address[0];
				$appointments[$k]['BookAppointment']['clinic_add2'] = $expl_address[1];
				$k++;
			}
			$this->set('day',$day);
			$this->set('date_from',$from_date);
			$this->set('date_to',$to_date);
			$this->set('status',$status);
			$this->set('appoint_id',$appoint_id);
			
			$this->set('options',$options);
			$this->set('appointments',$appointments);
		}
		else
		{
			$this->redirect('/pages/login_doctor');
		}
	}
	
	function appoint_done()
	{
		$id = $_REQUEST['id'];
		$get_detail = $this->BookAppointment->find('first',array('conditions'=>array('BookAppointment.id'=>$id)));
		$update = $this->ClinicTime->query("UPDATE book_appointment SET status='2' WHERE id='".$id."'");
		echo $id; exit;
	}
	
	function appoint_cancel()
	{
		$id = $_REQUEST['id'];
		$get_detail = $this->BookAppointment->find('first',array('conditions'=>array('BookAppointment.id'=>$id)));
		$update = $this->ClinicTime->query("UPDATE book_appointment SET status='3' WHERE id='".$id."'");
		echo $id; exit;
	}
	
	function home_visit()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Doctor Appointments');
		$doc_detail = $this->Session->read('DoctorDetail');
		if(!empty($doc_detail))
		{
			if(isset($this->params['named']['appoint_id']) && $this->params['named']['appoint_id']!='')
			{
				$this->data['FilterAppointment']['appointment_id'] = $this->params['named']['appoint_id'];
				$options['appoint_id'] = $this->params['named']['appoint_id'];
			}
			if(isset($this->params['named']['appoint_date_from']) && $this->params['named']['appoint_date_from']!='')
			{
				$this->data['FilterAppointment']['date_from'] = $this->params['named']['appoint_date_from'];
				$options['appoint_date_from'] = $this->params['named']['appoint_date_from'];
			}
			if(isset($this->params['named']['appoint_date_to']) && $this->params['named']['appoint_date_to']!='')
			{
				$this->data['FilterAppointment']['date_to'] = $this->params['named']['appoint_date_to'];
				$options['appoint_date_to'] = $this->params['named']['appoint_date_to'];
			}
			if(isset($this->params['named']['status']) && $this->params['named']['status']!='')
			{
				$this->data['FilterAppointment']['status'] = $this->params['named']['status'];
				$options['status'] = $this->params['named']['status'];
			}
			if(!empty($this->data))
			{
				$appoint_id = $this->data['FilterAppointment']['appointment_id'];
				$from_date = $this->data['FilterAppointment']['date_from'];
				$to_date = $this->data['FilterAppointment']['date_to'];
				$status = $this->data['FilterAppointment']['status'];
				
				if(!empty($appoint_id) && $appoint_id != '')
				{
					$conditions['BookAppointment.appointment_id'] = $appoint_id;
					$options['appoint_id'] = $appoint_id;
				}
				if(!empty($from_date) && $from_date != '')
				{
					$conditions['BookAppointment.appoint_date >='] = date('Y-m-d',strtotime($from_date));
					$options['appoint_date_from'] = $from_date;
				}
				if(!empty($to_date) && $to_date != '')
				{
					$conditions['BookAppointment.appoint_date <='] = date('Y-m-d',strtotime($to_date));
					$options['appoint_date_to'] = $to_date;
				}
				if(!empty($status) && $status != '')
				{
					$conditions['BookAppointment.status'] = $status;
					$options['status'] = $status;
				}
				$conditions['BookAppointment.appointment_for'] = 'HV';
				$this->paginate = array('BookAppointment' => array('limit' =>'10','order'=>array('BookAppointment.id'=>'DESC'),'conditions'=>$conditions));
				$appointments=$this->paginate('BookAppointment');
			}
			else
			{
				$this->paginate = array('BookAppointment' => array('limit' =>'10','order'=>array('BookAppointment.id'=>'DESC'),'conditions'=>array('BookAppointment.doctor_id'=>$doc_detail['Doctor']['id'],'BookAppointment.appointment_for'=>'HV')));
				$appointments=$this->paginate('BookAppointment');
			}
			$k = 0;
			foreach($appointments as $key => $val)
			{
				$expl_address = explode('*',$val['BookAppointment']['home_address']);
				$appointments[$k]['BookAppointment']['user_add1'] = $expl_address[0];
				$appointments[$k]['BookAppointment']['user_add2'] = $expl_address[1];
				$k++;
			}
			
			$this->set('date_from',$from_date);
			$this->set('date_to',$to_date);
			$this->set('status',$status);
			$this->set('appoint_id',$appoint_id);
			
			$this->set('options',$options);
			$this->set('appointments',$appointments);
		}
		else
		{
			$this->redirect('/pages/login_doctor');
		}
	}
	
	function admin_blackout()
	{
		$this->set('title_for_layout','Blackout Doctors Time Slot');
		if(isset($this->params['named']['f_name']) && $this->params['named']['f_name']!='')
		{
			$this->data['FilterDoctor']['name'] = $this->params['named']['f_name'];
			$options['f_name'] = $this->params['named']['f_name'];
		}
		if(isset($this->params['named']['contact']) && $this->params['named']['contact']!='')
		{
			$this->data['FilterDoctor']['contact'] = $this->params['named']['contact'];
			$options['contact'] = $this->params['named']['contact'];
		}
		if(isset($this->params['named']['uniqid']) && $this->params['named']['uniqid']!='')
		{
			$this->data['FilterDoctor']['unique_id'] = $this->params['named']['uniqid'];
			$options['uniqid'] = $this->params['named']['uniqid'];
		}
		if(!empty($this->data))
		{
			//echo "<pre>"; print_r($this->data); exit;
			$f_name = $this->data['FilterDoctor']['name'];
			$contact = $this->data['FilterDoctor']['contact'];
			$uniId = $this->data['FilterDoctor']['unique_id'];
			
			if(!empty($f_name) && $f_name != '')
			{
				$conditions['Doctor.first_name LIKE'] = '%'.$f_name.'%';
				$options['f_name'] = $f_name;
			}
			if(!empty($contact) && $contact != '')
			{
				$conditions['Doctor.contact LIKE'] = '%'.$contact.'%';
				$options['contact'] = $contact;
			}
			if(!empty($uniId) && $uniId != '')
			{
				$conditions['Doctor.unique_id'] = $uniId;
				$options['uniqid'] = $uniId;
			}
			$conditions['Doctor.status'] = 1;
			$conditions['Doctor.email_confirm'] = 1;
			$conditions['Doctor.admin_featured'] = 1;
			$this->paginate = array('Doctor' => array('limit' =>'10','order'=>array('Doctor.id'=>'DESC'),'conditions'=>$conditions));
			$doctorlist=$this->paginate('Doctor');
		}
		else
		{
			$this->paginate = array('Doctor' => array('limit' =>'10','order'=>array('Doctor.id'=>'DESC'),'conditions'=>array('Doctor.status'=>1,'Doctor.email_confirm'=>1,'Doctor.admin_featured'=>1)));
			$doctorlist=$this->paginate('Doctor');
		}
		$this->set('f_name',$f_name);
		$this->set('contact',$contact);
		$this->set('uniId',$uniId);
		$this->set('options',$options);
		$this->set('doctorlist',$doctorlist);
	}
	
	function admin_view_doc_clinic($doc_id=NULL)
	{
		$this->set('title_for_layout','Doctor Clinic(s)');
		$dec_id = base64_decode($doc_id);
		$get_clinic = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$dec_id)));
		$f = 0;
		foreach($get_clinic as $key => $val)
		{
			$get_mon_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_mon_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.day'=>1,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_tue_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_tue_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.day'=>2,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_wed_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_wed_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.day'=>3,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_thu_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_thu_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.day'=>4,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_fri_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_fri_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.day'=>5,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_sat_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_sat_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.day'=>6,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			$get_sun_avail  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot ASC')));
			$get_sun_avail_e  = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.day'=>7,'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1),'order'=>array('ClinicTime.day_slot DESC')));
			
			
			if(!empty($get_mon_avail) && !empty($get_mon_avail_e)){$get_clinic[$f]['DoctorClinic']['day1'] = 'Mo'; $get_clinic[$f]['DoctorClinic']['clinic_s_time'] = $get_mon_avail['ClinicTime']['time_slot']; $get_clinic[$f]['DoctorClinic']['clinic_e_time'] = $get_mon_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_tue_avail) && !empty($get_tue_avail_e)){$get_clinic[$f]['DoctorClinic']['day2'] = 'Tu'; if(empty($get_clinic[$f]['DoctorClinic']['clinic_s_time'])){$get_clinic[$f]['DoctorClinic']['clinic_s_time'] = $get_tue_avail['ClinicTime']['time_slot'];}$get_clinic[$f]['DoctorClinic']['clinic_e_time'] = $get_tue_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_wed_avail) && !empty($get_wed_avail_e)){$get_clinic[$f]['DoctorClinic']['day3'] = 'We'; if(empty($get_clinic[$f]['DoctorClinic']['clinic_s_time'])){$get_clinic[$f]['DoctorClinic']['clinic_s_time'] = $get_wed_avail['ClinicTime']['time_slot'];}$get_clinic[$f]['DoctorClinic']['clinic_e_time'] = $get_wed_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_thu_avail) && !empty($get_thu_avail_e)){$get_clinic[$f]['DoctorClinic']['day4'] = 'Th'; if(empty($get_clinic[$f]['DoctorClinic']['clinic_s_time'])){$get_clinic[$f]['DoctorClinic']['clinic_s_time'] = $get_thu_avail['ClinicTime']['time_slot'];}$get_clinic[$f]['DoctorClinic']['clinic_e_time'] = $get_thu_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_fri_avail) && !empty($get_fri_avail_e)){$get_clinic[$f]['DoctorClinic']['day5'] = 'Fr'; if(empty($get_clinic[$f]['DoctorClinic']['clinic_s_time'])){$get_clinic[$f]['DoctorClinic']['clinic_s_time'] = $get_fri_avail['ClinicTime']['time_slot'];}$get_clinic[$f]['DoctorClinic']['clinic_e_time'] = $get_fri_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_sat_avail) && !empty($get_sat_avail_e)){$get_clinic[$f]['DoctorClinic']['day6'] = 'Sa'; if(empty($get_clinic[$f]['DoctorClinic']['clinic_s_time'])){$get_clinic[$f]['DoctorClinic']['clinic_s_time'] = $get_sat_avail['ClinicTime']['time_slot'];}$get_clinic[$f]['DoctorClinic']['clinic_e_time'] = $get_sat_avail_e['ClinicTime']['time_slot'];}
			
			if(!empty($get_sun_avail) && !empty($get_sun_avail_e)){$get_clinic[$f]['DoctorClinic']['day7'] = 'Su'; if(empty($get_clinic[$f]['DoctorClinic']['clinic_s_time'])){$get_clinic[$f]['DoctorClinic']['clinic_s_time'] = $get_sun_avail['ClinicTime']['time_slot'];}$get_clinic[$f]['DoctorClinic']['clinic_e_time'] = $get_sun_avail_e['ClinicTime']['time_slot'];}
			
			$clinic_timing_mor1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_mor7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>1,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
			
			$clinic_timing_aft1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_aft7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>2,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
			
			$clinic_timing_evn1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_evn7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>3,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
			
			$clinic_timing_ngt1 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>1),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt2 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>2),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt3 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>3),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt4 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>4),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt5 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>5),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt6 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>6),'order'=>array('ClinicTime.time_slot ASC')));
			$clinic_timing_ngt7 = $this->ClinicTime->find('all',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.day_slot'=>4,'ClinicTime.day'=>7),'order'=>array('ClinicTime.time_slot ASC')));
			
			
			$get_clinic[$f]['DoctorClinic']['clinic_timing_mor1'] = $clinic_timing_mor1;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_mor2'] = $clinic_timing_mor2;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_mor3'] = $clinic_timing_mor3;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_mor4'] = $clinic_timing_mor4;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_mor5'] = $clinic_timing_mor5;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_mor6'] = $clinic_timing_mor6;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_mor7'] = $clinic_timing_mor7;
			
			$get_clinic[$f]['DoctorClinic']['clinic_timing_aft1'] = $clinic_timing_aft1;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_aft2'] = $clinic_timing_aft2;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_aft3'] = $clinic_timing_aft3;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_aft4'] = $clinic_timing_aft4;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_aft5'] = $clinic_timing_aft5;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_aft6'] = $clinic_timing_aft6;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_aft7'] = $clinic_timing_aft7;
			
			$get_clinic[$f]['DoctorClinic']['clinic_timing_evn1'] = $clinic_timing_evn1;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_evn2'] = $clinic_timing_evn2;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_evn3'] = $clinic_timing_evn3;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_evn4'] = $clinic_timing_evn4;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_evn5'] = $clinic_timing_evn5;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_evn6'] = $clinic_timing_evn6;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_evn7'] = $clinic_timing_evn7;
			
			$get_clinic[$f]['DoctorClinic']['clinic_timing_ngt1'] = $clinic_timing_ngt1;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_ngt2'] = $clinic_timing_ngt2;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_ngt3'] = $clinic_timing_ngt3;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_ngt4'] = $clinic_timing_ngt4;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_ngt5'] = $clinic_timing_ngt5;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_ngt6'] = $clinic_timing_ngt6;
			$get_clinic[$f]['DoctorClinic']['clinic_timing_ngt7'] = $clinic_timing_ngt7;
			
			$blackout_time = $this->ClinicTime->find('first',array('conditions'=>array('ClinicTime.doctor_id'=>$val['DoctorClinic']['doctor_id'],'ClinicTime.clinic_id'=>$val['DoctorClinic']['id'],'ClinicTime.doctor_choose'=>1,'ClinicTime.availability'=>1,'ClinicTime.blackout_date <>'=>'0000-00-00')));
			if(!empty($blackout_time))
			{
				$get_clinic[$f]['DoctorClinic']['blackout'] = 'Yes';
			}
			$f++;
		}
		$this->set('get_clinic',$get_clinic);
	}
	
	function admin_blackout_time($form_id=NULL)
	{
		if(!empty($this->data))
		{
			foreach($this->data['ClinicTime'] as $key => $val)
			{
				$block_time = $this->ClinicTime->query("UPDATE clinic_time SET blackout_date='".$val."' WHERE id='".$key."' AND doctor_id='".$this->data['CheckDoctor']['doctor_id_'.$form_id]."' AND clinic_id='".$this->data['CheckDoctor']['clinic_id_'.$form_id]."'");
			}
			$this->redirect('/admin/pages/view_doc_clinic/'.base64_encode($this->data['CheckDoctor']['doctor_id_'.$form_id]));
		}
	}
	
	function admin_unblackout_time($form_id=NULL)
	{
		if(!empty($this->data))
		{
			foreach($this->data['ClinicTime'] as $key => $val)
			{
				$block_time = $this->ClinicTime->query("UPDATE clinic_time SET blackout_date='0000-00-00' WHERE id='".$key."' AND doctor_id='".$this->data['CheckDoctorId']['doctor_id_'.$form_id]."' AND clinic_id='".$this->data['CheckDoctorId']['clinic_id_'.$form_id]."'");
			}
			$this->redirect('/admin/pages/view_doc_clinic/'.base64_encode($this->data['CheckDoctorId']['doctor_id_'.$form_id]));
		}
	}
	
	function validate_appoint()
	{
		$id = $_REQUEST['id'];
		$get_otp_pass = $_REQUEST['otp'];
		$find_otp = $this->BookAppointment->find('first',array('conditions'=>array('BookAppointment.id'=>$id)));
		if($find_otp['BookAppointment']['otp'] === $get_otp_pass)
		{
			$update_stat = $this->BookAppointment->query("UPDATE book_appointment SET status='1' WHERE id='".$id."'");
			echo "Success"; exit;
		}
		else
		{
			echo "Failure"; exit;
		}
	}
	
	function cancel_valid_appoint()
	{
		$appoint_id = $_REQUEST['appoint_id'];
		$otp_pass = $_REQUEST['otp'];
		$find_appointment = $this->BookAppointment->find('first',array('conditions'=>array('BookAppointment.appointment_id'=>$appoint_id,'BookAppointment.otp'=>$otp_pass)));
		if(!empty($find_appointment))
		{
			$update_appointment = $this->BookAppointment->query("UPDATE book_appointment SET status='4' WHERE appointment_id='".$appoint_id."' AND otp='".$otp_pass."'");
			echo $find_appointment['BookAppointment']['doctor_name'].'*'.date('d-M-Y',strtotime($find_appointment['BookAppointment']['appoint_date'])).'*'.$find_appointment['BookAppointment']['time_slot'].'*Success'; exit;
		}
		else
		{
			echo "no*no*no*Failure"; exit;
		}
	}
	
	function process_otp()
	{
		$appoint_id = $_REQUEST['appoint_id'];
		$find_appointment = $this->BookAppointment->find('first',array('conditions'=>array('BookAppointment.appointment_id'=>$appoint_id)));
		$mt_rand = mt_rand(1111,9999);
		$update_appointment = $this->BookAppointment->query("UPDATE book_appointment SET otp='".$mt_rand."' WHERE appointment_id='".$appoint_id."'");
		$mess = 'Please use '.$mt_rand.' code to cancel your Appointment Booking request.';
		$this->__sms_message($find_appointment['BookAppointment']['user_contact'],$mess);
		echo "Success"; exit;
	}
	
	function my_appointment()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','My Appointments');
		$user_detail = $this->Session->read('UserDetail');
		//echo "<pre>"; print_r($user_detail); exit;
		if(!empty($user_detail))
		{
			$this->paginate = array('BookAppointment' => array('limit' =>'10','order'=>array('BookAppointment.appointment_id'=>'DESC'),'conditions'=>array('BookAppointment.user_id'=>$user_detail['User']['id'],'BookAppointment.status <>'=>4)));
			$book_appointment=$this->paginate('BookAppointment');
			$k = 0;
			foreach($book_appointment as $cl_k => $cl_v)
			{
				$doc_clinic_info = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.id'=>$cl_v['BookAppointment']['clinic_id'])));
				$book_appointment[$k]['BookAppointment']['clinic_name'] = $doc_clinic_info['DoctorClinic']['clinic_name'];
				$k++;
			}
			
			$this->set('book_appointment',$book_appointment);
		}
		else
		{
			$this->redirect('/pages/login_page');
		}
	}
	
	function doctor_change_password()
	{
		$this->layout = 'tests';
		$this->set('title_for_layout','Change Password');
		$doc_detail = $this->Session->read('DoctorDetail');
		if(!empty($doc_detail))
		{
			if(!empty($this->data))
			{
				//echo "<pre>"; print_r($this->data); exit;
				$enter_old_pass = md5($this->data['Doctor']['old_password']);
				if($enter_old_pass == $this->data['Doctor']['old_pass'])
				{
					if($this->data['Doctor']['new_password'] == $this->data['Doctor']['confirm_password'])
					{
						$this->data['Doctor']['password'] = md5($this->data['Doctor']['confirm_password']);
						if($this->Doctor->create($this->data))
						{
							if($this->Doctor->save($this->data))
							{
								$this->set('alert_mess','Your password changed successfully.');
							}
						}
					}
					else
					{
						$this->set('alert_mess','Your new password and confirm password field did not match.');
					}
				}
				else
				{
					$this->set('alert_mess','Your old password did not matched.');
				}
			}
			$this->set('doctor_id',$doc_detail['Doctor']['id']);
			$this->set('old_pass',$doc_detail['Doctor']['password']);
		}
		else
		{
			$this->redirect('/pages/login_doctor');
		}
	}
	
	function get_city()
	{
		$state_id = $_REQUEST['id'];
		$find_city = $this->StateCity->find('all',array('conditions'=>array('StateCity.state_id'=>$state_id,'StateCity.status'=>1),'order'=>array('StateCity.city_name ASC')));
		if(!empty($find_city))
		{
			$x['status'] = 'Success';
			$x['city_name'] = $find_city;
		}
		else
		{
			$x['status'] = 'Notsuccess';
		}
		$m['city_info'] = $x;
		echo json_encode($m); exit;
	}
	
	function get_special()
	{
		$speciality_name = $_REQUEST['name'];
		$find_list = $this->Specialization->find('all',array('conditions'=>array('Specialization.display_name LIKE'=>'%'.$speciality_name.'%')));
		if(!empty($find_list))
		{
			$x['status'] = 'Success';
			$x['spec_list'] = $find_list;
		}
		else
		{
			$x['status'] = 'Notsuccess';
		}
		$m['spec_info'] = $x;
		echo json_encode($m);
		exit;
	}
	
	function get_special_docconnect()
	{
		header("Access-Control-Allow-Origin: http://doctorconnect.in"); 
		$speciality_name = $_REQUEST['name'];
		$find_list = $this->Specialization->find('all',array('conditions'=>array('Specialization.display_name LIKE'=>'%'.$speciality_name.'%')));
		if(!empty($find_list))
		{
			$x['status'] = 'Success';
			$x['spec_list'] = $find_list;
		}
		else
		{
			$x['status'] = 'Notsuccess';
		}
		$m['spec_info'] = $x;
		echo json_encode($m);
		exit;
	}
	
	function get_clinic()
	{
		$clinic_name = $_REQUEST['name'];
		$find_list = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.clinic_name LIKE'=>'%'.$clinic_name.'%')));
		if(!empty($find_list))
		{
			$x['status'] = 'Success';
			$x['clinic_list'] = $find_list;
		}
		else
		{
			$x['status'] = 'Notsuccess';
		}
		$m['clinic_info'] = $x;
		echo json_encode($m);
		exit;
	}
	
	function get_clinic_docconnect()
	{
		header("Access-Control-Allow-Origin: http://doctorconnect.in"); 
		$clinic_name = $_REQUEST['name'];
		$find_list = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.clinic_name LIKE'=>'%'.$clinic_name.'%')));
		if(!empty($find_list))
		{
			$x['status'] = 'Success';
			$x['clinic_list'] = $find_list;
		}
		else
		{
			$x['status'] = 'Notsuccess';
		}
		$m['clinic_info'] = $x;
		echo json_encode($m);
		exit;
	}
	
	function get_cl_value_docconnect()
	{
		header("Access-Control-Allow-Origin: http://doctorconnect.in"); 
		$clinic_id = $_REQUEST['id'];
		$get_first_clinic = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.id'=>$clinic_id)));
		echo $get_first_clinic['DoctorClinic']['clinic_name']; exit;
	}
	
	function get_cl_value()
	{
		$clinic_id = $_REQUEST['id'];
		$get_first_clinic = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.id'=>$clinic_id)));
		echo $get_first_clinic['DoctorClinic']['clinic_name']; exit;
	}
	
	function get_state_name()
	{
		$state_name = $_REQUEST['name'];
		$find_list = $this->State->find('all',array('conditions'=>array('State.name LIKE'=>'%'.$state_name.'%')));
		if(!empty($find_list))
		{
			$x['status'] = 'Success';
			$x['state_list'] = $find_list;
		}
		else
		{
			$x['status'] = 'Notsuccess';
		}
		$m['state_info'] = $x;
		echo json_encode($m);
		exit;
	}
	
	function get_state_name_docconnect()
	{
		header("Access-Control-Allow-Origin: http://doctorconnect.in"); 
		$state_name = $_REQUEST['name'];
		$find_list = $this->State->find('all',array('conditions'=>array('State.name LIKE'=>'%'.$state_name.'%')));
		if(!empty($find_list))
		{
			$x['status'] = 'Success';
			$x['state_list'] = $find_list;
		}
		else
		{
			$x['status'] = 'Notsuccess';
		}
		$m['state_info'] = $x;
		echo json_encode($m);
		exit;
	}
	
	function get_st_value()
	{
		$state_id = $_REQUEST['id'];
		$get_first_state = $this->State->find('first',array('conditions'=>array('State.id'=>$state_id)));
		echo $get_first_state['State']['id'].'*'.$get_first_state['State']['name']; exit;
	}
	
	function get_st_value_docconnect()
	{
		header("Access-Control-Allow-Origin: http://doctorconnect.in"); 
		$state_id = $_REQUEST['id'];
		$get_first_state = $this->State->find('first',array('conditions'=>array('State.id'=>$state_id)));
		echo $get_first_state['State']['id'].'*'.$get_first_state['State']['name']; exit;
	}
	
	function get_city_name()
	{
		$city_name = $_REQUEST['name'];
		$state = $_REQUEST['state'];
		$find_list = $this->StateCity->find('all',array('conditions'=>array('StateCity.city_name LIKE'=>'%'.$city_name.'%','StateCity.state_id'=>$state),'order'=>array('StateCity.city_name ASC')));
		if(!empty($find_list))
		{
			$x['status'] = 'Success';
			$x['city_list'] = $find_list;
		}
		else
		{
			$x['status'] = 'Notsuccess';
		}
		$m['city_info'] = $x;
		echo json_encode($m);
		exit;
	}
	
	function get_city_name_docconnect()
	{
		header("Access-Control-Allow-Origin: http://doctorconnect.in"); 
		$city_name = $_REQUEST['name'];
		$state = $_REQUEST['state'];
		$find_list = $this->StateCity->find('all',array('conditions'=>array('StateCity.city_name LIKE'=>'%'.$city_name.'%','StateCity.state_id'=>$state),'order'=>array('StateCity.city_name ASC')));
		if(!empty($find_list))
		{
			$x['status'] = 'Success';
			$x['city_list'] = $find_list;
		}
		else
		{
			$x['status'] = 'Notsuccess';
		}
		$m['city_info'] = $x;
		echo json_encode($m);
		exit;
	}
	
	function get_lt_value()
	{
		$city_id = $_REQUEST['id'];
		$get_first_city = $this->StateCity->find('first',array('conditions'=>array('StateCity.id'=>$city_id)));
		echo $get_first_city['StateCity']['id'].'*'.$get_first_city['StateCity']['city_name']; exit;
	}
	
	function get_lt_value_docconnect()
	{
		header("Access-Control-Allow-Origin: http://doctorconnect.in"); 
		$city_id = $_REQUEST['id'];
		$get_first_city = $this->StateCity->find('first',array('conditions'=>array('StateCity.id'=>$city_id)));
		echo $get_first_city['StateCity']['id'].'*'.$get_first_city['StateCity']['city_name']; exit;
	}
	
	function get_specialization_value()
	{
		$special_id = $_REQUEST['id'];
		$get_first_special = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$special_id)));
		echo $get_first_special['Specialization']['id'].'*'.$get_first_special['Specialization']['display_name']; exit;
	}
	
	function get_specialization_value_docconnect()
	{
		header("Access-Control-Allow-Origin: http://doctorconnect.in"); 
		$special_id = $_REQUEST['id'];
		$get_first_special = $this->Specialization->find('first',array('conditions'=>array('Specialization.id'=>$special_id)));
		echo $get_first_special['Specialization']['id'].'*'.$get_first_special['Specialization']['display_name']; exit;
	}
	
	function admin_activate_appoint($doc_id=NULL,$param_page=NULL)
	{
		$dec_doc = base64_decode($doc_id);
		$update = $this->Doctor->query("UPDATE doctors SET appointment_activation='1' WHERE id='".$dec_doc."'");
		if(!empty($param_page))
		{
			$this->redirect('/admin/pages/appoint_activate/page:'.$param_page);
		}
		else
		{
			$this->redirect('/admin/pages/appoint_activate');
		}
	}
	
	function admin_deactivate_appoint($doc_id=NULL,$param_page=NULL)
	{
		$dec_doc = base64_decode($doc_id);
		$update = $this->Doctor->query("UPDATE doctors SET appointment_activation='0' WHERE id='".$dec_doc."'");
		if(!empty($param_page))
		{
			$this->redirect('/admin/pages/appoint_activate/page:'.$param_page);
		}
		else
		{
			$this->redirect('/admin/pages/appoint_activate');
		}
	}
	
	function book_appointment_request($form_id=NULL)
	{
		if(!empty($this->data))
		{
			$doctor_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$this->data['RequestAppointment']['doctor_id'])));
			$clinic_detail = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.id'=>$this->data['RequestAppointment']['clinic_id'])));
			$EmailData['EmailData']['doctor_name'] = $doctor_detail['Doctor']['first_name'].' '.$doctor_detail['Doctor']['last_name'];
			$EmailData['EmailData']['clinic_name'] = $clinic_detail['DoctorClinic']['clinic_name'];
			$EmailData['EmailData']['pat_name'] = $this->data['RequestAppointment']['pat_name'.$form_id];
			$EmailData['EmailData']['pat_age'] = $this->data['RequestAppointment']['pat_age'.$form_id];
			$EmailData['EmailData']['pat_email'] = $this->data['RequestAppointment']['pat_email'.$form_id];
			$EmailData['EmailData']['pat_contact'] = $this->data['RequestAppointment']['pat_contact'.$form_id];
			$EmailData['EmailData']['appoint_date_req'] = $this->data['RequestAppointment']['appoint_date_req'.$form_id];
			$EmailData['EmailData']['appoint_time'] = $this->data['RequestAppointment']['appoint_time_hh'.$form_id].':'.$this->data['RequestAppointment']['appoint_time_ss'.$form_id].' '.$this->data['RequestAppointment']['appoint_time_sl'.$form_id];
			$EmailData['EmailData']['pat_locality'] = $this->data['RequestAppointment']['pat_locality'.$form_id];
			$EmailData['EmailData']['pat_reason'] = $this->data['RequestAppointment']['pat_reason'.$form_id];
			
			if(!empty($EmailData))
			{
				$this->set('EmailData',$EmailData);
				$this->Email->to = 'tripathi.ashish2007@gmail.com';
				//$this->Email->bcc = array('agrawalrohit3010@gmail.com');
				//$this->Email->cc = array('anjalisharmadelhi87@gmail.com');
				$this->Email->subject = 'Appointment Request By User';
				$this->Email->replyTo = $this->data['RequestAppointment']['pat_email'.$form_id];
				$this->Email->from = 'Niramayahealthcare <info@niramayahealthcare.com>';
				$this->Email->template = 'appointment_request';
				$this->Email->sendAs = 'both'; 
				if($this->Email->send())
				{
					$this->redirect('/pages/doctor_detail/'.base64_encode($this->data['RequestAppointment']['doctor_id']));
				}
			}
		}
	}
	
	function admin_appoint_activate()
	{
		$this->set('title_for_layout','View Doctor(s)');
		$this->paginate = array('Doctor' => array('limit' =>'10','order'=>array('Doctor.id'=>'ASC'),'conditions'=>array('Doctor.status'=>1)));
		$doctorlist=$this->paginate('Doctor');
		$this->set('doctorlist',$doctorlist);
		if(!empty($this->params['named']['page']))
		{
			$this->set('param_page',$this->params['named']['page']);
		}
	}
	
	function book_appointment_request_search($form_id=NULL)
	{
		if(!empty($this->data))
		{
			$doctor_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$this->data['RequestAppointment']['doctor_id'])));
			$clinic_detail = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.id'=>$this->data['RequestAppointment']['clinic_id'])));
			$EmailData['EmailData']['doctor_name'] = $doctor_detail['Doctor']['first_name'].' '.$doctor_detail['Doctor']['last_name'];
			$EmailData['EmailData']['clinic_name'] = $clinic_detail['DoctorClinic']['clinic_name'];
			$EmailData['EmailData']['pat_name'] = $this->data['RequestAppointment']['pat_name'.$form_id];
			$EmailData['EmailData']['pat_age'] = $this->data['RequestAppointment']['pat_age'.$form_id];
			$EmailData['EmailData']['pat_email'] = $this->data['RequestAppointment']['pat_email'.$form_id];
			$EmailData['EmailData']['pat_contact'] = $this->data['RequestAppointment']['pat_contact'.$form_id];
			$EmailData['EmailData']['appoint_date_req'] = $this->data['RequestAppointment']['appoint_date_req'.$form_id];
			$EmailData['EmailData']['appoint_time'] = $this->data['RequestAppointment']['appoint_time_hh'.$form_id].':'.$this->data['RequestAppointment']['appoint_time_ss'.$form_id].' '.$this->data['RequestAppointment']['appoint_time_sl'.$form_id];
			$EmailData['EmailData']['pat_locality'] = $this->data['RequestAppointment']['pat_locality'.$form_id];
			$EmailData['EmailData']['pat_reason'] = $this->data['RequestAppointment']['pat_reason'.$form_id];
			
			if(!empty($EmailData))
			{
				$this->set('EmailData',$EmailData);
				$this->Email->to = BOOK_APPOINT_REQUEST_EMAIL;
				//$this->Email->bcc = array('agrawalrohit3010@gmail.com');
				//$this->Email->cc = array('anjalisharmadelhi87@gmail.com');
				$this->Email->subject = 'Appointment Request By User';
				$this->Email->replyTo = $this->data['RequestAppointment']['pat_email'.$form_id];
				$this->Email->from = 'Niramayahealthcare <info@niramayahealthcare.com>';
				$this->Email->template = 'appointment_request';
				$this->Email->sendAs = 'both'; 
				if($this->Email->send())
				{
					$this->redirect('/pages/find_doctor/'.$form_id.'/'.base64_encode($this->data['RequestAppointment']['search_name'.$form_id]).'/'.base64_encode($this->data['RequestAppointment']['spec_name'.$form_id]).'/'.base64_encode($this->data['RequestAppointment']['spec_id'.$form_id]).'/'.base64_encode($this->data['RequestAppointment']['state_name'.$form_id]).'/'.base64_encode($this->data['RequestAppointment']['state_id'.$form_id]).'/'.base64_encode($this->data['RequestAppointment']['city'.$form_id]).'/'.base64_encode($this->data['RequestAppointment']['city_id'.$form_id]).'/'.base64_encode($EmailData['EmailData']['doctor_name']).'/'.base64_encode($EmailData['EmailData']['appoint_date_req']).'/'.base64_encode($EmailData['EmailData']['appoint_time']));
				}
			}
		}
	}
	
	function book_appointment_request_filter($form_id=NULL)
	{
		if(!empty($this->data))
		{
			//echo "<pre>"; print_r($this->data); exit;
			$doctor_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$this->data['RequestAppointment']['doctor_id'])));
			$clinic_detail = $this->DoctorClinic->find('first',array('conditions'=>array('DoctorClinic.id'=>$this->data['RequestAppointment']['clinic_id'])));
			$EmailData['EmailData']['doctor_name'] = $doctor_detail['Doctor']['first_name'].' '.$doctor_detail['Doctor']['last_name'];
			$EmailData['EmailData']['clinic_name'] = $clinic_detail['DoctorClinic']['clinic_name'];
			$EmailData['EmailData']['pat_name'] = $this->data['RequestAppointment']['pat_name'.$form_id];
			$EmailData['EmailData']['pat_age'] = $this->data['RequestAppointment']['pat_age'.$form_id];
			$EmailData['EmailData']['pat_email'] = $this->data['RequestAppointment']['pat_email'.$form_id];
			$EmailData['EmailData']['pat_contact'] = $this->data['RequestAppointment']['pat_contact'.$form_id];
			$EmailData['EmailData']['appoint_date_req'] = $this->data['RequestAppointment']['appoint_date_req'.$form_id];
			$EmailData['EmailData']['appoint_time'] = $this->data['RequestAppointment']['appoint_time_hh'.$form_id].':'.$this->data['RequestAppointment']['appoint_time_ss'.$form_id].' '.$this->data['RequestAppointment']['appoint_time_sl'.$form_id];
			$EmailData['EmailData']['pat_locality'] = $this->data['RequestAppointment']['pat_locality'.$form_id];
			$EmailData['EmailData']['pat_reason'] = $this->data['RequestAppointment']['pat_reason'.$form_id];
			
			if(!empty($EmailData))
			{
				$this->set('EmailData',$EmailData);
				$this->Email->to = 'tripathi.ashish2007@gmail.com';
				//$this->Email->bcc = array('agrawalrohit3010@gmail.com');
				//$this->Email->cc = array('anjalisharmadelhi87@gmail.com');
				$this->Email->subject = 'Appointment Request By User';
				$this->Email->replyTo = $this->data['RequestAppointment']['pat_email'.$form_id];
				$this->Email->from = 'Niramayahealthcare <info@niramayahealthcare.com>';
				$this->Email->template = 'appointment_request';
				$this->Email->sendAs = 'both'; 
				if($this->Email->send())
				{
					$this->redirect('/pages/filter_doctor/'.base64_encode($this->data['RequestAppointment']['filter_feature'.$form_id]).'/'.base64_encode($this->data['RequestAppointment']['filter_day_avail'.$form_id]).'/'.base64_encode($this->data['RequestAppointment']['filter_fee'.$form_id]).'/'.base64_encode($this->data['RequestAppointment']['filter_user_temp'.$form_id]).'/'.base64_encode($EmailData['EmailData']['doctor_name']).'/'.base64_encode($EmailData['EmailData']['appoint_date_req']).'/'.base64_encode($EmailData['EmailData']['appoint_time']));
				}
			}
		}
	}
	
	function admin_feature_verify($doc_id=NULL)
	{
		$update = $this->Doctor->query("UPDATE doctors SET admin_featured='1' WHERE id='".$doc_id."'");
		$find_clinic = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_id)));
		foreach($find_clinic as $cl_k => $cl_v)
		{
			$update_clinic = $this->DoctorClinic->query("UPDATE doctor_clinic SET featured='1' WHERE id='".$cl_v['DoctorClinic']['id']."'");
		}
		$this->redirect('/admin/pages/doctor_detail/'.base64_encode($doc_id));
	}
	
	function admin_verify_doctor($doc_id=NULL)
	{
		$update = $this->Doctor->query("UPDATE doctors SET status='1' WHERE id='".$doc_id."'");
		
		$find_clinic = $this->DoctorClinic->find('all',array('conditions'=>array('DoctorClinic.doctor_id'=>$doc_id)));
		foreach($find_clinic as $cl_k => $cl_v)
		{
			$update_clinic = $this->DoctorClinic->query("UPDATE doctor_clinic SET verify='1' WHERE id='".$cl_v['DoctorClinic']['id']."'");
		}
		$update = $this->Doctor->query("UPDATE doctors SET status='1' WHERE id='".$doc_id."'");
		
		$this->redirect('/admin/pages/doctor_detail/'.base64_encode($doc_id));
	}
	
	function admin_edit_personal_detail($doc_id=NULL)
	{
		$this->set('title_for_layout','Edit Doctor Personal Details');
		$dec_doc_id = base64_decode($doc_id);
		if(!empty($this->data))
		{
			if(!empty($this->data['Doctor']['address1']) && empty($this->data['Doctor']['address2']))
			{
				$this->data['Doctor']['address'] = $this->data['Doctor']['address1'];
			}
			if(!empty($this->data['Doctor']['address1']) && !empty($this->data['Doctor']['address2']))
			{
				$this->data['Doctor']['address'] = $this->data['Doctor']['address1'].'*'.$this->data['Doctor']['address2'];
			}
			$this->data['Doctor']['dob'] = $this->data['Doctor']['day'].'-'.$this->data['Doctor']['month'].'-'.$this->data['Doctor']['year'];
			if(!empty($this->data['Doctor']['doc_image']))
			{
				$file = $this->File->uploadFile($this->data['Doctor']['doc_image'], DOCTOR_IMAGE_STORE_PATH, true,array('jpg','gif','jpeg','png','JPG','GIF','JPEG','PNG','bmp','BMP'));
				$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
				$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_WIDTH);
				$this->Image->save(DOCTOR_IMAGE_THUMB_PATH.$file['name']);
				
				$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
				$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_MEDIUM_WIDTH);
				$this->Image->save(DOCTOR_IMAGE_MEDIUM_PATH.$file['name']);
				
				$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
				$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_SMALL_WIDTH);
				$this->Image->save(DOCTOR_IMAGE_SMALL_PATH.$file['name']);
				
				$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
				$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_VERYSMALL_WIDTH);
				$this->Image->save(DOCTOR_IMAGE_VERYSMALL_PATH.$file['name']);
				
				$this->Image->load(DOCTOR_IMAGE_STORE_PATH.$file['name']);
				$this->Image->resizeToWidth(DOCTOR_IMAGE_THUMB_BIGSMALL_WIDTH);
				$this->Image->save(DOCTOR_IMAGE_BIGSMALL_PATH.$file['name']);
				
				$this->File->deleteFile(DOCTOR_IMAGE_STORE_PATH.$this->data['Doctor']['old_image']);
				$this->File->deleteFile(DOCTOR_IMAGE_THUMB_PATH.$this->data['Doctor']['old_image']);
				$this->File->deleteFile(DOCTOR_IMAGE_MEDIUM_PATH.$this->data['Doctor']['old_image']);
				$this->File->deleteFile(DOCTOR_IMAGE_SMALL_PATH.$this->data['Doctor']['old_image']);
				$this->File->deleteFile(DOCTOR_IMAGE_VERYSMALL_PATH.$this->data['Doctor']['old_image']);
				$this->File->deleteFile(DOCTOR_IMAGE_BIGSMALL_PATH.$this->data['Doctor']['old_image']);
				
				$this->data['Doctor']['image'] = $file['name'];
			}
			else
			{
				$this->data['Doctor']['image'] = $this->data['Doctor']['old_image'];
			}
			
			
			
			
			if($this->Doctor->create($this->data))
			{
				if($this->Doctor->save($this->data))
				{
					$this->Session->setFlash('Doctor details updated successfully.','flash_success');
					$this->redirect('/admin/pages/doctor_detail/'.base64_encode($this->data['Doctor']['id']));
				}
			}
		}
		else
		{
			$doc_detail = $this->Doctor->find('first',array('conditions'=>array('Doctor.id'=>$dec_doc_id)));
			$expl_add = explode('*',$doc_detail['Doctor']['address']);
			if(!empty($expl_add[0]))
			{
				$doc_detail['Doctor']['address1'] = $expl_add[0];
			}
			if(!empty($expl_add[1]))
			{
				$doc_detail['Doctor']['address2'] = $expl_add[1];
			}
			
			$expl_dob = explode('-',$doc_detail['Doctor']['dob']);
			$doc_detail['Doctor']['day'] = $expl_dob[0];
			$doc_detail['Doctor']['month'] = $expl_dob[1];
			$doc_detail['Doctor']['year'] = $expl_dob[2];
			$this->data = $doc_detail;
		}
		$states = $this->State->find('all',array('conditions'=>array('State.status'=>1)));
		$this->set('states',$states);
	}

        function appoint_customer_login()
	{
		$user_session = $this->Session->read('UserDetail');
		if(empty($user_session))
		{
			$this->redirect('/pages/login_page');
		}
		else
		{
			$this->redirect('/pages/my_appointment');
		}
	}

        function appoint_doctor_login()
	{
		$doctor_session = $this->Session->read('DoctorDetail');
		if(empty($doctor_session))
		{
			$this->redirect('/pages/login_doctor');
		}
		else
		{
			$this->redirect('/pages/appointment');
		}
	}
	
	function view_appointment()
	{
	
		$app_id=$_REQUEST['appid'];
		$mob_no=$_REQUEST['mob'];
		$data=$this->BookAppointment->find('first',array('conditions'=>array('BookAppointment.appointment_id'=>$app_id,'BookAppointment.user_contact'=>$mob_no)));
				echo json_encode(array('success'=>1,'appointment_detail'=>$data));
		$this->render(false);
		exit;
		
	}
	
	function admin_doctor_clinic_acti_deacti($clinic_status=null,$clinic_id=null)
	{
		if(isset($clinic_status) && isset($clinic_id))
		{
			
			$this->DoctorClinic->updateAll(array('DoctorClinic.status'=>$clinic_status),array('DoctorClinic.id'=>$clinic_id));
			
			$this->redirect($_SERVER['HTTP_REFERER']);
		}
	}

	function affordable_preventive_healthcare()
	{
		$this->layout = 'tests';
	}

	function health_checkup_today_for_healthy_tomorrow()
	{
		$this->layout = 'tests';
	}
		
	public function prescription()
	{
		$this->layout = 'tests';
		$this->PrescriptionMaster = ClassRegistry::init('PrescriptionMaster');	
		if($this->data)
		{
			$uploadfile = array();
			if(!empty($_FILES))
			{
				$total = count($_FILES);
				for( $i=1 ; $i <= $total ; $i++ ) {
				  $tmpFilePath = $_FILES['prescription_url'.$i]['tmp_name'][$i];
				  if ($tmpFilePath != ""){
					$newFilePath = "/home2/niramovh/test.niramayahealthcare.com/app/webroot/files/ticket/" . $_FILES['prescription_url'.$i]['name'][$i];
					if(move_uploaded_file($tmpFilePath, $newFilePath)) {
						array_push($uploadfile,$_FILES['prescription_url'.$i]['name'][$i]);
					}
				  }
				}
			}
						
			$this->PrescriptionMaster->create();
			$this->data['PrescriptionMaster']['prescription_id'] = 'P-'.strtotime(date('Y-m-d h:i:s'));
			$this->data['PrescriptionMaster']['first_name'] = $this->data['PrescriptionMaster']['first_name'];
			$this->data['PrescriptionMaster']['last_name'] = $this->data['PrescriptionMaster']['last_name'];
			$this->data['PrescriptionMaster']['gender'] = $this->data['PrescriptionMaster']['gender'];
			$this->data['PrescriptionMaster']['age'] = $this->data['PrescriptionMaster']['age'];
			$this->data['PrescriptionMaster']['date'] = date('Y-m-d h:i:s');
			$this->data['PrescriptionMaster']['contact_number'] = $this->data['PrescriptionMaster']['contact_number'];
			$this->data['PrescriptionMaster']['alternate_contact'] = $this->data['PrescriptionMaster']['alternate_contact'];
			$this->data['PrescriptionMaster']['mrn'] = strtotime(date('Y-m-d h:i:s'));
			$this->data['PrescriptionMaster']['email'] = $this->data['PrescriptionMaster']['email'];
			$this->data['PrescriptionMaster']['estimate_reference'] = 0;
			$this->data['PrescriptionMaster']['referred_by'] = $this->data['PrescriptionMaster']['referred_by'];
			$this->data['PrescriptionMaster']['prescription_url'] = implode("@@@@@",$uploadfile);
			$this->data['PrescriptionMaster']['remarks'] = $this->data['PrescriptionMaster']['remarks'];
			$this->data['PrescriptionMaster']['status'] = 1;
			$this->data['PrescriptionMaster']['created_by'] = '31';
			$this->data['PrescriptionMaster']['order_type'] = 'Online';
			
			$this->PrescriptionMaster->save($this->data);
			$this->Session->setFlash('Prescription Added successfully.','flash_success');
			//$this->redirect(array('controller'=>'pages','action'=>'index'));
		}
	}

	public function runner_schedule($agent=null,$date=null)
	{
		$this->layout = 'tests';
		$runner = base64_decode($agent);
		$date = base64_decode($date);
		
		$this->RunnerRequest = ClassRegistry::init('RunnerRequest');
		$runnerdata = $this->RunnerRequest->find('all',array('conditions'=>array('RunnerRequest.date'=>$date,'RunnerRequest.agent_id'=>$runner),'order'=>array('RunnerRequest.time_slot ASC')));
		$this->DropLocations = ClassRegistry::init('DropLocations');
		//print_R($runnerdata);die;
		$count = 0;
		$nre_runnerdata = array();
		foreach($runnerdata as $val)
		{
			$new_runnerdata[$count] = $val;
			$drop_loc = $this->DropLocations->find('first',array('conditions'=>array('DropLocations.id'=>$val['RunnerRequest']['drop_loc_id'])));
			$new_runnerdata[$count]['RunnerRequest']['drop_name'] = $drop_loc['DropLocations']['poc'];
			$new_runnerdata[$count]['RunnerRequest']['drop_contact'] = $drop_loc['DropLocations']['contact'];
			$new_runnerdata[$count]['RunnerRequest']['drop_address'] = $drop_loc['DropLocations']['address'];
			$new_runnerdata[$count]['RunnerRequest']['drop_city'] = $drop_loc['DropLocations']['city'];
			$new_runnerdata[$count]['RunnerRequest']['drop_state'] = $drop_loc['DropLocations']['state'];
			$new_runnerdata[$count]['RunnerRequest']['drop_location'] = $drop_loc['DropLocations']['geolocation'];
			$new_runnerdata[$count]['RunnerRequest']['loc_name'] = $drop_loc['DropLocations']['location_name'];
			$count++;
		}	
		
		$this->City = ClassRegistry::init('City');
		
		$this->RunnerTimeslot = ClassRegistry::init("RunnerTimeslot");
		$time_slot = $this->RunnerTimeslot->find('list',array('fields'=>array('RunnerTimeslot.id','RunnerTimeslot.slot_name')));
		
		$this->State = ClassRegistry::init('State');
		$this->Lab = ClassRegistry::init('Lab');
		//die;
		$pcc_list = $this->Lab->find('list',array('conditions'=>array('Lab.status'=>1),'fields'=>array('Lab.id','Lab.pcc_name')));
		$city = $this->City->find('list',array('conditions'=>array('City.status'=>1),'fields'=>array('City.id','City.name')));
		$state = $this->State->find('list',array('conditions'=>array('State.status'=>1),'fields'=>array('State.id','State.name')));
		
		$this->set('runnerdata',$new_runnerdata);
		$this->set('pcc_list',$pcc_list);
		$this->set('city',$city);
		$this->set('state',$state);
		$this->set('timelabs',$time_slot);
		$this->set('date',$date);
	}
	
	public function submit_vials_details($runner_id=null)
	{
		$this->layout = 'tests';
		$runner = base64_decode($runner_id);
		
		$this->RunnerRequest = ClassRegistry::init('RunnerRequest');
		$this->RunnerSampleData = ClassRegistry::init("RunnerSampleData");
		
		$runner_data = $this->RunnerRequest->find('first',array('conditions'=>array('RunnerRequest.id'=>$runner)));
		//print_R($runner_data);die;
		if($runner_data['RunnerRequest']['status'] >='3')
		{
			$specific_sample = $this->Samplemaster->find('list',array('conditions'=>array('Samplemaster.to_be_shown'=>1),'fields'=>array('Samplemaster.type','Samplemaster.sample_id')));
			$other_sample = $this->Samplemaster->find('list',array('conditions'=>array('Samplemaster.to_be_shown'=>0),'fields'=>array('Samplemaster.type','Samplemaster.sample_id')));

			if($runner_data['RunnerRequest']['status']>='4')
			{
				$pickup_sample_value = $this->RunnerSampleData->find('list',array('conditions'=>array('RunnerSampleData.runner_data_id'=>$runner,'RunnerSampleData.status'=>'0'),'fields'=>array('RunnerSampleData.sample_type','RunnerSampleData.no_of_vials')));
				$this->set('pickup_sample_value',$pickup_sample_value);
				//print_R($pickup_sample_value);
				if($runner_data['RunnerRequest']['status']>='5')
				{
					$drop_sample_value = $this->RunnerSampleData->find('list',array('conditions'=>array('RunnerSampleData.runner_data_id'=>$runner,'RunnerSampleData.status'=>'1'),'fields'=>array('RunnerSampleData.sample_type','RunnerSampleData.no_of_vials')));
					//print_R($drop_sample_value);die;
					$this->set('drop_sample_value',$drop_sample_value);
				}
			}
			
			$sampleColor = array("Sodium Citrate (Blue)"=>"lightblue",  "SERUM (SST or Plain)"=>"yellow" ,  "Sodium Heparin (Green)"=>"green",  "EDTA Whole Blood (Purple)"=>"purple",  "Glucose"=>"darkgrey","Urine"=>"#FFD700",  "Stool"=>"brown",  "Sputum"=>"white");
			$this->set('sample_color',$sampleColor);
			$this->set('sample_specific',$specific_sample);
			$this->set('sample_others',$other_sample);
		}
		
		$this->data['Runner'] = $runner_data['RunnerRequest']; 
	}
	
	function runner_pickup_data($runner_service=null)
	{
		//print_R($_POST);die;
		$pick_date = date('Y=m-d h:i:s');
		$runner_service_id = base64_decode($runner_service);
		$this->RunnerSampleData = ClassRegistry::init("RunnerSampleData");
		
		foreach($_POST['pickup_sample_value'] as $key=>$val)
		{
			if(!empty($_POST['pickup_sample_value'][$key]))
			{
				$this->runnersampledata = $this->RunnerSampleData->create();
				$this->runnersampledata['RunnerSampleData']['runner_data_id'] = $runner_service_id;
				$this->runnersampledata['RunnerSampleData']['sample_type'] = $key;
				$this->runnersampledata['RunnerSampleData']['no_of_vials'] = $_POST['pickup_sample_value'][$key];
				$this->runnersampledata['RunnerSampleData']['status'] = 0;
				$this->RunnerSampleData->save($this->runnersampledata);
			}
		}
		if(!empty($_POST['pickup_sample_others']))
		{
			$this->runnersampledata = $this->RunnerSampleData->create();
			$this->runnersampledata['RunnerSampleData']['runner_data_id'] = $runner_service_id;
			$this->runnersampledata['RunnerSampleData']['sample_type'] = "others";
			$this->runnersampledata['RunnerSampleData']['no_of_vials'] = $_POST['pickup_sample_others'];
			$this->runnersampledata['RunnerSampleData']['status'] = 0;
			$this->RunnerSampleData->save($this->runnersampledata);
		}
		
		$this->RunnerRequest->query("UPDATE runner_request SET recieved_amount='".$this->data['Runner_pickup']['recieved_amount']."',status='4',pickup_datetime='".$pick_date."',pickup_remark='".$_POST['pickup_remarks']."' WHERE id='".$runner_service_id."'");
		$this->Session->setFlash('Pick Up Data Updated Successfully.','flash_success');  
		$this->redirect('/pages/submit_vials_details/'.base64_encode($runner_service_id));
	}
	
	function runner_drop_data($runner_service=null)
	{
		$pick_date = date('Y=m-d h:i:s');
		$runner_service_id = base64_decode($runner_service);
		$this->RunnerSampleData = ClassRegistry::init("RunnerSampleData");
		
		foreach($_POST['drop_sample_value'] as $key=>$val)
		{
			if(!empty($_POST['drop_sample_value'][$key]))
			{
				$this->runnersampledata = $this->RunnerSampleData->create();
				$this->runnersampledata['RunnerSampleData']['runner_data_id'] = $runner_service_id;
				$this->runnersampledata['RunnerSampleData']['sample_type'] = $key;
				$this->runnersampledata['RunnerSampleData']['no_of_vials'] = $_POST['drop_sample_value'][$key];
				$this->runnersampledata['RunnerSampleData']['status'] = 1;
				$this->RunnerSampleData->save($this->runnersampledata);
			}
		}
		if(!empty($_POST['drop_sample_others']))
		{
			$this->runnersampledata = $this->RunnerSampleData->create();
			$this->runnersampledata['RunnerSampleData']['runner_data_id'] = $runner_service_id;
			$this->runnersampledata['RunnerSampleData']['sample_type'] = "others";
			$this->runnersampledata['RunnerSampleData']['no_of_vials'] = $_POST['drop_sample_others'];
			$this->runnersampledata['RunnerSampleData']['status'] = 1;
			$this->RunnerSampleData->save($this->runnersampledata);
		}
		
		$recieved_amount = "";
		if(isset($this->data['Runner_pickup']['recieved_amount']))
		{
			$recieved_amount = "recieved_amount='".$this->data['Runner_pickup']['recieved_amount']."',";
		}
		
		$this->RunnerRequest->query("UPDATE runner_request SET ".$recieved_amount." status='5',drop_datetime='".$pick_date."',drop_remark='".$_POST['drop_remarks']."' WHERE id='".$runner_service_id."'");
		$this->Session->setFlash('Drop Data Updated Successfully.','flash_success');  
		$this->redirect('/pages/submit_vials_details/'.base64_encode($runner_service_id));
	}
	
	function runner_confirm_data($runner_service=null)
	{
		$runner_service_id = base64_decode($runner_service);
		$this->RunnerRequest->query("UPDATE runner_request SET status='6',remarks='".$_POST['confirm_remark']."' WHERE id='".$runner_service_id."'");
		$this->redirect('/pages/submit_vials_details/'.base64_encode($runner_service_id));
	}

	function pincode_servicibility()
	{
		$this->PincodeMaster = ClassRegistry::init('PincodeMaster');
		$this->State = ClassRegistry::init("State");
		$this->City = ClassRegistry::init("City");

		$pincode = $this->PincodeMaster->query("Select distinct(c.name) from pincode_master as p inner join cities as c on c.id=p.city where p.servicable=1");
		
		$this->set('servicable_city',$pincode);
		$this->layout = 'tests';
		$this->set('title_for_layout','Pincode Servicibility');
	}

	function check_pincode()
	{
		$this->PincodeMaster = ClassRegistry::init('PincodeMaster');
		$this->State = ClassRegistry::init("State");
		$this->City = ClassRegistry::init("City");
		
		$pincode = $this->PincodeMaster->find("first",array('conditions'=>array('PincodeMaster.pincode'=>$_REQUEST['pin'])));
		
		$result = array();
		if($pincode)
		{
			$city = $this->City->find('first',array('conditions'=>array('City.id'=>$pincode['PincodeMaster']['city'])));
			$state = $this->State->find('first',array('conditions'=>array('State.id'=>$pincode['PincodeMaster']['state'])));
			
			if($pincode['PincodeMaster']['servicable']==1)//$selectedpincode
			{
				$this->_code = 200;
				$result = array('pincode'=>$_REQUEST['pin'],'city'=>$city['City']['name'],'state'=>$state['State']['name'],'result'=>'Pincode Servicable');
			}
			else
			{
				$this->_code = 306;
				$result = array('pincode'=>$_REQUEST['pin'],'city'=>$city['City']['name'],'state'=>$state['State']['name'],'result'=>'Pincode Not Servicable');
			}
		}
		else
		{
			$this->_code = 406;
			$result = array('pincode'=>$_REQUEST['pin'],'result'=>'Incorrect Pincode');
		}
		
		print_R(json_encode($result));
		die;
	}

	function task_schedule($assigned_to=NULL,$date=NULL)
	{
		$this->TaskCategory = ClassRegistry::init('TaskCategory');
		$this->Ticket = ClassRegistry::init('Ticket');
		$t_cat = $this->TaskCategory->find('list',array('fields'=>array('id','name')));
		$this->set('category',$t_cat);

		$this->layout = 'tests';
		$assigned_to = base64_decode($assigned_to);
		$date = base64_decode($date);
		$this->set('assigned_to',$assigned_to);
		$this->set('date',$date);
/*		echo $assigned_to;
		echo "<br>";
		echo $date;
*/		
		$taskdata = $this->Ticket->find('all',array('conditions'=>array('Ticket.date'=>$date,'Ticket.assigned_to'=>$assigned_to)));
		//$taskdata = $this->Ticket->query('Select * from ticket where date="'.$date.'" and assigned_to ="'.$assigned_to.'"');
		
		$count = 0;
		$new_taskdata = array();
		foreach($taskdata as $val)
		{
			$task_category = $this->TaskCategory->find('first',array('conditions'=>array('TaskCategory.id'=>$val['Ticket']['category'])));
			
			$val['Ticket']['check_list'] = explode("@@@",$task_category['TaskCategory']['checklist']);
			$val['Ticket']['docs_list'] = explode("@@@",$task_category['TaskCategory']['required_docs']);

			$val['Ticket']['checks'] = explode('@',$val['Ticket']['checklist']);
			$val['Ticket']['docs'] = explode('@',$val['Ticket']['documents']);
			
			$new_taskdata[$count] = $val;
			$count++;
		}	
		//print_R($new_taskdata);die;
		$this->set('taskdata',$new_taskdata);
		$this->set('date',$date);

		$priority = array("1"=>"Low","2"=>"Moderate","3"=>"High","4"=>"Critical");
		$this->set('priority',$priority);
	}

	function update_patient_task()
	{
		$userData = $this->Session->read('UserDetail');
		
		$this->TicketTracking = ClassRegistry::init('TicketTracking');
		
		$tickettrack = $this->TicketTracking->create();

		$tickettrack['ticket_id'] = $this->data['Ticket']['ticket_id'];
		$tickettrack['assigned_to'] = $submit_data['Ticket']['assigned_to'];
		$tickettrack['description'] = $_POST['desc'.$this->data['Ticket']['id']];
		$tickettrack['date'] = date('Y-m-d h:i:s');
		$tickettrack['edited_by'] = $userData['User']['id'];					
		
		$hfile = $this->File->uploadFile($this->data['Ticket']['doc'], PATIENT_TICKET_STORE_PATH, true,array('jpg','jpe','jpeg','gif','png','JPG','JPE','JPEG','GIF','PNG','PDF','pdf','csv','CSV'));
		$tickettrack['img_url'] = $hfile['name'];
		//print_R($tickettrack);die;
		if($hfile['name']!='P')
		{
			$check = $this->TicketTracking->save($tickettrack);
			$this->Session->setFlash('Task Updated Successfully ','flash_success');  
			$this->redirect('/pages/enquiry_detail');
		}
		else
		{
			$this->Session->setFlash('Error Occured on Updating Task.','flash_failure');  
			$this->redirect('/pages/enquiry_detail');
		}
	}

	function update_task()
	{
		$this->Ticket = ClassRegistry::init('Ticket');
		$ticketdata = $this->Ticket->find('first',array('conditions'=>array('Ticket.id'=>$this->data['Ticket']['id'])));

		//print_R($_POST);die;
		$task_category = $this->TaskCategory->find('first',array('conditions'=>array('TaskCategory.id'=>$ticketdata['Ticket']['category'])));

		$checklist = explode("@@@",$task_category['TaskCategory']['checklist']);
		$doclist = explode("@@@",$task_category['TaskCategory']['required_docs']);

		$check_list = array();
		foreach($this->data['Ticket']['check'] as $key=>$val)
		{
			array_push($check_list,$checklist[$key]."#".$val); 
		}

		$doc_list = array();
		foreach($this->data['Ticket']['doc'] as $key=>$val)
		{
			$hfile = $this->File->uploadFile($val, PATIENT_TICKET_STORE_PATH, true,array('jpg','jpe','jpeg','gif','png','JPG','JPE','JPEG','GIF','PNG','PDF','pdf'));
			$tickettrack['img_url'] = $hfile['name'];
			array_push($doc_list,$doclist[$key]."#".$hfile['name']);
		}
		
		//print_R($doc_list);die;	

		$update_query = $this->Ticket->query("update ticket set last_edited='".$ticket['last_edited']."',checklist='".implode('@',$check_list)."',documents='".implode('@',$doc_list)."' where id='".$this->data['Ticket']['id']."'");

		$this->TicketTracking = ClassRegistry::init('TicketTracking');
		
		$ticket['last_edited'] = date('Y-m-d h:i:s');

		$tickettrack['ticket_id'] = $this->data['Ticket']['ticket_id'];
		$tickettrack['description'] = $_POST['desc'.$this->data['Ticket']['id']];
		$tickettrack['date'] = date('Y-m-d h:i:s');
		$tickettrack['edited_by'] = $this->data['Ticket']['assigned_to'];					
		$tickettrack['img_url'] = "";

		if($this->TicketTracking->save($tickettrack)){
			$this->Session->setFlash('Task '.$this->data['Ticket']['id'].' Update Successfully.','flash_success');  
			$this->redirect('/pages/task_schedule/'.base64_encode($this->data['Ticket']['assigned_to']).'/'.base64_encode($this->data['Ticket']['date']));
		}
		else{
			$this->Session->setFlash('Error Occurred on Updating Task '.$this->data['Ticket']['id'],'flash_failure');  
			$this->redirect('/pages/task_schedule/'.base64_encode($this->data['Ticket']['assigned_to']).'/'.base64_encode($this->data['Ticket']['date']));
		}
		die;
	}

	function raise_ticket()
	{
		$this->layout='tests';
		$userData = $this->Session->read('UserDetail');

		$this->TaskCategory = ClassRegistry::init("TaskCategory");
		$t_cat = $this->TaskCategory->find('list',array('fields'=>array('id','name')));
		if(!$userData)
		{
			$this->Session->write('referer','raise_ticket');
			$this->Session->setFlash('Kindly login Before Raising A Ticket');
			$this->redirect('/testds/login');
		}
		$this->set('category',$t_cat);
	}

	function save_ticket()
	{
		$user = $this->Session->read('UserDetail');
		$this->Ticket = ClassRegistry::init('Ticket');
		$this->Billing = ClassRegistry::init('Billing');
		$billing_data = $this->Billing->find('first',array('conditions'=>array('Billing.order_id'=>$this->data['Ticket']['request_id'])));

		$ticket_data = $this->Ticket->create();

		$ticket_data['Ticket']['ticket_id'] = "T-".strtotime(date('Y-m-d H:i:s'));
		$ticket_data['Ticket']['category'] = $this->data['Ticket']['category'];
		$ticket_data['Ticket']['lab_no'] = $this->data['Ticket']['lab_no'];
		$ticket_data['Ticket']['request_id'] = $billing_data['Billing']['request_id'];
		$ticket_data['Ticket']['title'] = $this->data['Ticket']['tickettitle'];
		$ticket_data['Ticket']['date'] = date('Y-m-d');
		$ticket_data['Ticket']['description'] = $this->data['Ticket']['description'];
		$ticket_data['Ticket']['user_id'] = $user['User']['id'];
		$ticket_data['Ticket']['email'] = $user['User']['email'];
		$ticket_data['Ticket']['concern_raised'] = $user['User']['first_name'];
		$ticket_data['Ticket']['status'] = 1;

		if($this->Ticket->save($ticket_data))
		{
			$this->redirect('/pages/enquiry_detail');
		}
		else
		{
			$this->Session->setFlash('Error occured. Please submit Again.');
		}
	}

	function enquiry_detail()
	{
		$this->layout='tests';
		$user = $this->Session->read('UserDetail');
		if(!$user)
		{
			$this->redirect('/testds/login');	
		}
		$this->Ticket = ClassRegistry::init('Ticket');
		$ticket_detail = $this->Ticket->find('all',array('conditions'=>array('Ticket.user_id'=>$user['User']['id'])));
		$this->TaskCategory = ClassRegistry::init('TaskCategory');
		$t_cat = $this->TaskCategory->find('list',array('fields'=>array('id','name')));
		$priority = array("1"=>"Low","2"=>"Moderate","3"=>"High","4"=>"Critical");
		
		$status = array("1"=>"New Ticket","2"=>"In Process","3"=>"Resolved","4"=>"Closed");
		$this->set('status',$status);

		$this->set('priority',$priority);
		$this->set('category',$t_cat);
		$this->set('ticket_detail',$ticket_detail);
	}

	function user_detail($contact=NULL)
	{
		$this->layout='tests';
		$referer = $this->Session->read('referer');
		$this->User = ClassRegistry::init('User');

		if($_POST)
		{
			//print_R($_POST);die;
			$user_detail = $this->User->find('first',array('conditions'=>array('User.Contact'=>$contact)));

			$user_detail['User']['first_name'] = $_POST['firstname'];
			$user_detail['User']['last_name'] = $_POST['lastname'];
			$user_detail['User']['gender'] = $_POST['gender'];
			$user_detail['User']['email'] = $_POST['email'];
			$user_detail['User']['address'] = $_POST['address'];
			$user_detail['User']['id'] = $user_detail['User']['id'];

			$this->User->save($user_detail);

			if($referer=='raise_ticket')
			{
				$this->redirect('/pages/raise_ticket');	
			}
			else
			{
				$this->redirect('/tests/payment_history');
			}
		}

		$user_detail = $this->User->find('first',array('conditions'=>array('User.contact'=>$contact)));
		$this->set('phone',$user_detail['User']['contact']);
	}
}
?>